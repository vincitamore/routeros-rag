<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : VRRP</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="High-Availability-Solutions_120324133.html">High Availability Solutions</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : VRRP
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Artūrs C.</span>, last updated by <span class='editor'> Edgars P.</span> on May 19, 2025
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742029338 {padding: 0px;}
div.rbtoc1747742029338 ul {margin-left: 0px;}
div.rbtoc1747742029338 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742029338'>
<ul class='toc-indentation'>
<li><a href='#VRRP-Summary'>Summary</a></li>
<li><a href='#VRRP-ProtocolOverview'>Protocol Overview</a>
<ul class='toc-indentation'>
<li><a href='#VRRP-VirtualRouter(VR)'>Virtual Router (VR)</a>
<ul class='toc-indentation'>
<li><a href='#VRRP-VirtualMACaddress'>Virtual MAC address</a></li>
</ul>
</li>
<li><a href='#VRRP-Owner'>Owner</a></li>
<li><a href='#VRRP-Master'>Master</a></li>
<li><a href='#VRRP-Backup'>Backup</a></li>
<li><a href='#VRRP-VirtualAddress'>Virtual Address</a>
<ul class='toc-indentation'>
<li><a href='#VRRP-IPv4ARP'>IPv4 ARP</a></li>
<li><a href='#VRRP-IPv6ND'>IPv6 ND</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#VRRP-VRRPstatemachine'>VRRP state machine</a>
<ul class='toc-indentation'>

<ul class='toc-indentation'>
<li><a href='#VRRP-Initstate'>Init state</a></li>
<li><a href='#VRRP-Backupstate'>Backup state</a></li>
<li><a href='#VRRP-Masterstate'>Master state</a></li>
</ul>
<li><a href='#VRRP-Connectiontrackingsynchronization'>Connection tracking synchronization</a></li>
</ul>
</li>
<li><a href='#VRRP-ConfiguringVRRP'>Configuring VRRP</a>
<ul class='toc-indentation'>
<li><a href='#VRRP-IPv4'>IPv4</a></li>
<li><a href='#VRRP-IPV6'>IPV6</a></li>
</ul>
</li>
<li><a href='#VRRP-Parameters'>Parameters</a></li>
</ul>
</div></p><h1 id="VRRP-Summary"><span class="mw-headline">Summary</span></h1><p>This chapter describes the Virtual Router Redundancy Protocol (VRRP) support in RouterOS.</p><p>Mostly on larger LANs dynamic routing protocols (OSPF<span> </span>or<span> </span>RIP) are used, however, there are a number of factors that may make it undesirable to use dynamic routing protocols. One alternative is to use static routing, but if the statically configured first hop fails, then the host will not be able to communicate with other hosts.</p><p>In IPv6 networks, hosts learn about routers by receiving Router Advertisements used by<span> the </span>Neighbor Discovery (ND)<span> </span>protocol. ND already has a built-in mechanism to determine unreachable routers. However, it can take up to 38 seconds to detect an unreachable router. It is possible to change parameters and make detection faster, but it will increase the overhead of ND traffic especially if there are a lot of hosts. VRRP allows the detection of unreachable routers within 3 seconds without additional traffic overhead.</p><p>Virtual Router Redundancy Protocol (VRRP) provides a solution by combining a number of routers into a logical group called<span> </span><em>Virtual Router</em><span> </span>(VR). VRRP implementation in RouterOS is based on VRRPv2 RFC 3768 and VRRPv3 RFC 5798.</p><p>It is recommended to use the same version of RouterOS for all devices with the same VRID used to implement VRRP.</p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><span style="color:var(--ds-text,#333333);"><span> </span>According to RFC authentication is deprecated for VRRP v3</span></p></div></div><h1 id="VRRP-ProtocolOverview"><span class="mw-headline">Protocol Overview</span></h1><p><span class="mw-headline"><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/81362945/83755066.png" data-image-src="attachments/81362945/83755066.png" data-unresolved-comment-count="0" data-linked-resource-id="83755066" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Vrrp-simple.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="81362945" data-linked-resource-container-version="26" tabindex="0" alt=""></span></span></p><p>The purpose of the VRRP is to communicate to all VRRP routers associated with the Virtual Router ID and support router redundancy through a prioritized election process among them.</p><p>All messaging is done by IPv4 or IPv6 multicast packets using protocol 112 (VRRP). The destination address of an IPv4 packet is<span> </span><em>224.0.0.18</em><span> </span>and for IPv6 it is<span> </span><em>FF02:0:0:0:0:0:0:12</em>. The source address of the packet is always the primary IP address of an interface from which the packet is being sent. In IPv6 networks, the source address is the link-local address of an interface.</p><p>These packets are always sent with TTL=255 and are not forwarded by the router. If for any reason the router receives a packet with lower TTL, a packet is discarded.</p><p>Each VR node has a single assigned MAC address. This MAC address is used as a source for all periodic messages sent by Master.</p><p>Virtual Router is defined by VRID and mapped set of IPv4 or IPv6 addresses. The master router is said to be the<span> </span><strong>owner</strong><span> </span>of mapped IPv4/IPv6 addresses. There are no limits to using the same VRID for IPv4 and IPv6, however, these will be two different Virtual Routers.</p><p>Only the Master router is sending periodic Advertisement messages to minimize the traffic. A backup will try to preempt the Master only if it has the higher priority and preemption is not prohibited.</p><div role="region" aria-label="Tip" class="confluence-information-macro  confluence-information-macro-tip" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>All VRRP routers belonging to the same VR must be configured with the same advertisement interval. If the interval does not match router will discard the received advertisement packet.</p></div></div><h2 id="VRRP-VirtualRouter(VR)"><span class="mw-headline">Virtual Router (VR)</span></h2><p>A Virtual Router (VR) consists of one Owner router and one or more backup routers belonging to the same network.</p><p>VR includes:</p><ul class="bullets"><li>VRID configured on each VRRP router</li><li>the same virtual IP on each router</li><li>Owner and Backup configured on each router. On a given VR there can be only one Owner.</li></ul><h3 id="VRRP-VirtualMACaddress"><span class="mw-headline">Virtual MAC address</span></h3><p>VRRP automatically assigns MAC address to VRRP interface based on standard MAC prefix for VRRP packets and VRID number. The first five octets are 00:00:5E:00:01 and the last octet is configured VRID. For example, if Virtual Routers VRID is 49, then the virtual MAC address will be<span> </span><em>00:00:5E:00:01:31</em>.</p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Virtual mac addresses can not be manually set or edited.</p></div></div><h2 id="VRRP-Owner"><span class="mw-headline">Owner</span></h2><p>An Owner router for a VR is the default Master router and operates as the Owner for all subnets included in the VR. Priority on an owner router must be the highest value (255) and virtual IP is the same as real IP (owns the virtual IP address).</p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>RouterOS can not be configured as Owner. The Pure virtual IP configuration is the only valid configuration unless a non-RouterOS device is set as the owner.</p></div></div><h2 id="VRRP-Master"><span class="mw-headline">Master</span></h2><p>A master router in a VR operates as the physical gateway for the network for which it is configured. The selection of the Master is controlled by priority value.<span> The </span>Master state<span> </span>describes the behavior of the Master router. For example network,<span> </span><strong>R1</strong><span> </span>is the Master router. When R1 is no longer available R2 becomes master.</p><h2 id="VRRP-Backup"><span class="mw-headline">Backup</span></h2><p>VR must contain at least one Backup router. A backup router must be configured with the same<span> </span>virtual IP<span> </span>as the Master for that VR. The default priority for Backup routers is 100. When the current master router is no longer available, a backup router with the highest priority will become a current master. Every time when a router with higher priority becomes available it is switched to master. Sometimes this behavior is not necessary. To override it<span> </span>preemption mode<span> </span>should be disabled.</p><h2 id="VRRP-VirtualAddress"><span class="mw-headline">Virtual Address</span></h2><p><br/></p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/81362945/83755067.png" data-image-src="attachments/81362945/83755067.png" data-unresolved-comment-count="0" data-linked-resource-id="83755067" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Vrrp-no-owner.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="81362945" data-linked-resource-container-version="26" tabindex="0" alt=""></span></p><p>Virtual IP associated with VR must be identical and set on all VR nodes. All virtual and real addresses should be from the same network.</p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>RouterOS can not be configured as Owner. VRRP address and real IP address should not be the same.</p></div></div><p>If the Master of VR is associated with multiple IP addresses, then Backup routers belonging to the same VR must also be associated with the same set of virtual IP addresses. If the virtual address on the Master is not also on Backup a misconfiguration exists and VRRP advertisement packets will be discarded.</p><p>All Virtual Router members can be configured so that virtual IP is not the same as physical IP. Such a virtual address can be called a floating or pure virtual IP address. The advantage of this setup is the flexibility given to the administrator. Since the virtual IP address is not the real address of any one of the participant routers, the administrator can change these physical routers or their addresses without any need to reconfigure the virtual router itself.</p><p>In IPv6 networks, the first address is always a link-local address associated with VR. If multiple IPv6 addresses are configured, then they are added to the advertisement packet after the link-local address.</p><h3 id="VRRP-IPv4ARP"><span class="mw-headline">IPv4 ARP</span></h3><p>The Master for a given VR responds to ARP requests with the VR's assigned MAC address. The virtual MAC address is also used as the source MAC address for advertisement packets sent by the Master. To ARP requests for non-virtual IP, addresses router responds with the system MAC address. Backup routers are not responding to ARP requests for Virtual IPs.</p><h3 id="VRRP-IPv6ND"><span class="mw-headline">IPv6 ND</span></h3><p>As you may know, in IPv6 networks, the Neighbor Discovery protocol is used instead of ARP. When a router becomes the Master, an unsolicited ND Neighbor Advertisement with the Router Flag is sent for each IPv6 address associated with the virtual router.</p><h1 id="VRRP-VRRPstatemachine"><span class="mw-headline">VRRP state machine</span></h1><p><span class="mw-headline"><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/81362945/83755068.png" data-image-src="attachments/81362945/83755068.png" data-unresolved-comment-count="0" data-linked-resource-id="83755068" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Vrrp-State.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="81362945" data-linked-resource-container-version="26" tabindex="0" alt=""></span></span></p><p>As you can see from the diagram, each VRRP node can be in one of three states:</p><ul class="bullets"><li>Init state</li><li>Backup state</li><li>Master state</li></ul><h3 id="VRRP-Initstate"><span class="mw-headline">Init state</span></h3><p>The purpose of this state is to wait for a Startup event. When this event is received, the following actions are taken:</p><ul><li>if priority is 255,</li><li>* for IPv4 send advertisement packet and broadcast ARP requests</li><li>* for IPv6 send an unsolicited ND Neighbor Advertisement for each IPv6 address associated with the virtual router and set target address to link-local address associated with VR.</li><li>* transit to<span> </span>MASTER state;</li><li>else transit to<span> </span>BACKUP state.</li></ul><h3 id="VRRP-Backupstate"><span class="mw-headline">Backup state</span></h3><p>When in the backup state,</p><ul><li>in IPv4 networks, a node is not responding to ARP requests and is not forwarding traffic for the IP associated with the VR.</li><li>in IPv6 networks, a node is not responding to ND Neighbor Solicitation messages and is not sending ND Router Advertisement messages for VR-associated IPv6 addresses.</li></ul><p>Routers' main task is to receive advertisement packets and check if the master node is available.</p><p>The backup router will transmit itself to the master state in two cases:</p><ul><li>If priority in advertisement packet is 0;</li><li>When Preemption_Mode is set to yes and Priority in the ADVERTISEMENT is lower than the local Priority</li></ul><p>After the transition to Master state node is:</p><ul><li>in IPv4 broadcasts gratuitous ARP request;</li><li>in IPv6 sends an unsolicited ND Neighbor Advertisement for every associated IPv6 address.</li></ul><p>In other cases, advertisement packets will be discarded. When the shutdown event is received, transit to Init state.</p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Preemption mode is ignored if the Owner router becomes available.</p></div></div><h3 id="VRRP-Masterstate"><span class="mw-headline">Master state</span></h3><p>When the MASTER state is set, the node functions as a forwarding router for IPv4/IPv6 addresses associated with the VR.</p><p>In IPv4 networks, the Master node responds to ARP requests for the IPv4 address associated with the VR. In IPv6 networks Master node:</p><ul><li>responds to ND Neighbor Solicitation message for the associated IPv6 address;</li><li>sends ND Router Advertisements for the associated IPv6 addresses.</li></ul><p><br/>If the advertisement packet is received by master node:</p><ul><li>If priority is 0, send advertisement immediately;</li><li>If priority in advertisement packet is greater than nodes priority then transit to<span> the </span>backup state</li><li>If priority in advertisement packet is equal to nodes priority and primary IP Address of the sender is greater than the local primary IP Address, then transit to<span> the </span>backup state</li><li>Ignore advertisement in other cases</li></ul><p>When the shutdown event is received, send the advertisement packet with priority=0 and transit to<span> </span>Init state.</p><h2 id="VRRP-Connectiontrackingsynchronization">Connection tracking synchronization</h2><p>Similar to different High availability<em style="text-align: left;"> </em>features, RouterOS v7 supports VRRP connection tracking synchronization.</p><p>The VRRP connection tracking synchronization requires that RouterOS <a href="https://help.mikrotik.com/docs/display/ROS/Connection+tracking" rel="nofollow">connection tracking</a> is running. By default, connection tracking is working in <code><span style="color:var(--ds-icon-success,#22a06b);">auto</span></code> mode. If VRRP devices do not contain any firewall rules, you need to manually enable connection tracking:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip/firewall/connection/tracking/set enabled=yes</pre>
</div></div><p>To sync connection tracking entries configure the device as follows:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface/vrrp/set vrrp1 sync-connection-tracking=yes</pre>
</div></div><p>Verify configuration in the logging section:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">16:14:06 vrrp,info vrrp1 now MASTER, master down timer
16:14:06 vrrp,info vrrp1 stop CONNTRACK
16:14:06 vrrp,info vrrp1 starting CONNTRACK MASTER</pre>
</div></div><p>Connection tracking entries are synchronized only from the Master to the Backup device.</p><p><span style="text-decoration: none;color:var(--ds-text,#333333);">When both </span><span style="color:var(--ds-text-accent-green-bolder,#164b35);"><code><strong class="text-strong" style="text-decoration: none;">sync-connection-tracking</strong></code></span><span style="text-decoration: none;color:var(--ds-text,#333333);"> and </span><code><span style="color:var(--ds-text-accent-green-bolder,#164b35);"><strong class="text-strong" style="text-decoration: none;">preemption-mode</strong></span></code><span style="text-decoration: none;color:var(--ds-text,#333333);"> are enabled, and a router with higher VRRP priority becomes online, the connections get synchronized first, and only then the router with higher priority becomes the VRRP master.</span></p><div role="region" aria-label="Tip" class="confluence-information-macro  confluence-information-macro-tip" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>If multiple VRRP interfaces are configured between two units and <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">sync-connection-tracking=yes</span></code> is required, it must be enabled only on one of the VRRP interfaces, preferably the one designated as the <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">group-authority</span></code>.</p></div></div><h1 id="VRRP-ConfiguringVRRP">Configuring VRRP</h1><h2 id="VRRP-IPv4"><span class="mw-headline">IPv4</span></h2><p>Setting up Virtual Router is quite easy, only two actions are required - create VRRP interface and set Virtual Routers IP address.</p><p>For example, add VRRP to ether1 and set VRs address to 192.168.1.1</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface vrrp add name=vrrp1 interface=ether1
/ip address add address=192.168.1.2/24 interface=ether1
/ip address add address=192.168.1.1/32 interface=vrrp1</pre>
</div></div><p><span class="mw-headline"><span style="color:var(--ds-text,#333333);">Notice that only the 'interface' parameter was specified when adding VRRP. It is the only parameter required to be set manually,<span> </span>other parameters<span> </span>if not specified will be set to their defaults:<span> </span><code>vrid=1, priority=100</code><span> </span>and<span> </span><code>authentication=none</code>.</span></span></p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><span style="color:var(--ds-text,#333333);">Address on the VRRP interface must have /32 netmask if the address configured on VRRP is from the same subnet as on the router's any other interface.</span></p></div></div><p><span class="mw-headline"><span style="color:var(--ds-text,#333333);">Before VRRP can operate correctly correct IP address is required on ether1. In this example, it is<span> </span></span></span>192.168.1.2/24</p><h2 id="VRRP-IPV6">IPV6</h2><p><span class="mw-headline"><span style="color:var(--ds-text,#333333);">To make VRRP work in IPv6 networks, several additional options must be enabled - v3 support is required and the protocol type should be set to IPv6:</span></span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface vrrp add name=vrrp1 interface=ether1 version=3 v3-protocol=ipv6</pre>
</div></div><p class="auto-cursor-target"><span style="color:var(--ds-text,#333333);">Now when the VRRP interface is set, we can add a global address and enable ND advertisement:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ipv6 address add address=FEC0:0:0:FFFF::1/64 advertise=yes interface=vrrp1</pre>
</div></div><p>No additional address configuration is required as it is in the IPv4 case. IPv6 uses link-local addresses to communicate between nodes.</p><h1 id="VRRP-Parameters">Parameters</h1><div class="table-wrap"><table class="wrapped confluenceTable" style="margin-left: 23.1719px;"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>arp</strong><span> </span>(<em>disabled | enabled | proxy-arp | reply-only</em>; Default:<span> </span><strong>enabled</strong>)</td><td class="confluenceTd">ARP resolution protocol mode</td></tr><tr><td class="confluenceTd"><strong>arp-timeout</strong><em><strong> </strong>(integer; Default:<span> </span>auto)</em></td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><strong>authentication</strong><span> </span>(<em>ah | none | simple</em>; Default:<span> </span><strong>none</strong>)</td><td class="confluenceTd">Authentication method to use for VRRP advertisement packets.<ul><li>none<span> </span>- should be used only in low-security networks (e.g., two VRRP nodes on LAN).</li><li>ah<span> </span>- IP Authentication Header. This algorithm provides strong protection against configuration errors, replay attacks, and packet corruption/modification. Recommended when there is limited control over the administration of nodes on a LAN. HMAC-MD5 is used.</li><li>simple<span> </span>- uses a clear-text password. Protects against accidental misconfiguration of routers on a local network.</li></ul></td></tr><tr><td class="confluenceTd"><strong>group-authority </strong>(<em>interface;</em> Default: <strong>none</strong>)</td><td class="confluenceTd"><div class="content-wrapper"><p style="text-align: left;">Allows combining multiple VRRP interfaces to maintain the same VRRP status within the group. For example, VRRP instances run on LAN and WAN networks with NAT in-between. If one VRRP instance is Master and the other is Backup on the same device, the entire network malfunctions due to NAT failure. Grouping LAN and WAN VRRP interfaces ensures that both are either VRRP Master or Backup.</p><p style="text-align: left;">In a VRRP group, VRRP control traffic gets sent only by the group authority. That's why in a typical WAN+LAN setup, it is recommended to use the LAN network as the group master to keep VRRP control traffic in the internal network.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface vrrp
add name=vrrp-wan interface=sfp-sfpplus1 vrid=1 priority=100
add name=vrrp-lan interface=bridge1 vrid=2 priority=100
set [find] group-authority=vrrp-lan</pre>
</div></div><p class="auto-cursor-target" style="text-align: left;">Group-authority was previously called &quot;group-master&quot;, &quot;group-master&quot; is kept for compatibility with scripts, but if both are set only &quot;group-authority&quot; will be taken into account.</p></div></td></tr><tr><td class="confluenceTd"><strong>interface</strong><span> </span>(<em>string</em>; Default:<span> </span>)</td><td class="confluenceTd">Interface name on which VRRP instance will be running</td></tr><tr><td class="confluenceTd"><strong>interval</strong><span> </span>(<em>time [10ms..4m15s]</em>; Default:<span> </span><strong>1s</strong>)</td><td class="confluenceTd">VRRP update interval in seconds. Defines how often the master sends advertisement packets.</td></tr><tr><td class="confluenceTd"><strong>mtu</strong><span> </span>(<em>integer</em>; Default:<span> </span><strong>1500</strong>)</td><td class="confluenceTd">Layer3 MTU size. Since RouterOS v7.7, the VRRP interface always uses slave interface MTU</td></tr><tr><td class="confluenceTd"><strong>name</strong><span> </span>(<em>string</em>; Default:<span> </span>)</td><td class="confluenceTd">VRRP interface name</td></tr><tr><td class="confluenceTd"><strong>on-backup</strong><span> </span>(<em>string</em>; Default:<span> </span>)</td><td class="confluenceTd">Script to execute when the node is switched to the backup state</td></tr><tr><td class="confluenceTd"><strong>on-master</strong><span> </span>(<em>string</em>; Default:<span> </span>)</td><td class="confluenceTd">Script to execute when the node is switched to master state</td></tr><tr><td class="confluenceTd"><strong>on-fail </strong>(<em>string</em>; Default:<span> </span>)</td><td class="confluenceTd">Script to execute when the node fails</td></tr><tr><td class="confluenceTd"><strong>password</strong><span> </span>(<em>string</em>; Default:<span> </span>)</td><td class="confluenceTd">Password required for authentication. Can be ignored if authentication is not used.</td></tr><tr><td class="confluenceTd"><strong>preemption-mode</strong><span> </span>(<em>yes | no</em>; Default:<span> </span><strong>yes</strong>)</td><td class="confluenceTd">Whether the master node always has the priority. When set to 'no' the backup node will not be elected to be a master until the current master fails, even if the backup node has higher priority than the current master. This setting is ignored if<span> the o</span>wner router<span> </span>becomes available</td></tr><tr><td class="confluenceTd"><strong>priority</strong><span> </span>(<em>integer: 1..254</em>; Default:<span> </span><strong>100</strong>)</td><td class="confluenceTd">Priority of VRRP node used in Master election algorithm. A higher number means higher priority. '255' is reserved for the router that owns VR IP and '0' is reserved for the Master router to indicate that it is releasing responsibility.</td></tr><tr><td class="confluenceTd"><strong>remote-address</strong> (<em>IPv4;</em> Default: )</td><td class="confluenceTd"><p><span style="color:var(--ds-text,#333333);">Specifies the remote address of the other VRRP router for syncing connection tracking. If not set, the system autodetects the remote address via VRRP. The remote address is used only if sync-connection-tracking=yes. Explicitly setting a remote address has the following benefits: </span></p><ul><li><span style="color:var(--ds-text,#333333);">Connection syncing starts faster since there is no need to wait for VRRP's initial message exchange to detect the remote address. </span></li><li><span style="color:var(--ds-text,#333333);">Faster VRRP Master election. </span></li><li><span style="color:var(--ds-text,#333333);">Allows sending connection tracking data via a different network interface (e.g., a dedicated secure line between two routers). </span></li></ul><p><span style="color:var(--ds-text,#333333);">Sync connection tracking uses UDP port 8275.</span></p></td></tr><tr><td class="confluenceTd"><strong>v3-protocol</strong><span> </span>(<em>ipv4 | ipv6</em>; Default:<span> </span><strong>ipv4</strong>)</td><td class="confluenceTd">A protocol that will be used by VRRPv3. Valid only if<span> the </span><strong>version</strong><span> </span>is 3.</td></tr><tr><td class="confluenceTd"><strong>version</strong><span> </span>(<em>integer [2, 3]</em>; Default:<span> </span><strong>3</strong>)</td><td class="confluenceTd">Which VRRP version to use.</td></tr><tr><td class="confluenceTd"><strong>vrid</strong><span> </span>(<em>integer: 1..255</em>; Default:<span> </span><strong>1</strong>)</td><td class="confluenceTd">Virtual Router identifier. Each Virtual router must have a unique id number</td></tr><tr><td class="confluenceTd"><strong>sync-connection-tracking</strong><em> </em>(<em>string</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Synchronize connection tracking entries from Master to Backup device. The VRRP connection tracking synchronization requires that RouterOS <a href="https://help.mikrotik.com/docs/display/ROS/Connection+tracking" rel="nofollow">connection tracking</a> is running.</td></tr></tbody></table></div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/81362945/83755066.png">Vrrp-simple.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/81362945/83755067.png">Vrrp-no-owner.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/81362945/83755068.png">Vrrp-State.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
