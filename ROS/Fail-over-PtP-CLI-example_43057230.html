<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : Fail-over PtP CLI example</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Wireless_1409138.html">Wireless</a></span>
                            </li>
                                                    <li>
                                <span><a href="W60G_39059501.html">W60G</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : Fail-over PtP CLI example
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Krists Dūčis</span>, last updated by <span class='editor'> Unknown User (0testing)</span> on May 08, 2023
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 id="FailoverPtPCLIexample-Summary"><span class="mw-headline">Summary</span></h2><hr/><p>This example shows how to configure automatic fail-over (bonding) 5Ghz link in combination with 60Ghz devices in CLI.<br/>When a connection between 60Ghz wireless is lost, it will automatically use the bonded interface.<br/>Example is done from empty configuration state with [<a class="external-link" href="https://mikrotik.com/download" rel="nofollow">WinBox</a>] utility</p><h2 id="FailoverPtPCLIexample-Connecttothedevicestepbystep"><span class="mw-headline">Connect to the device step by step</span></h2><hr/><ol><li><p class="auto-cursor-target">After configuration reset - only mac-telnet is possible. <br/>Connect to device by connecting to it's MAC address or use WinBox New terminal to find device MAC address of the W60G device by issuing command:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>/ip neighbor print</pre></th></tr></tbody></table></div></li><li><p class="auto-cursor-target">To connect to the W60G device issue a command:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>/tool mac-telnet mac-address</pre></th></tr></tbody></table></div></li><li><p class="auto-cursor-target">Enter username and password. By default username is <strong>admin </strong>and password is either blank or printed on the device sticker.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col style="width: 443.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@KD_GW] &gt; /tool mac-telnet C4:AD:34:84:EE:5D<br/>Login: admin<br/>Password: <br/>Trying C4:AD:34:84:EE:5D...<br/>Connected to C4:AD:34:84:EE:5D</pre></th></tr></tbody></table></div></li></ol><h2 id="FailoverPtPCLIexample-Configurebridge"><span class="mw-headline">Configure bridge<br/></span></h2><hr/><ol><li><p class="auto-cursor-target">Add new bridge and assign bridge members to it by issuing the following command:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>/interface bridge add name=bridge</pre></th></tr></tbody></table></div><p class="auto-cursor-target">To check if the bridge has been created issue a command:</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 48.2598%;"><colgroup><col style="width: 100.0%;"/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface bridge print<br/>Flags: X - disabled, R - running <br/>0 R name=&quot;bridge&quot; mtu=auto actual-mtu=1500 l2mtu=65535 arp=enabled arp-timeout=auto mac-address=1A:7F:BB:41:B0:94 protocol-mode=rstp <br/>fast-forward=yes igmp-snooping=no auto-mac=yes ageing-time=5m priority=0x8000 max-message-age=20s forward-delay=15s transmit-hold-count=6 <br/>vlan-filtering=no dhcp-snooping=no </pre></th></tr></tbody></table></div></li></ol><h2 id="FailoverPtPCLIexample-Setup60Ghzwirelessconnection"><span class="mw-headline">Set up 60Ghz wireless connection<br/></span></h2><hr/><p>All previously explained steps are identical to Bridge and Station devices. When configuring wireless interface different modes needs to be used.<br/><br/><strong><em>For bridge device -</em></strong></p><ul><li>Choose SSID, Password, frequency and choose bridge mode option that will act as a <strong>bridge </strong>for the setup, please see the example.</li><li><p class="auto-cursor-target">Enable W60G interface after required parameters have been set.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 50.0%;"><colgroup><col style="width: 100.0%;"/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface w60g set wlan60-1 mode=bridge frequency=auto ssid=MySSID password=choosepassword isolate-stations=yes<br/>[admin@MikroTik] &gt; /interface w60g print<br/>Flags: X - disabled, R - running <br/>0 X name=&quot;wlan60-1&quot; mtu=1500 l2mtu=1600 mac-address=C4:AD:34:84:EE:5E arp=enabled arp-timeout=auto region=no-region-set mode=bridge ssid=&quot;MySSID&quot; <br/>frequency=auto default-scan-list=58320,60480,62640,64800 password=&quot;choosepassword&quot; tx-sector=auto put-stations-in-bridge=bridge isolate-stations=yes<br/>[admin@MikroTik] &gt; /interface w60g enable wlan60-1</pre></th></tr></tbody></table></div></li></ul><p><em><strong>For Station device -</strong></em></p><ul><li>Choose the same SSID, Password, frequency as the bridge device and choose station-bridge mode option that will act as a <strong>station </strong>for the setup, please see the example.</li><li><p class="auto-cursor-target">Enable W60G interface after required parameters have been set.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface w60g set wlan60-1 mode=station-bridge frequency=auto ssid=MySSID password=choosepassword                              <br/>[admin@MikroTik] &gt; /interface w60g print<br/>Flags: X - disabled, R - running <br/>0 X name=&quot;wlan60-1&quot; mtu=1500 l2mtu=1600 mac-address=C4:AD:34:84:EE:5E arp=enabled arp-timeout=auto region=no-region-set mode=station-bridge ssid=&quot;MySSID&quot;<br/>frequency=auto default-scan-list=58320,60480,62640,64800password=&quot;choosepassword&quot; tx-sector=auto put-stations-in-bridge=bridge isolate-stations=yes<br/>[admin@MikroTik] &gt; /interface w60g enable wlan60-1</pre></th></tr></tbody></table></div></li></ul><h2 id="FailoverPtPCLIexample-Setup5Ghzwirelessconnection"><span class="mw-headline">Set up 5Ghz wireless connection<br/></span></h2><hr/><p><strong><em>For bridge device -</em></strong></p><ul><li>Choose SSID, Password, frequency and choose bridge mode option that will act as a <strong>bridge </strong>for the setup, please see the example.</li><li><p class="auto-cursor-target">Enable 5Ghz interface after required parameters have been set.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 66.4262%;"><colgroup><col style="width: 100.019%;"/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface wireless security-profiles set [ find default=yes ] supplicant-identity=MikroTik authentication-types=wpa2-psk mode=dynamic-keys wpa2-pre-shared-key=choosepassword<br/>[admin@MikroTik] &gt; /interface wireless set wlan1 frequency=auto scan-list=default installation=outdoor mode=bridge ssid=MikroTik1 channel-width=20/40/80mhz-Ceee wireless-protocol=any security-profile=default band=5ghz-a/n/ac <br/>[admin@MikroTik] &gt; /interface wireless enable wlan1</pre></th></tr></tbody></table></div></li></ul><p><em><strong>For Station device -</strong></em></p><ul><li>Choose the same SSID, Password, frequency as the bridge device and choose station-bridge mode option that will act as a <strong>station </strong>for the setup, please see the example.</li><li><p class="auto-cursor-target">Enable W60G interface after required parameters have been set.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col style="width: 1674.0px;"/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface wireless security-profiles set [ find default=yes ] supplicant-identity=MikroTik authentication-types=wpa2-psk mode=dynamic-keys wpa2-pre-shared-key=choosepassword<br/>[admin@MikroTik] &gt; /interface wireless set wlan1 frequency=auto scan-list=default installation=outdoor mode=station-bridge ssid=MikroTik1 channel-width=20/40/80mhz-Ceee wireless-protocol=any security-profile=default band=5ghz-a/n/ac<br/>[admin@MikroTik] &gt; /interface wireless enable wlan1</pre></th></tr></tbody></table></div></li></ul><h2 id="FailoverPtPCLIexample-Configurebridgeandbonding"><span class="mw-headline">Configure bridge and bonding<br/></span></h2><hr/><ol><li><p class="auto-cursor-target">Configure bonding and assign slave interfaces in this setup it is selected as built in wlan1 interface, but it can be also ether interface in other kind of setups.</p><p class="auto-cursor-target">For bridge device please set <strong>bonding </strong>as:</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 50.2547%;"><colgroup><col style="width: 100.0%;"/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface bonding add comment=bondingbackup mode=active-backup name=bond1 primary=wlan60-station-1 slaves=wlan60-station-1,wlan1</pre></th></tr></tbody></table></div><p class="auto-cursor-target">For station-bridge device please set <strong>bonding</strong> as:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface bonding add comment=defconf mode=active-backup name=bond1 primary=wlan60-1 slaves=wlan60-1,wlan1</pre></th></tr></tbody></table></div></li><li><p class="auto-cursor-target">Add interface members (ether1 and bond1) to newly created bridge. </p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface bridge port add interface=ether1 bridge=bridge <br/>[admin@MikroTik] &gt; /interface bridge port add interface=bond1  bridge=bridge <br/>[admin@MikroTik] &gt; /interface bridge port print<br/>Flags: X - disabled, I - inactive, D - dynamic, H - hw-offload <br/> #     INTERFACE                              BRIDGE                              HW   PVID PRIORITY  PATH-COST INTERNAL-PATH-COST    HORIZON<br/> 0     ether1                                 bridge                             yes     1     0x80         10                 10       none<br/> 1     bond1                                  bridge                             yes     1     0x80         10                 10       none</pre></th></tr></tbody></table></div></li></ol><h2 id="FailoverPtPCLIexample-Additionalconfiguration"><span class="mw-headline">Additional configuration</span></h2><hr/><p>Link should be established after all previously explained steps are done. It's recommended to set up administrator password on both devices.</p><h2 id="FailoverPtPCLIexample-Troubleshooting">Troubleshooting</h2><hr/><p>Ensure connection is established to the correct device by checking the device settings like serial number and model name by issuing a command:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /system routerboard print</pre></th></tr></tbody></table></div><p class="auto-cursor-target"><br/>If bridge wlan60-1 interface in bridge settings is inactive and configuration is done properly  to enable the interface on a device - issue a command:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/></colgroup><tbody><tr><th class="confluenceTh"><pre>[admin@MikroTik] &gt; /interface w60g enable wlan60-1</pre></th></tr></tbody></table></div><p><br/></p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
