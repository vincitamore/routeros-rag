<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : Neighbor discovery</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="System-Information-and-Utilities_119144657.html">System Information and Utilities</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : Neighbor discovery
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Guntis G.</span>, last updated by <span class='editor'> Edgars P.</span> on Oct 01, 2024
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742032782 {padding: 0px;}
div.rbtoc1747742032782 ul {margin-left: 0px;}
div.rbtoc1747742032782 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742032782'>
<ul class='toc-indentation'>
<li><a href='#Neighbordiscovery-Summary'>Summary</a></li>
<li><a href='#Neighbordiscovery-Neighborlist'>Neighbor list</a></li>
<li><a href='#Neighbordiscovery-Discoveryconfiguration'>Discovery configuration</a></li>
<li><a href='#Neighbordiscovery-LLDP'>LLDP</a></li>
</ul>
</div></span></p><h1 id="Neighbordiscovery-Summary"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">Summary</span></h1><p><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">Neighbor Discovery protocols allow us to find devices compatible with MNDP (MikroTik Neighbor Discovery Protocol), CDP (Cisco Discovery Protocol), or LLDP (Link Layer Discovery Protocol) in the Layer2 broadcast domain. It can be used to map out your network.</span></p><h1 id="Neighbordiscovery-Neighborlist">Neighbor list</h1><p>The neighbor list shows all discovered neighbors in the Layer2 broadcast domain. It shows to which interface neighbor is connected, its IP/MAC addresses, and other related parameters. The list is read-only, an example of a neighbor list is provided below:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /ip neighbor print 
 # INTERFACE ADDRESS         MAC-ADDRESS       IDENTITY   VERSION    BOARD      
 0 ether13   192.168.33.2    00:0C:42:00:38:9F MikroTik   5.99       RB1100AHx2
 1 ether11   1.1.1.4         00:0C:42:40:94:25 test-host  5.8        RB1000   
 2 Local     10.0.11.203     00:02:B9:3E:AD:E0 c2611-r1   Cisco I...                    
 3 Local     10.0.11.47      00:0C:42:84:25:BA 11.47-750  5.7        RB750  
 4 Local     10.0.11.254     00:0C:42:70:04:83 tsys-sw1   5.8        RB750G    
 5 Local     10.0.11.202     00:17:5A:90:66:08 c7200      Cisco I...</pre>
</div></div><p><strong>Sub-menu:</strong><span> </span><code>/ip neighbor</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>address</strong><span> </span>(<em>IP</em>)</td><td class="confluenceTd">The highest IP address configured on a discovered device</td></tr><tr><td class="confluenceTd"><strong>address6</strong><span> </span>(<em>IPv6</em>)</td><td class="confluenceTd">IPv6 address configured on a discovered device</td></tr><tr><td class="confluenceTd"><strong>age</strong><span> </span>(<em>time</em>)</td><td class="confluenceTd">Time interval since last discovery packet</td></tr><tr><td class="confluenceTd"><strong>discovered-by</strong> (<em>cdp|lldp|mndp</em>)</td><td class="confluenceTd">Shows the list of protocols the neighbor has been discovered by. The property is available since RouterOS version 7.7.</td></tr><tr><td class="confluenceTd"><strong>board</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">RouterBoard model. Displayed only to devices with installed RouterOS</td></tr><tr><td class="confluenceTd"><strong>identity</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">Configured system identity</td></tr><tr><td class="confluenceTd"><strong>interface</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">Interface name to which discovered device is connected</td></tr><tr><td class="confluenceTd"><strong>interface-name</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">Interface name on the neighbor device connected to the L2 broadcast domain. Applies to CDP.</td></tr><tr><td class="confluenceTd"><strong>ipv6</strong><span> </span>(<em>yes | no</em>)</td><td class="confluenceTd">Shows whether the device has IPv6 enabled.</td></tr><tr><td class="confluenceTd"><strong>mac-address</strong><span> </span>(<em>MAC</em>)</td><td class="confluenceTd">Mac address of the remote device. Can be used to connect with mac-telnet.</td></tr><tr><td class="confluenceTd"><strong>platform</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">Name of the platform. For example &quot;MikroTik&quot;, &quot;cisco&quot;, etc.</td></tr><tr><td class="confluenceTd"><strong>software-id</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">RouterOS software ID on a remote device. Applies only to devices installed with RouterOS.</td></tr><tr><td class="confluenceTd"><strong>system-caps</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">System capabilities reported by the Link-Layer Discovery Protocol (LLDP).</td></tr><tr><td class="confluenceTd"><strong>system-caps-enabled</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">Enabled system capabilities reported by the Link-Layer Discovery Protocol (LLDP).</td></tr><tr><td class="confluenceTd"><strong>unpack</strong><span> </span>(<em>none|simple|uncompressed-headers|uncompressed-all</em>)</td><td class="confluenceTd">Shows the discovery packet compression type.</td></tr><tr><td class="confluenceTd"><strong>uptime</strong><span> </span>(<em>time</em>)</td><td class="confluenceTd">Uptime of remote device. Shown only to devices installed with RouterOS.</td></tr><tr><td class="confluenceTd"><strong>version</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">Version number of installed software on a remote device</td></tr></tbody></table></div><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Starting from RouterOS v6.45, the number of neighbor entries are limited to (total RAM in megabytes)*16 per interface to avoid memory exhaustion.</p></div></div><h1 id="Neighbordiscovery-Discoveryconfiguration">Discovery configuration</h1><p>It is possible to change whether an interface participates in neighbor discovery or not using an Interface list. If the interface is included in the discovery interface list, it will send out basic information about the system and process received discovery packets broadcasted in the Layer2 network. Removing an interface from the interface list will disable both the discovery of neighbors on this interface and also the possibility of discovering this device itself on that interface.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip neighbor discovery-settings</pre>
</div></div><p><br/></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><span><strong>discover-interface-list</strong> </span>(<em>string</em>; Default:<span> <strong>static</strong></span>)</td><td class="confluenceTd">Interface list on which members the discovery protocol will run on.</td></tr><tr><td class="confluenceTd"><strong>discover-interval</strong> (<em>time: 5s..9h6m8s</em>; Default:<span> <strong>30s</strong></span>)</td><td class="confluenceTd">Adjusts the frequency at which neighbor discovery packets are transmitted. It also adjusts the Time-to-Live (TTL) TLV value for CDP and LLDP packets using the formula: (<span style="color:var(--ds-background-accent-green-bolder,#1f845A);"><code>discover-interval</code></span> * 4) + 1. The setting is available since RouterOS version 7.16.</td></tr><tr><td class="confluenceTd"><strong><span>lldp-dcbx </span></strong>(<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd"><p>Whether to send Data Center Bridging Capabilities Exchange Protocol (DCBX) TLVs, which allows to communicate switch <a href="https://help.mikrotik.com/docs/pages/viewpage.action?pageId=189497483" rel="nofollow">QoS settings</a> and capabilities with other neighboring devices using LLDP. Only applies to CRS3xx, CRS5xx, CCR2116 and CCR2216 devices.</p><p>Enabled DCBX includes the following TLVs:</p><ol><li><strong>ETS (Enhanced Transmission Selection) Configuration TLV</strong>. This TLV is used to share the switch's ETS configuration. It includes:<ol><li><span style="letter-spacing: 0.0px;">The willingness bit, which indicates whether the device is willing to accept QoS configuration from neighboring devices. In RouterOS, the willing bit is set to disabled, meaning the switch will not accept remote configurations and instead uses its own settings.</span></li><li><span style="letter-spacing: 0.0px;">The priority assignment table, which maps priorities to specific traffic-class.</span></li><li><span style="letter-spacing: 0.0px;">The bandwidth allocation table, where RouterOS calculates the percentage of bandwidth allocated to each queue based on the <code><span style="color:var(--ds-background-accent-green-bolder,#1f845A);">weight</span></code> property. This applies to queues using the <code><span style="color:var(--ds-background-accent-green-bolder,#1f845A);">high-priority-group</span></code> in the <code>/interface/ethernet/switch/qos/tx-manager/queue</code> settings.</span></li><li><span style="letter-spacing: 0.0px;">The Transmission Selection Algorithm (TSA) table, where <code><span style="color:var(--ds-background-accent-green-bolder,#1f845A);">high-priority-group</span></code> queues are assigned to ETS, <code><span style="color:var(--ds-background-accent-green-bolder,#1f845A);">strict-priority</span></code> queues to Strict Priority, and <code><span style="color:var(--ds-background-accent-green-bolder,#1f845A);">low-priority-group</span></code> or non-hardware offloaded queues to the Vendor Specific Algorithm.</span></li></ol></li><li><strong>ETS Recommendation TLV</strong>. This provides a recommendation on how neighboring devices should configure ETS. RouterOS uses the same data as in the ETS Configuration TLV to give its recommendation.</li><li><strong>Priority-based Flow Control Configuration TLV</strong>. This TLV is used to share PFC configuration. Similar to the ETS TLV, the willingness bit is set to disabled, meaning the switch does not accept remote PFC configurations. PFC is enabled for specific priorities based on settings configured under <code>/interface/ethernet/switch/qos/priority-flow-control</code>, and <code>/interface/ethernet/switch/qos/port</code>.</li><li><strong>Application Priority TLV</strong>. This TLV is used to communicate how different applications are prioritized in the network.</li><li><strong>Application VLAN TLV</strong>. This TLV is used to share VLAN configurations for applications. RouterOS currently does not support sending values in this TLV and will send an empty VLAN table instead.</li></ol></td></tr><tr><td class="confluenceTd"><span><strong>lldp-mac-phy-config </strong>(<em>yes | no</em>; Default: <strong>no</strong>)</span></td><td class="confluenceTd"><p>Whether to send MAC/PHY Configuration/Status TLV in LLDP, which indicates the interface capabilities, current setting of the duplex status, bit rate, and auto-negotiation. Only applies to the Ethernet interfaces. While TLV is optional in LLDP, it is mandatory when sending LLDP-MED, meaning this TLV will be included when necessary even though the property is configured as disabled.</p></td></tr><tr><td class="confluenceTd"><span><strong>lldp-max-frame-size </strong>(<em>yes | no</em>; Default: <strong>no</strong>)</span></td><td class="confluenceTd"><p>Whether to send Maximum Frame Size TLV in LLDP, which indicates the maximum frame size capability of the interface in bytes (<code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">l2mtu</span></code> + 18). Only applies to the Ethernet interfaces.</p></td></tr><tr><td class="confluenceTd"><span><strong>lldp-poe-power </strong>(<em>yes | no</em>; Default: <strong>yes</strong>)</span></td><td class="confluenceTd"><p>Two specific TLVs facilitate Power over Ethernet (PoE) management between Power Sourcing Equipment (PSE) and Powered Devices (PD):</p><ul><li>IEEE 802.3 Organizationally Specific <strong>Power Via MDI</strong> TLV</li><li>TIA-1057 (LLDP-MED) Organizationally Specific <strong>Extended Power via MDI</strong> TLV</li></ul><p>The <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">lldp-poe-power</span></code> attribute determines whether to transmit the IEEE 802.3 Organizationally Specific Power Via MDI TLV in LLDP messages.</p><p>The transmission of LLDP-MED Organizationally Specific Extended Power via MDI TLV is not configurable. It is automatically included in outgoing LLDP-MED packets when the remote device has transmitted LLDP-MED capability of receiving power.</p><p>These TLVs are relevant only for Ethernet interfaces that support <span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><a href="https://help.mikrotik.com/docs/display/ROS/PoE-Out" rel="nofollow">PoE-Out</a>.</span> The setting is available since RouterOS version 7.15, and it replaces PoE-out por<span style="color:var(--ds-text-accent-lime-bolder,#37471f);">t </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>poe-lldp-enabled</code></span> setting.</p></td></tr><tr><td class="confluenceTd"><strong>lldp-med-net-policy-vlan</strong> (<em>integer 0..4094</em>; Default:<span> <strong>disabled</strong></span>)</td><td class="confluenceTd"><p>Advertised VLAN ID for LLDP-MED Network Policy TLV. This allows assigning a VLAN ID for LLDP-MED capable devices, such as VoIP phones. The TLV will only be added to interfaces where LLDP-MED capable devices are discovered. Other TLV values are predefined and cannot be changed:</p><ul><li>Application Type - Voice</li><li>VLAN Type - Tagged</li><li>L2 Priority - 0</li><li>DSCP Priority - 0</li></ul><p>When used together with the bridge interface, the (R/M)STP protocol should be enabled with <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>protocol-mode</code></span> setting. </p><p>Additionally, other neighbor discovery protocols (e.g. CDP) should be excluded using <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>protocol</code></span> setting to avoid LLDP-MED misconfiguration.</p></td></tr><tr><td class="confluenceTd"><strong>lldp-vlan-info</strong> (<em>yes | no;</em> Default:<span> <strong>no</strong></span>)</td><td class="confluenceTd"><p>Whether to send IEEE 802.1 Organizationally Specific TLVs in LLDP related to VLANs.</p><p>When this setting is enabled, three TLVs are advertised:</p><ul><li><span style="letter-spacing: 0.0px;">Port VLAN ID. This applies to the bridge port's <span style="color:var(--ds-background-accent-green-bolder,#1f845A);"><code>pvid</code></span> property.</span></li><li><span style="letter-spacing: 0.0px;">Port And Protocol VLAN ID. This TLV is not used and always indicates &quot;not supported&quot; and &quot;not enabled&quot;.</span></li><li><span style="letter-spacing: 0.0px;">VLAN Name. This includes up to 10 active VLANs from the &quot;<code>/interface/bridge/vlan</code>&quot; table.</span></li></ul><p>These TLVs are relevant to interfaces that are added to a <a href="https://help.mikrotik.com/docs/display/ROS/Bridging+and+Switching#BridgingandSwitching-BridgeVLANFiltering" rel="nofollow">vlan-filtering</a> bridge, and the setting is available since RouterOS version 7.16.</p></td></tr><tr><td class="confluenceTd"><strong>mode </strong>(<em>rx-only | tx-only | tx-and-rx</em>; Default:<span> <strong>tx-and-rx</strong></span>)</td><td class="confluenceTd"><p>Selects the neighbor discovery packet sending and receiving mode. The setting is available since RouterOS version 7.7.</p></td></tr><tr><td class="confluenceTd"><strong>protocol</strong> (<em>cdp | lldp | mndp</em>; Default:<span> <strong>cdp,lldp,mndp</strong></span>)</td><td class="confluenceTd">List of used discovery protocols.</td></tr></tbody></table></div><p>Since RouterOS v6.44, neighbor discovery is working on individual slave interfaces. Whenever a master interface (e.g. bonding or bridge) is included in the discovery interface list, all its slave interfaces will automatically participate in neighbor discovery. It is possible to allow neighbor discovery only to some slave interfaces. To do that, include the particular slave interface in the list and make sure that the master interface is not included.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bonding
add name=bond1 slaves=ether5,ether6
/interface list
add name=only-ether5
/interface list member
add interface=ether5 list=only-ether5
/ip neighbor discovery-settings
set discover-interface-list=only-ether5</pre>
</div></div><p>Now the neighbor list shows a master interface and actual slave interface on which a discovery message was received.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@R2] &gt; ip neighbor print
 # INTERFACE ADDRESS                                           MAC-ADDRESS       IDENTITY   VERSION    BOARD         
 0 ether5    192.168.88.1                                      CC:2D:E0:11:22:33 R1         6.45.4 ... CCR1036-8G-2S+
   bond1    </pre>
</div></div><h1 id="Neighbordiscovery-LLDP">LLDP</h1><p>Depending on RouterOS configuration, different type-length-value (TLV) can be sent in the LLDP message, this includes:</p><ul><li>Chassis ID (MAC address)</li><li>Port ID (interface name)</li><li>Time To Live</li><li>System Name (system identity)</li><li>System Description (platform - MikroTik, software version - RouterOS version,  hardware name - RouterBoard name)</li><li>Management Address (all IP addresses configured on the port)</li><li>System Capabilities (enabled system capabilities, e.g. bridge or router)</li><li>Port Description (combined interface name like &quot;bridge/ether1&quot; if the sending interface is part of bridge or bond, or interface name same as Port ID)</li><li>IEEE 802.1 <span>Port VLAN ID</span></li><li>IEEE 802.1 <span>Port And Protocol VLAN ID</span></li><li>IEEE 802.1 <span>VLAN Name</span></li><li>IEEE 802.3 MAC/PHY Configuration/Status</li><li>IEEE 802.3 Power Via MDI</li><li>IEEE 802.3 Maximum Frame Size</li><li>LLDP-MED Media Capabilities (list of MED capabilities)</li><li>LLDP-MED Network Policy (assigned VLAN ID for voice traffic)</li><li>LLDP-MED Extended Power via MDI</li><li>Port Extension (Port Extender and Controller Bridge advertisement)</li><li>End of LLDPDU</li></ul><p><br/></p><p><br/></p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
