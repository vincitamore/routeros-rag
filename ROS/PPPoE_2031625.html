<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : PPPoE</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Virtual-Private-Networks_119144597.html">Virtual Private Networks</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : PPPoE
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Artūrs C.</span>, last updated by <span class='editor'> Edgars P.</span> on Apr 08, 2025
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742034188 {padding: 0px;}
div.rbtoc1747742034188 ul {margin-left: 0px;}
div.rbtoc1747742034188 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742034188'>
<ul class='toc-indentation'>
<li><a href='#PPPoE-Overview'>Overview</a></li>
<li><a href='#PPPoE-Introduction'>Introduction</a></li>
<li><a href='#PPPoE-PPPoEOperation'>PPPoE Operation</a>
<ul class='toc-indentation'>
<li><a href='#PPPoE-Discoveryphase'>Discovery phase</a></li>
<li><a href='#PPPoE-Sessionphase'>Session phase</a></li>
</ul>
</li>
<li><a href='#PPPoE-MTU'>MTU</a></li>
<li><a href='#PPPoE-PPPoEClient'>PPPoE Client</a>
<ul class='toc-indentation'>
<li><a href='#PPPoE-Properties'>Properties</a></li>
<li><a href='#PPPoE-Status'>Status</a></li>
<li><a href='#PPPoE-Scanner'>Scanner</a></li>
</ul>
</li>
<li><a href='#PPPoE-PPPoEServer'>PPPoE Server</a>
<ul class='toc-indentation'>
<li><a href='#PPPoE-Accessconcentrator'>Access concentrator</a>
<ul class='toc-indentation'>
<li><a href='#PPPoE-Properties.1'>Properties</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#PPPoE-QuickExample'>Quick Example</a>
<ul class='toc-indentation'>
<li><a href='#PPPoE-PPPoEClient.1'>PPPoE Client</a></li>
<li><a href='#PPPoE-PPPoEServer.1'>PPPoE Server</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="PPPoE-Overview">Overview</h1><p><br/>Point to Point over Ethernet (PPPoE) is simply a method of encapsulating PPP packets into Ethernet frames. PPPoE is an extension of the standard Point to Point Protocol (PPP) and it the successor of PPPoA. PPPoE standard is defined in <a class="external-link" href="https://tools.ietf.org/html/rfc2516" rel="nofollow">RFC 2516</a>. The PPPoE client and server work over any Layer2 Ethernet level interface on the router, for example, Wireless, Ethernet, EoIP, etc. Generally speaking, PPPoE is used to hand out IP addresses to clients based on authentication by username (and also if required, by workstation) as opposed to workstation only authentication where static IP addresses or DHCP are used. It is advised not to use static IP addresses or DHCP on the same interfaces as PPPoE for obvious security reasons.</p><h1 id="PPPoE-Introduction">Introduction</h1><p>PPPoE provides the ability to connect a network of hosts over a simple bridging access device to a remote Access Concentrator.  </p><p>Supported connections:</p><ul><li>MikroTik RouterOS PPPoE client to any PPPoE server;</li><li>MikroTik RouterOS server (access concentrator) to multiple PPPoE clients (clients are available for almost all operating systems and most routers);</li></ul><h1 id="PPPoE-PPPoEOperation">PPPoE Operation</h1><p class="newpage">PPPoE has two distinct stages(phases):</p><ol><li class="newpage">Discovery phase;</li><li class="newpage">Session phase;</li></ol><h2 id="PPPoE-Discoveryphase">Discovery phase</h2><p class="newpage">There are four steps to the Discovery stage. When it completes, both peers know the PPPoE <em>SESSION_ID</em> and the peer's Ethernet address, which together define the PPPoE session uniquely:</p><ol><li class="auto-cursor-target"> <strong>PPPoE Active Discovery Initialization (PADI) - </strong>The PPPoE client sends out a <em>PADI</em> packet to the broadcast address. This packet can also populate the &quot;service-name&quot; field if a service name has been entered in the dial-up networking properties of the PPPoE client. If a service name has not been entered, this field is not populated</li><li class="auto-cursor-target"><strong>PPPoE Active Discovery Offer (PADO) - </strong>The PPPoE server, or Access Concentrator, should respond to the <em>PADI</em> with a <em>PADO</em> if the Access Concentrator is able to service the &quot;service-name&quot; field that had been listed in the <em>PADI</em> packet. If no &quot;service-name&quot; field had been listed, the Access Concentrator will respond with a <em>PADO</em> packet that has the &quot;service-name&quot; field populated with the service names that the Access Concentrator can service. The <em>PADO</em> packet is sent to the unicast address of the PPPoE client</li><li class="auto-cursor-target"><strong>PPPoE Active Discovery Request (PADR) - </strong>When a <em>PADO</em> packet is received, the PPPoE client responds with a <em>PADR</em> packet. This packet is sent to the unicast address of the Access Concentrator. The client may receive multiple <em>PADO</em> packets, but the client responds to the first valid <em>PADO</em> that the client received. If the initial <em>PADI</em> packet had a blank &quot;service-name&quot; field filed, the client populates the &quot;service-name&quot; field of the <em>PADR</em> packet with the first service name that had been returned in the <em>PADO</em> packet.</li><li class="auto-cursor-target"><p class="auto-cursor-target"><strong>PPPoE Active Discovery Session Confirmation (PADS) - </strong>When the <em>PADR</em> is received, the Access Concentrator generates a unique session identification (ID) for the Point-to-Point Protocol (PPP) session and returns this ID to the PPPoE client in the <em>PADS</em> packet. This packet is sent to the unicast address of the client.</p></li></ol><p>PPPoE session termination:</p><ul><li><strong>PPPoE Active Discovery Terminate (PADT) - </strong>Can be sent anytime after a session is established to indicate that a PPPoE session terminated. It can be sent by either server or client.</li></ul><h2 id="PPPoE-Sessionphase">Session phase</h2><p>When the discovery stage is completed, both peers know <em>PPPoE Session ID</em> and other peer's <em>Ethernet (MAC) address</em> which together defines the PPPoE session. PPP frames are encapsulated in PPPoE session frames, which have Ethernet frame type <strong>0x8864</strong>. <br/>When a server sends confirmation and a client receives it, PPP Session is started that consists of the following stages:</p><ol><li><strong>LCP negotiation </strong>stage</li><li><strong>Authentication (CHAP/PAP)</strong> stage</li><li><strong>IPCP negotiation</strong> stage - where the client is assigned an IP address.</li></ol><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>If any process fails, the LCP negotiation establishment phase is started again.</p></div></div><p><br/>PPPoE server sends <em>Echo-Request</em> packets to the client to determine the state of the session, otherwise, the server will not be able to determine that session is terminated in cases when a client terminates session without sending <em>Terminate-Request</em> packet.</p><h1 id="PPPoE-MTU"><span style="letter-spacing: -0.01em;">MTU</span></h1><p>Typically, the largest Ethernet frame that can be transmitted without fragmentation is 1500 bytes. PPPoE adds another 6 bytes of overhead and the PPP field adds two more bytes, leaving 1492 bytes for IP datagram. Therefore max PPPoE MRU and MTU values must not be larger than 1492.</p><p>TCP stacks try to avoid fragmentation, so they use an MSS (Maximum Segment Size). By default, MSS is chosen as MTU of the outgoing interface minus the usual size of the TCP and IP headers (40 bytes), which results in 1460 bytes for an Ethernet interface. Unfortunately, there may be intermediate links with lower MTU which will cause fragmentation. In such a case TCP stack performs path MTU discovery. Routers that cannot forward the datagram without fragmentation are supposed to drop the packet and send <em>ICMP-Fragmentation-Required</em> to originating host. When a host receives such an ICMP packet, it tries to lower the MTU. This should work in the ideal world, however in the real world many routers do not generate fragmentation-required datagrams, also many firewalls drop all ICMP datagrams.</p><p>The workaround for this problem is to <a href="https://help.mikrotik.com/docs/display/ROS/Mangle#Mangle-ChangeMSS" rel="nofollow">adjust MSS</a> if it is too big. </p><h1 id="PPPoE-PPPoEClient">PPPoE Client</h1><h2 id="PPPoE-Properties"><span class="mw-headline">Properties</span></h2><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>ac-name</strong> (<em>string</em>; Default: <strong>&quot;&quot;</strong>)</td><td class="confluenceTd">Access Concentrator name, this may be left blank and the client will connect to any access concentrator on the broadcast domain</td></tr><tr><td class="confluenceTd"><strong>add-default-route</strong> (<em>yes|no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Enable/Disable whether to add default route automatically</td></tr><tr><td class="confluenceTd"><strong>allow</strong> (<em>mschap2|mschap1|chap|pap</em>; Default: <strong>mschap2,mschap1,chap,pap</strong>)</td><td class="confluenceTd">allowed authentication methods, by default all methods are allowed</td></tr><tr><td class="confluenceTd"><strong>default-route-distance</strong> (<em>byte [0..255]</em>; Default:<strong>1</strong>)</td><td class="confluenceTd">sets distance value applied to auto created default route, if add-default-route is also selected</td></tr><tr><td class="confluenceTd"><strong>dial-on-demand</strong> (<em>yes|no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">connects to AC only when outbound traffic is generated. If selected, then route with gateway address from 10.112.112.0/24 network will be added while connection is not established.</td></tr><tr><td class="confluenceTd"><strong>interface</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">interface name on which client will run</td></tr><tr><td class="confluenceTd"><strong>keepalive-timeout</strong> (<em>integer</em>; Default:<strong>60</strong>)</td><td class="confluenceTd">Sets keepalive timeout in seconds.</td></tr><tr><td class="confluenceTd"><strong>max-mru</strong> (<em>integer</em>; Default: <strong>1460</strong>)</td><td class="confluenceTd">Maximum Receive Unit</td></tr><tr><td class="confluenceTd"><strong>max-mtu</strong> (<em>integer</em>; Default: <strong>1460</strong>)</td><td class="confluenceTd">Maximum Transmission Unit</td></tr><tr><td class="confluenceTd"><strong>mrru</strong> (<em>integer: 512..65535|disabled</em>; Default: <strong>disabled</strong>)</td><td class="confluenceTd">maximum packet size that can be received on the link. If a packet is bigger than tunnel MTU, it will be split into multiple packets, allowing full size IP or Ethernet packets to be sent over the tunnel.</td></tr><tr><td class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: <strong>pppoe-out[i]</strong>)</td><td class="confluenceTd">name of the PPPoE interface, generated by RouterOS if not specified</td></tr><tr><td class="confluenceTd"><strong>password</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">password used to authenticate</td></tr><tr><td class="confluenceTd"><strong>profile</strong> (<em>string</em>; Default: <strong>default</strong>)</td><td class="confluenceTd">Specifies which PPP profile configuration will be used when establishing the tunnel.</td></tr><tr><td class="confluenceTd"><strong>service-name</strong> (<em>string</em>; Default: <strong>&quot;&quot;</strong>)</td><td class="confluenceTd">specifies the service name set on the access concentrator, can be left blank to connect to any PPPoE server</td></tr><tr><td class="confluenceTd"><strong>use-peer-dns</strong> (<em>yes|no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">enable/disable getting DNS settings from the peer</td></tr><tr><td class="confluenceTd"><strong>user</strong> (<em>string</em>; Default: <strong>&quot;&quot;</strong>)</td><td class="confluenceTd"><p>username used for authentication</p></td></tr></tbody></table></div><h2 id="PPPoE-Status"><span class="mw-headline">Status</span></h2><p>Command <code>/interface pppoe-client monitor</code> will display current PPPoE status.</p><p>Available read only properties:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>ac-mac</strong> (<em>MAC address</em>)</td><td class="confluenceTd">MAC address of the access concentrator (AC) the client is connected to</td></tr><tr><td class="confluenceTd"><strong>ac-name</strong> (<em>string</em>)</td><td class="confluenceTd">name of the Access Concentrator</td></tr><tr><td class="confluenceTd"><strong>active-links</strong> (<em>integer</em>)</td><td class="confluenceTd">Number of bonded MLPPP connections, ('1' if not using MLPPP)</td></tr><tr><td class="confluenceTd"><strong>encoding</strong> (<em>string</em>)</td><td class="confluenceTd">encryption and encoding (if asymmetric, separated with '/') being used in this connection</td></tr><tr><td class="confluenceTd"><strong>local-address</strong> (<em>IP Address</em>)</td><td class="confluenceTd">IP Address allocated to client</td></tr><tr><td class="confluenceTd"><strong>remote-address</strong> (<em>IP Address</em>)</td><td class="confluenceTd">Remote IP Address allocated to server (ie gateway address)</td></tr><tr><td class="confluenceTd"><strong>mru</strong> (<em>integer</em>)</td><td class="confluenceTd">effective MRU of the link</td></tr><tr><td class="confluenceTd"><strong>mtu</strong> (<em>integer</em>)</td><td class="confluenceTd">effective MTU of the link</td></tr><tr><td class="confluenceTd"><strong>service-name</strong> (<em>string</em>)</td><td class="confluenceTd">used service name</td></tr><tr><td class="confluenceTd"><strong>status</strong> (<em>string</em>)</td><td class="confluenceTd">current link status. Available values are:<ul class="bullets"><li>dialing,</li><li>verifying password...,</li><li>connected,</li><li>disconnected.</li></ul></td></tr><tr><td class="confluenceTd"><strong>uptime</strong> (<em>time</em>)</td><td class="confluenceTd">connection time displayed in days, hours, minutes and seconds</td></tr></tbody></table></div><h2 id="PPPoE-Scanner">Scanner</h2><p>PPPoE Scanner allows scanning all active PPPoE servers in the layer2 broadcast domain. Command to run scanner is as follows:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface pppoe-client scan [interface]</pre>
</div></div><p class="auto-cursor-target">Available read only properties: </p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>service</strong> (<em>string</em>)</td><td class="confluenceTd">Service name configured on server</td></tr><tr><td class="confluenceTd"><strong>mac-address</strong> (<em>MAC</em>)</td><td class="confluenceTd">Mac address of detected server</td></tr><tr><td class="confluenceTd"><strong>ac-name</strong> (<em>string</em>)</td><td class="confluenceTd">name of the Access Concentrator</td></tr></tbody></table></div><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>For Windows, some connection instructions may use the form where the &quot;phone number&quot;, such as &quot;MikroTik_AC\mt1&quot;, is specified to indicate that &quot;MikroTik_AC&quot; is the access concentrator name and &quot;mt1&quot; is the service name.</p></div></div><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Specifying MRRU means enabling MP (Multilink PPP) over a single link. This protocol is used to split big packets into smaller ones. Under Windows, it can be enabled in the Networking tab, Settings button, &quot;Negotiate multi-link for single link connections&quot;. MRRU is hardcoded to 1614 on Windows. This setting is useful to overcome PathMTU discovery failures. The MP setting should be enabled on both peers.</p></div></div><h1 id="PPPoE-PPPoEServer"><span>PPPoE Server</span></h1><p><span>There are two types of interface (tunnel) items in PPPoE server configuration - static users and dynamic connections. An interface is created for each tunnel established to the given server. Static interfaces are added administratively if there is a need to reference the particular interface name (in firewall rules or elsewhere) created for the particular user. Dynamic interfaces are added to this list automatically whenever a user is connected and its username does not match any existing static entry (or in case the entry is active already, as there can not be two separate tunnel interfaces referenced by the same name - set </span><em>one-session-per-host</em><span> value if this is a problem). Dynamic interfaces appear when a user connects and disappear once the user disconnects, so it is impossible to reference the tunnel created for that use in router configuration (for example, in firewall), so if you need a persistent rule for that user, create a static entry for him/her. Otherwise, it is safe to use a dynamic configuration. </span></p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><span>In both cases PPP users must be configured properly - static entries do not replace PPP configuration.</span></p></div></div><h2 id="PPPoE-Accessconcentrator"><span style="font-size: 24.0px;letter-spacing: -0.01em;">Access concentrator </span></h2><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface pppoe-server server</pre>
</div></div><h3 id="PPPoE-Properties.1"><span class="mw-headline">Properties</span></h3><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>accept-untagged</strong> (<em>yes | no</em>; Default: <strong>yes</strong>)</td><td class="confluenceTd">This setting controls whether the PPPoE server will accept untagged (non-VLAN) PPPoE packets on its interface. By default, untagged PPPoE packets are accepted. If you are using the <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">pppoe-over-vlan-range</span></code> property (which enabled PPPoE over 802.1Q VLANs), this option lets you decide whether to still allow untagged clients on the same interface. If you are not using the <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">pppoe-over-vlan-range</span></code>, this setting do not have any effect.</td></tr><tr><td class="confluenceTd"><strong>authentication</strong> (<em> mschap2 | mschap1 | chap | pap</em>; Default: <strong>&quot;mschap2, mschap1, chap, pap&quot;</strong>)</td><td class="confluenceTd">Authentication algorithm.</td></tr><tr><td class="confluenceTd"><strong>default-profile</strong> (<em>string</em>; Default: <strong>&quot;default&quot;</strong>)</td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><strong>interface</strong> (<em>string</em>; Default: <strong>&quot;&quot;</strong>)</td><td class="confluenceTd">Interface that the clients are connected to.</td></tr><tr><td class="confluenceTd"><strong>keepalive-timeout</strong> (<em>time</em>; Default: <strong>&quot;10&quot;</strong>)</td><td class="confluenceTd">Defines the time period (in seconds) after which the router is starting to send keepalive packets every second. If there is no traffic and no keepalive responses arrive for that period of time (i.e. 2 * keepalive-timeout), the non responding client is proclaimed disconnected.</td></tr><tr><td class="confluenceTd"><strong>max-mru</strong> (<em>integer</em>; Default: <strong>&quot;1480&quot;</strong>)</td><td class="confluenceTd">Maximum Receive Unit. The optimal value is the MTU of the interface the tunnel is working over reduced by 20 (so, for 1500-byte Ethernet link, set the MTU to 1480 to avoid fragmentation of packets)</td></tr><tr><td class="confluenceTd"><strong>max-mtu</strong> (<em>integer</em>; Default: <strong>&quot;1480&quot;</strong>)</td><td class="confluenceTd">Maximum Transmission Unit. The optimal value is the MTU of the interface the tunnel is working over reduced by 20 (so, for 1500-byte Ethernet link, set the MTU to 1480 to avoid fragmentation of packets)</td></tr><tr><td class="confluenceTd"><strong>max-sessions</strong> (<em>integer</em>; Default: <strong>&quot;0&quot;</strong>)</td><td class="confluenceTd">Maximum number of clients that the AC can serve. '0' = no limitations.</td></tr><tr><td class="confluenceTd"><strong>mrru</strong> (<em>integer: 512..65535 | disabled</em>; Default: <strong>&quot;disabled&quot;</strong>)</td><td class="confluenceTd">Maximum packet size that can be received on the link. If a packet is bigger than tunnel MTU, it will be split into multiple packets, allowing full size IP or Ethernet packets to be sent over the tunnel.</td></tr><tr><td class="confluenceTd"><strong>one-session-per-host</strong> (<em>yes | no</em>; Default: <strong>&quot;no&quot;</strong>)</td><td class="confluenceTd">Allow only one session per host (determined by MAC address). If a host tries to establish a new session, the old one will be closed.</td></tr><tr><td class="confluenceTd"><strong>pppoe-over-vlan-range</strong> <span style="color:var(--ds-text,#172B4D);">(</span><em style="text-align: left;">integer 1..4094</em><span style="color:var(--ds-text,#172B4D);">; Default:</span><span style="color:var(--ds-text,#172B4D);"> &quot;&quot;</span><span style="color:var(--ds-text,#172B4D);">)</span></td><td class="confluenceTd"><p>This setting allows a PPPoE server to operate over 802.1Q VLANs. By default, a PPPoE server only accepts untagged packets on its interface. However, in scenarios where clients are on separate VLANs, instead of creating multiple 802.1Q VLAN interfaces and bridging them together or configuring individual PPPoE servers for each VLAN, you can specify the necessary VLANs directly in the PPPoE server settings.</p><p>When you specify the VLAN IDs, the PPPoE server will accept 802.1Q tagged packets from clients, and it will reply using the same VLAN. You then have an option to accept or drop untagged PPoE clients on the same interface using the <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">accept-untagged</span></code> property.</p><p>The <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">pppoe-over-vlan-range</span></code> setting can be applied to both CVLAN and SVLAN interfaces, enabling the QinQ setups as well. See the <span style="color:var(--ds-background-accent-green-bolder,#1F845A);"><code>use-service-tag=yes</code></span> option on a <a href="https://help.mikrotik.com/docs/display/ROS/VLAN" rel="nofollow">VLAN interface</a>. But keep in mind that the inner VLAN tag should be 802.1Q.</p><p>The setting supports a range of VLAN IDs, as well as individual VLANs specified using comma-separated values. For example: pppoe-over-vlan-range=100-115,120,122,128-130.</p></td></tr><tr><td class="confluenceTd"><strong>service-name</strong> (<em>string</em>; Default: <strong>&quot;&quot;</strong>)</td><td class="confluenceTd">The PPPoE service name. Server will accept clients which sends PADI message with service-names that matches this setting or if service-name field in PADI message is not set.</td></tr></tbody></table></div><p>The PPPoE server (access concentrator) supports multiple servers for each interface - with differing service names. The access concentrator name and PPPoE service name are used by clients to identify the access concentrator to register with. The access concentrator name is the same as the identity of the router displayed before the command prompt. The identity may be set within the <em>/system identity</em> submenu.</p><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Do not assign an IP address to the interface you will be receiving the PPPoE requests on.</p></div></div><p><br/>Specifying MRRU means enabling MP (Multilink PPP) over a single link. This protocol is used to split big packets into smaller ones.  Their MRRU is hardcoded to 1614. This setting is useful to overcome PathMTU discovery failures. The MP setting should be enabled on both peers.</p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>The default <em>keepalive-timeout</em> value of 10s is OK in most cases. If you set it to 0, the router will not disconnect clients until they explicitly log out or the router is restarted. To resolve this problem, the one-session-per-host property can be used.</p></div></div><h1 id="PPPoE-QuickExample">Quick Example</h1><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/2031625/3211288.jpg" data-image-src="attachments/2031625/3211288.jpg" data-unresolved-comment-count="0" data-linked-resource-id="3211288" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Untitled Diagram.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="2031625" data-linked-resource-container-version="18" tabindex="0" alt=""></span></p><h2 id="PPPoE-PPPoEClient.1">PPPoE Client</h2><p>To configure MikroTik RouterOS to be a PPPoE client, just add a PPPoE-client with the following parameters as in the example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] &gt; interface pppoe-client add interface=ether2 password=StrongPass service-name=pppoeservice name=PPPoE-Out disabled=no user=MT-User
[admin@MikroTik] &gt; interface pppoe-client print
Flags: X - disabled, I - invalid, R - running 
 0  R name=&quot;PPPoE-Out&quot; max-mtu=auto max-mru=auto mrru=disabled interface=ether2 user=&quot;MT-User&quot; 
      password=&quot;StrongPass&quot; profile=default keepalive-timeout=10 service-name=&quot;pppoeservice&quot; ac-name=&quot;&quot; 
      add-default-route=no dial-on-demand=no use-peer-dns=no allow=pap,chap,mschap1,mschap2</pre>
</div></div><h2 id="PPPoE-PPPoEServer.1">PPPoE Server</h2><p><span>To configure MikroTik RouterOS to be an Access Concentrator (PPPoE Server):</span></p><ul><li>add an IP address pool for the clients from 10.0.0.2-10.0.0.5;</li><li>add PPP profile;</li><li>add PPP secret (username/password);</li><li>add the PPPoE server itself;</li></ul><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] &gt; /ip pool
add name=pppoe-pool ranges=10.0.0.2-10.0.0.5
[admin@MikroTik] &gt; /ppp profile
add local-address=10.0.0.1 name=for-pppoe remote-address=pppoe-pool
[admin@MikroTik] &gt; /ppp secret
add name=MT-User password=StrongPass profile=for-pppoe service=pppoe
[admin@MikroTik] &gt; /interface pppoe-server server
add default-profile=for-pppoe disabled=no interface=ether3 service-name=pppoeservice</pre>
</div></div><p><br/></p><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2031625/3211288.jpg">Untitled Diagram.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
