<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : General Properties</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Internet-of-Things_46759975.html">Internet of Things</a></span>
                            </li>
                                                    <li>
                                <span><a href="Lora_16351615.html">Lora</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : General Properties
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Unknown User (rudolfs)</span>, last updated by <span class='editor'> Deniss M.</span> on May 06, 2025
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742039415 {padding: 0px;}
div.rbtoc1747742039415 ul {margin-left: 0px;}
div.rbtoc1747742039415 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742039415'>
<ul class='toc-indentation'>
<li><a href='#GeneralProperties-Properties'>Properties</a></li>
<li><a href='#GeneralProperties-Channels'>Channels</a></li>
<li><a href='#GeneralProperties-JoinEUI'>Join EUI</a></li>
<li><a href='#GeneralProperties-NetworkID'>Network ID</a></li>
<li><a href='#GeneralProperties-Servers'>Servers</a></li>
<li><a href='#GeneralProperties-Traffic'>Traffic</a></li>
<li><a href='#GeneralProperties-Debugging'>Debugging</a></li>
</ul>
</div></p><p>Every RouterBOARD with a miniPCI-e slot which supports LTE modems can also be used as a LoRaWAN gateway by installing <strong>R11e-LoRa8</strong> or <strong>R11e-LoRa9</strong> card. Both UDP and LNS (starting with <strong>v7.12rc1</strong> testing version) protocols are supported.</p><div role="region" aria-label="Info" class="confluence-information-macro  confluence-information-macro-information" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-info-filled confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><span style="color:var(--ds-text,#333333);">In order to work with Lora, IoT package should be installed. You can find the package for your device architecture in extra packages archive on the</span> <a class="external-link" href="https://mikrotik.com/download" rel="nofollow">download</a><span style="color:var(--ds-text,#333333);"> page.</span></div></div><div role="region" aria-label="Info" class="confluence-information-macro  confluence-information-macro-information" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-info-filled confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Starting with v<strong>7.11</strong> (stable), LoRa functionality is moved into the <strong>IoT package</strong> that is available on the <a class="external-link" href="https://mikrotik.com/download" rel="nofollow">download</a><span style="color:var(--ds-text,#333333);"> page under extra packages. A separate Lora package is still available for download.</span></p><p><span style="color:var(--ds-text,#333333);">When using IoT package, LoRa functionality will move to a <code>/iot lora</code> sub-menu. When using LoRa package, LoRa functionality will be possible via <code>/lora</code> sub-menu.</span></p><p><span style="color:var(--ds-text,#333333);">LoRa package is not obligatory anymore and is left only for compatibility reasons.</span></p></div></div><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><em><strong>note</strong>:  </em>RouterOS does not support 3rd party LoRaWAN gateway cards.</div></div><h1 id="GeneralProperties-Properties">Properties</h1><p>This menu is used to apply settings to the LoRa interface.</p><p><strong>Sub-menu:</strong> <code>/iot lora</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Property</th><th style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>antenna-gain</strong> (<em>integer [-128..127]</em>; Default: <strong>0</strong>)</td><td class="confluenceTd"><p>Antenna gain in dBi. This value should be equal to <code>setup-antenna-gain </code>minus <code>cable-loss</code>. Using 6.5 dBi antenna, 6.5 is the value to be configured (not taking into account cable loss). </p><p><span class="productMainDescr"><span class="codespan__pre-wrap">Output power of the gateway is dictated by the server. </span></span>The gateway will calculate its actual output power by subtracting <code>antenna-gain</code> setting from <code>server_value</code> (value received in the downlink message).</p></td></tr><tr><td class="confluenceTd"><strong>channel-plan</strong> (<em>as-923 | au-915 | custom | eu-868 | in-865 | kr-920 | ru-864 | ru-864-mid | us-915-1 | us-915-2</em>; Default: <strong>eu-868</strong>)</td><td class="confluenceTd">Frequency plans for various regions.</td></tr><tr><td class="confluenceTd"><strong>disabled</strong> (<em>yes | no</em>; Default: <strong>yes</strong>)</td><td class="confluenceTd">Whether LoRaWAN gateway is disabled.</td></tr><tr><td class="confluenceTd"><strong>forward</strong> (<em>ccrc-validtaion | dev-addr-validtaion | proprietary-traffic</em>; Default: <strong>crc-validtaion</strong>)</td><td class="confluenceTd">Defines what kind of packets should be forwarded to Network server:<ul><li>crc-validtaion - Forward valid packets with correct CRC.</li><li>dev-addr-validtaion - Checks if DevAddr of the packet corresponds to the NetID and if not, drops the packet. The following sequence happens: 1) Dev. Addr value gets &quot;obtained&quot; from the received LoRa packet; 2) Dev. Addr is &quot;compared&quot; against <a class="external-link" href="https://www.thethingsnetwork.org/docs/lorawan/prefix-assignments/" rel="nofollow">&quot;valid&quot; Net IDs</a> list; 3) If there is no Net ID for the Dev. Addr, the packet is not forwarded; 4) If Net ID is valid, Dev. Addr range is valid, the packet is forwarded.</li><li>proprietary-traffic - Checks the content of the LoRa packet and if the &quot;type&quot; of the frame is &quot;proprietary&quot;, the packet is not forwarded.</li></ul></td></tr><tr><td class="confluenceTd"><strong>gateway-id </strong>(string)</td><td class="confluenceTd">Gateway ID or Gateway EUI, is used when registering the gateway with the server.</td></tr><tr><td class="confluenceTd"><strong>lbt-enabled</strong> (<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Whether gateway should use LBT (Listen Before Talk) protocol.</td></tr><tr><td class="confluenceTd"><strong>listen-time</strong> (<em>integer [0us..4294967295us]</em>; Default: <strong>5000us</strong>)</td><td class="confluenceTd">Time in microseconds to track RSSI before TX (used when <strong>lbt-enabled=yes</strong>).</td></tr><tr><td class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Name of LoRaWAN gateway.</td></tr><tr><td class="confluenceTd"><strong>network</strong> (<em>private | public</em>; Default: <strong>public</strong>)</td><td class="confluenceTd">Whether sync word should (network=private) or should not (network=public) be used.</td></tr><tr><td class="confluenceTd"><strong>rssi-threshold</strong> (<em>integer [-32,768 .. 32,767]</em>; Default: <strong>-65dB</strong>)</td><td class="confluenceTd">RSSI value to determine whether forwarder may use specific channel to talk. If RSSI value is below <strong>rssi-threshold</strong>, channel could be used (used when <strong>lbt-enabled=yes</strong>).</td></tr><tr><td class="confluenceTd"><strong>servers</strong> (<em>list of string</em>; Default: )</td><td class="confluenceTd">Name of the server from the <code>/iot lora servers</code> section.</td></tr><tr><td class="confluenceTd"><strong>src-address</strong> (<em>IP</em>; Default: )</td><td class="confluenceTd">Specifies uplink packet source address if necessary (address should match an address configured on the RB).</td></tr><tr><td class="confluenceTd"><strong>spoof-gps </strong>(<em>string</em>; Default: )</td><td class="confluenceTd"><p>Set custom GPS location:</p><ul><li>Latitude [-90..90]</li><li>Longitude [-180..180]</li><li>Altitude(<strong>m</strong>) [-2147483648..2147483647]</li></ul></td></tr></tbody></table></div><p><br/></p><div role="region" aria-label="Info" class="confluence-information-macro  confluence-information-macro-information" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-info-filled confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Once the server is selected and LoRa interface is enabled using <code>/iot lora enable [find]</code> command, the device will start operating as a LoRaWAN gateway. It will start forwarding LoRa payloads from the <a href="https://help.mikrotik.com/docs/spaces/ROS/pages/16351619/General+Properties#GeneralProperties-Traffic" rel="nofollow"><code>/iot lora traffic</code></a> tab to the configured server.</p></div></div><h1 id="GeneralProperties-Channels">Channels</h1><p>This section is used to alter channel/frequency related settings.</p><p><strong>Sub-menu:</strong> <code>/iot lora channels</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Property</th><th style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>bandwidth</strong> (<em>7.8_kHz | 15.6_kHz | 31.2_kHz | 62.5_kHz | 125_kHz | 250_kHz | 500_kHz</em>; Default: <strong>125_kHz</strong>)</td><td class="confluenceTd">Bandwidth of specific channel, predefined when any of channel-plan preset is used, but could be manually changed when channel-plan is set to custom.</td></tr><tr><td class="confluenceTd"><strong>disabled</strong> (<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Disable or enable the channel.</td></tr><tr><td class="confluenceTd"><strong>freq-off</strong> (<span style="color:var(--ds-text,#333333);"><em>integer</em> [-400000..400000]; Default:</span>  )</td><td class="confluenceTd">Channel frequency offset against radio central frequency, it makes possible to adjust channel frequencies so that channels does not overlap.</td></tr><tr><td class="confluenceTd"><strong>radio</strong> (<em>radio0 | radio1</em>; Default: )</td><td class="confluenceTd">Defines which radio uses selected channel.</td></tr><tr><td class="confluenceTd"><strong>spread-factor</strong> (<em>SF7 | SF8 | SF9 | SF10 | SF11 | SF12</em>; Default: )</td><td class="confluenceTd">Defines the Spread Factor for a channel with type=LoRa. Lower Spread Factor means higher data rate.</td></tr></tbody></table></div><p>To view current channels, issue the command <code>/iot lora cannels print</code>:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/iot lora channels print
Columns: NAME, TYPE, RADIO, FREQ-OFF, BANDWIDTH, FREQ, SPREAD-FACTOR, DATARATE
# NAME       TYPE  RADIO   FREQ-OFF  BANDWIDTH  FREQ   SPREAD-FACTOR  DATARATE
0 gateway-0  MSF   radio1  -400000   125_kHz    868.1                         
1 gateway-0  MSF   radio1  -200000   125_kHz    868.3                         
2 gateway-0  MSF   radio1  0         125_kHz    868.5                         
3 gateway-0  MSF   radio0  -400000   125_kHz    867.1                         
4 gateway-0  MSF   radio0  -200000   125_kHz    867.3                         
5 gateway-0  MSF   radio0  0         125_kHz    867.5                         
6 gateway-0  MSF   radio0  200000    125_kHz    867.7                         
7 gateway-0  MSF   radio0  400000    125_kHz    867.9                         
8 gateway-0  LoRa  radio1  -200000   250_kHz    868.3  SF7                    
9 gateway-0  FSK   radio1  300000    125_kHz    868.8                    50000</pre>
</div></div><p>Channels are created using <code>freq-off</code> and radio's <code>center-freq</code> frequencies. To view <strong>radios</strong> center frequencies use the command <code>/iot lora radios print</code>.</p><p>To understand how each channel's frequency is calculated, check the example below:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false"># NAME       TYPE  RADIO   FREQ-OFF  BANDWIDTH  FREQ   SPREAD-FACTOR  DATARATE
0 gateway-0  MSF   radio1  -400000   125_kHz    868.1                         </pre>
</div></div><p><code>radio1</code> is selected to be used for channel #0 and it is configured with <code>center-freq=868500000</code> (868500000 Hz or 868.5 MHz).</p><p>By using frequency offset, <code>freq-off=-400000</code> (-400000 Hz or -0.4 MHz), we define channel #0 to be <code>868500000-400000=868100000</code> Hz or 868.1 MHz.</p><div role="region" aria-label="Info" class="confluence-information-macro  confluence-information-macro-information" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-info-filled confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>To configure custom channels, select &quot;custom&quot; channel profle with the help of the command:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/iot lora set [find] channel-plan=custom</pre>
</div></div></div></div><h1 id="GeneralProperties-JoinEUI">Join EUI</h1><p>The gateway will forward to the server every single LoRaWAN payload it receives. That includes neighboring LoRaWAN node's payloads as well. It might not be ideal to forward everything, as, for example, it can increase the data amount used (and directly impact ISP plan cost).</p><p>The Join EUI menu allows you to specify a range of Join EUI's that the gateway will forward. After adding the range, make sure to apply it to the <a href="https://help.mikrotik.com/docs/display/ROS/General+Properties#GeneralProperties-Servers" rel="nofollow">server</a> settings.</p><p>If the Join EUI of the packet does not match the configuration, the packet is not forwarded to the server.</p><p><br/></p><p>You can find the Join EUI used by your node with the help of RouterOS GUI. Go to the &quot;LoRa&quot; section and to the &quot;Traffic&quot; sub-menu (which is only available using the graphical interface). After you power your LoRaWAN node, the node should send a &quot;Join-request&quot; packet. Double-click on it to inspect it:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/16351619/232816877.png" data-image-src="attachments/16351619/232816877.png" data-unresolved-comment-count="0" data-linked-resource-id="232816877" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image-2024-1-30_14-25-4.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="16351619" data-linked-resource-container-version="80" tabindex="0" alt=""></span></p><p><strong>Sub-menu:</strong> <code>/iot lora joineui</code></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 62.3958%;"><colgroup><col style="width: 25.5245%;"/><col style="width: 74.4848%;"/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Property</th><th style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>joineui</strong> (<em>string</em>; Default: )<strong><br/></strong></td><td class="confluenceTd"><p>Define a range of Join EUI's.</p></td></tr><tr><td class="confluenceTd"><strong>logging </strong>(<em>yes | no</em>; Default: no)</td><td class="confluenceTd"><p>Enables additional logging for the filter feature.</p></td></tr><tr><td class="confluenceTd"><strong>name </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Define the name for the range.</td></tr></tbody></table></div><p>An example of Join EUI would look like this <strong>E0 E1 E2 01 02 03 04 05</strong>. It consists of 8 octets in HEX format.</p><p>To add a range that allows <strong>every possible</strong> Join EUI, add a filter like this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/iot lora joineui add name=ALL joineuis=0000000000000000-ffffffffffffffff</pre>
</div></div><p>To add a range that allows &quot;nothing&quot; (basically &quot;restrict&quot; all Join EUI's), add a filter like this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/iot lora joineui add name=NONE joineuis=0000000000000000-0000000000000000</pre>
</div></div><p><span class="mw-headline">For a specific single Join EUI, add a filter like this:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/iot lora joineui add name=SINGLE joineuis=E0E1E20102030405-E0E1E20102030405</pre>
</div></div><h1 id="GeneralProperties-NetworkID"><span class="mw-headline">Network ID</span></h1><p>The gateway will forward to the server every single LoRaWAN payload it receives. That includes neighboring LoRaWAN node's payloads as well. It might not be ideal to forward everything, as, for example, it can increase the data amount used (and directly impact ISP plan cost).</p><p>The NetID menu allows you to specify a list of NetIDs that the gateway will forward. After adding the list, make sure to apply it to the <a href="https://help.mikrotik.com/docs/display/ROS/General+Properties#GeneralProperties-Servers" rel="nofollow">server</a> settings.</p><p>If the NetID (DevAddr range) of the packet does not match the configuration, the packet is not forwarded to the server.</p><p><br/></p><p><span class="mw-headline">NetIDs define the ranges of Device Addresses (DevAddr) that were assigned to different operators/servers by the LoRaWAN Alliance. A list with most ranges can be found in the <a class="external-link" href="https://www.thethingsnetwork.org/docs/lorawan/prefix-assignments/" rel="nofollow">TTN guide</a>.</span></p><p>DevAddr is assigned to the LoRaWAN node by the LoRaWAN server after the communication with the server takes place. For example, <a class="external-link" href="https://www.thethingsnetwork.org/" rel="nofollow">TTN</a> will assign your node an address from within the range 26000000 - 27FFFFFF. You can find it under the LoRaWAN server dashboard or using RouterOS GUI, under the &quot;Traffic&quot; sub-menu (after &quot;join-request&quot; and &quot;join-accept&quot; communication takes place) in the Dev Addr column/field.</p><p>Let's say TTN assigned <strong>26 1B D8 D1 </strong>Dev Addr to your node. Based on the <a class="external-link" href="https://www.thethingsnetwork.org/docs/lorawan/prefix-assignments/" rel="nofollow">TTN guide</a>, it falls under the 26000000 - 27FFFFFF DevAddr range and it belongs to the <strong>000013 NetID</strong>.</p><p><strong>Sub-menu:</strong> <code>/iot lora netid</code></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 61.423%;"><colgroup><col style="width: 24.398%;"/><col style="width: 75.6561%;"/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Property</th><th style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>netids</strong> (<em>string</em>; Default: )<strong><br/></strong></td><td class="confluenceTd"><p>Define the NetIDs</p></td></tr><tr><td class="confluenceTd"><strong>logging </strong>(<em>yes | no</em>; Default: no)</td><td class="confluenceTd"><p>Enables additional logging for the filter feature.</p></td></tr><tr><td class="confluenceTd"><strong>name </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Define the name for the ID.</td></tr></tbody></table></div><p>To add a filter for a specific NetId, use the command (you can add more than one using a &quot;comma&quot; separator):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/iot lora netids add name=TTN netids=000013</pre>
</div></div><h1 id="GeneralProperties-Servers"><span class="mw-headline">Servers</span></h1><p><span class="mw-headline">This section is used to add new or alter current server settings.</span></p><p><strong>Sub-menu:</strong> <code>/iot lora servers</code></p><p>There are a few predefined servers that can be used (it requires to make an <a class="external-link" href="https://thethingsnetwork.org" rel="nofollow">The Things Network</a> account to use them):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /iot/lora/servers/print
Columns: NAME, UP-PORT, DOWN-PORT, ADDRESS
#  NAME              UP-PORT  DOWN-PORT  ADDRESS                                     
0  TTS Cloud (eu1)      1700       1700  eu1.cloud.thethings.industries         
1  TTS Cloud (nam1)     1700       1700  nam1.cloud.thethings.industries        
2  TTS Cloud (au1)      1700       1700  au1.cloud.thethings.industries         
3  TTN V3 (eu1)         1700       1700  eu1.cloud.thethings.network            
4  TTN V3 (nam1)        1700       1700  nam1.cloud.thethings.network           
5  TTN V3 (au1)         1700       1700  au1.cloud.thethings.network          
</pre>
</div></div><p>Custom servers can be added as well. Data forwarding to multiple servers can work simultaneously if the first server does not change &quot;DevAdress&quot; part of the packet and under the condition that all servers are able to decode the packet.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 95.1728%;"><colgroup><col style="width: 17.6471%;"/><col style="width: 82.3529%;"/></colgroup><tbody><tr><th style="text-align: center;" class="confluenceTh">Property</th><th style="text-align: center;" class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>address</strong> (<em>domain name or IP address</em>; Default: )</td><td class="confluenceTd">Defines LoRaWAN Network server address.</td></tr><tr><td class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Defines server name.</td></tr><tr><td class="confluenceTd"><strong>protocol </strong>(<em>UDP | LNS | CUPS</em>; Default: <strong>UDP</strong>)<strong><br/></strong></td><td class="confluenceTd">Specify whether to use UDP, LNS or CUPS protocol for the communication with the LoRaWAN server.</td></tr><tr><td class="confluenceTd"><p><strong>down-port</strong> (<em>integer [0..65535]</em>; Default: <strong>1700</strong>)</p></td><td class="confluenceTd">Parameter that is used when UDP protocol is selected. Defines port for down-link communication (from server to node) with LoRaWAN Network server. Most of known open source servers uses port 1700 as default, but it can change if multiple servers are configured on the same machine.</td></tr><tr><td class="confluenceTd"><strong>up-port</strong> (<em>integer [0..65535]</em>; Default: <strong>1700</strong>)</td><td class="confluenceTd">Parameter that is used when UDP protocol is selected. Defines port for up-link communication (from node to server) with LoRaWAN Network server. Most of known open source servers uses port 1700 as default, but it can change if multiple servers are configured on the same machine.</td></tr><tr><td class="confluenceTd"><strong>netid </strong>(<em>list of string</em>; Default: )</td><td class="confluenceTd">Parameter that is used when UDP protocol is selected. Applies a filter to only send LoRaWAN payloads that match the Network ID (Net ID) filter configured.</td></tr><tr><td class="confluenceTd"><strong>joineui </strong>(<em>list of string</em>; Default: )<strong><br/></strong></td><td class="confluenceTd">Parameter that is used when UDP protocol is selected. Applies a filter to only send LoRaWAN payloads that match the Join EUI filter configured.</td></tr><tr><td class="confluenceTd"><strong>port </strong>(<em>integer [0..65535]</em>; Default: <strong>8887</strong>)</td><td class="confluenceTd">Parameter that is used when LNS or CUPS protocol is selected. For LNS, defines the WSS (WebSocket) port and, for CUPS, defines HTTPS port.</td></tr><tr><td class="confluenceTd"><strong>key </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Parameter that is used when LNS or CUPS protocol is selected. Specify the LoRa Basics Station LNS Authentication Key or CUPS API KEY (both generated on the server).</td></tr><tr><td class="confluenceTd"><strong>ssl </strong>(<em>yes or no</em>; Default: no)<strong><br/></strong></td><td class="confluenceTd">Parameter that is used when LNS or CUPS protocol is selected. Specify whether to use or not to use SSL (if the server supports TLS server authentication). When this option is choosen, root SSL certificate(s) must be uploaded under the <a href="https://help.mikrotik.com/docs/display/ROS/Certificates" rel="nofollow">certificates</a> menu.</td></tr><tr><td class="confluenceTd"><strong>certificate </strong>(<em>list of string</em>; Default: <strong>none</strong>)</td><td class="confluenceTd">Parameter that is used when LNS or CUPS protocol is selected. Select an uploaded client certificate (if the server awaits TLS client authentication). If TLS client authentication is not required by the server, use the default &quot;<strong>none</strong>&quot; setting.</td></tr><tr><td class="confluenceTd"><strong>interval </strong>(<em>integer [0..65535]</em>; Default: )</td><td class="confluenceTd">Parameter that is used when CUPS protocol is selected. Specify the interval with which the LoRa Basics Station will query CUPS server for configuration updates/changes.</td></tr></tbody></table></div><p class="auto-cursor-target">There are a few pre-configued The Things default servers. If you deleted one and want to recover default servers, you can use the command:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/iot lora server reset-servers</pre>
</div></div><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Please be warned that resetting servers will delete all previously configured servers as well, so make sure to &quot;save&quot; them beforehand.</p></div></div><h1 id="GeneralProperties-Traffic"><span class="mw-headline">Traffic</span></h1><p><span class="mw-headline">This section displays LoRa payloads that were broadcasted by the surrounding nodes.<br/></span></p><p><strong>Sub-menu:</strong> <code>/iot lora traffic</code></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 95.3261%;"><colgroup class=""><col class="" style="width: 17.7949%;"/><col class="" style="width: 82.2051%;"/></colgroup><tbody class=""><tr class=""><th style="text-align: center;" class="confluenceTh">Property</th><th style="text-align: center;" class="confluenceTh">Description</th></tr><tr class=""><td class="confluenceTd"><strong>options</strong></td><td class="confluenceTd"><p>Allows to configure additional options for the traffic tab:</p><ul><li data-uuid="b4be91b1-79c0-4212-a98c-0d7041643045">crc-errors (yes | no) → Set to &quot;no&quot; to discard packets that have &quot;crc error&quot; status from appear in the traffic tab;</li><li data-uuid="f69e460d-400a-4674-a596-69aa008d4be9">pckt-limit (10...1024) → To limit traffic tab's log list.</li></ul></td></tr><tr><td class="confluenceTd"><strong>clear <br/></strong></td><td class="confluenceTd"><p>To clear the list (to remove all entries).</p></td></tr></tbody></table></div><p>To view the list, use the <code>print</code> command:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /iot/lora/traffic/print
Columns: TIME, GWID, MSGTYPE, DEVADDR, MVER, FCNT, CRC, TYPE, JOINEUI, DEVEUI
 #  TIME                             GWID  MSGTYPE                DEVADDR      MVER         FCNT  CRC    TY  JOINEUI                  DEVEUI                 
 0  2024-11-08 13:33:28  xxxxxxxxxxxxxxxx  Unconfirmed Data Up    6C B9 XX XX  LoRaWAN R1  59434  Error  Rx                                                  
 1  2024-11-08 13:33:50  xxxxxxxxxxxxxxxx  Rejoin-request                      LoRaWAN R1         Error  Rx                           50 62 9F FE XX XX XX XX
 2  2024-11-08 13:34:09  xxxxxxxxxxxxxxxx  Unconfirmed Data Down  5E 00 XX XX  RFU         41736  Error  Rx                                                  
 3  2024-11-08 13:34:15  xxxxxxxxxxxxxxxx  Rejoin-request                      RFU                Error  Rx                           D9 C2 BD 4B XX XX XX XX
 4  2024-11-08 13:34:55  xxxxxxxxxxxxxxxx  Join-request                        LoRaWAN R1         Error  Rx  A1 AE B1 8A XX XX XX XX  F4 62 81 BE XX XX XX XX</pre>
</div></div><p>To clear the list (to remove all entries), issue the <code>clear</code> command:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /iot/lora/traffic/clear</pre>
</div></div><p>Traffic tab displays &quot;LoRa&quot; payloads. As soon as the LoRa interface is enabled with the <code>/iot lora enable [find]</code> command, all the payloads from the list will be converted into TCP/UDP packets (depending on whether you use UDP 1700 or LNS/CUPS protocol) and forwarded to the configured server.</p><p>If you do not wish to use LoRaWAN topology, and if you wish to forward &quot;raw&quot; LoRa payloads to your own server, you have an option to do so, using <a href="https://help.mikrotik.com/docs/spaces/ROS/pages/46759978/MQTT" rel="nofollow">MQTT</a> or <a href="Fetch_8978514.html">Fetch</a> post (HTTP post). To do that, remove the LoRa server configuration (so that no server is selected by the LoRa interface, thus the payloads are not forwarded anywhere) and then you will have to create a <a href="https://help.mikrotik.com/docs/spaces/ROS/pages/47579229/Scripting" rel="nofollow">script</a>. The script will have to store the traffic as variables, structure MQTT/HTTP messages out of them (in a format that your server expects to receive the data) and then send it. After that, you can apply a <a href="https://help.mikrotik.com/docs/spaces/ROS/pages/40992881/Scheduler" rel="nofollow">scheduler</a>, to run the script with an interval of your choice to constantly send the data.</p><p>A basic example (first step in the script) on how to convert traffic payloads into a varible called &quot;traffic&quot;:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] &gt; :global traffic;:set traffic [/iot lora traffic print as-value ];put $traffic 
.id=*4f;band=125 kHz;coderate=?/?;counter=890652548;crc=Error;datarate=SF 7;freqhz=868300;gwid=50313xxxxxx;ifcha
in=1;mod=LoRa;msgtype=Proprietary;mver=RFU;rfchain=1;rssi=-116.00;rxcrc=3809;size=213;snr=-12.00;snrmax=-8.25;snrmin=
-14.25;time=2024-11-08 14:39:45;type=Rx</pre>
</div></div><h1 class="auto-cursor-target" id="GeneralProperties-Debugging">Debugging</h1><p>If you have issues with the connection, make sure to enable logs:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/system/logging/add topics=debug,lora</pre>
</div></div><p>This will enable debug logging and help you pin point where the potential issue could be. Logs can be viewed using:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/log/print
</pre>
</div></div><p>A successful connection would look like this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false"> 13:50:33 lora,info gateway-0 forwarder started
 13:50:38 lora,info [LNS] connecting to wss://eu1.cloud.thethings.network:8887/router-info
 13:50:39 lora,info [LNS] eu1.cloud.thethings.network discovered
 13:50:39 lora,info [LNS] eu1.cloud.thethings.network disconnected
 13:50:39 lora,info [LNS] connecting to wss://eu1.cloud.thethings.network:8887/traffic/eui-xxxx
 13:50:39 lora,info [LNS] eu1.cloud.thethings.network configured
 13:50:52 lora,info gateway-0 forwarder is ready
</pre>
</div></div><p>More logging information can be found in our <a href="https://help.mikrotik.com/docs/display/ROS/Log" rel="nofollow">Log</a> guide.</p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/16351619/208896376.png">image-2023-8-31_16-55-25.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/16351619/232816877.png">image-2024-1-30_14-25-4.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/16351619/237699491.png">image-2024-3-4_10-43-46.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
