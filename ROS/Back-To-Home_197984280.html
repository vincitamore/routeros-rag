<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : Back To Home</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Network-Management_119144613.html">Network Management</a></span>
                            </li>
                                                    <li>
                                <span><a href="Cloud_97779929.html">Cloud</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : Back To Home
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Normunds R.</span>, last updated by <span class='editor'> Jānis Bērziņš</span> on Nov 28, 2024
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h1 id="BackToHome-/*&lt;![CDATA[*/div.rbtoc1747742030095{padding:0px;}div.rbtoc1747742030095ul{margin-left:0px;}div.rbtoc1747742030095li{margin-left:0px;padding-left:0px;}/*]]&gt;*/#BackToHome-Overview#BackToHome-OverviewEnablingBTHusingtheapp#BackToHome-EnablingBTHus"><span class="mw-headline"><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742030095 {padding: 0px;}
div.rbtoc1747742030095 ul {margin-left: 0px;}
div.rbtoc1747742030095 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742030095'>
<ul class='toc-indentation'>
<li><a href='#BackToHome-'></a></li>
<li><a href='#BackToHome-Overview'>Overview</a>
<ul class='toc-indentation'>
<li><a href='#BackToHome-EnablingBTHusingtheapp'>Enabling BTH using the app</a></li>
<li><a href='#BackToHome-SharingtheBTHconnectionwithanotherphoneuser'>Sharing the BTH connection with another phone user</a></li>
<li><a href='#BackToHome-SharingtheBTHtunnelwithacomputerviatheWireGuard(TM)app'>Sharing the BTH tunnel with a computer via the WireGuard(TM) app</a></li>
<li><a href='#BackToHome-ConfiguringBTHmanuallyinRouterOS(optional,ifnosmartphoneisavailabletoyou)'>Configuring BTH manually in RouterOS (optional, if no smartphone is available to you)</a></li>
<li><a href='#BackToHome-Removinganddisablingconnections'>Removing and disabling connections</a></li>
</ul>
</li>
<li><a href='#BackToHome-Propertyreference'>Property reference</a>
<ul class='toc-indentation'>
<li><a href='#BackToHome-IPCloud'>IP Cloud</a></li>
<li><a href='#BackToHome-BacktoHomeusers'>Back to Home users</a></li>
</ul>
</li>
</ul>
</div></span></h1><h1 id="BackToHome-Overview"><span class="mw-headline">Overview</span></h1><p><strong>Sub-menu: </strong><code>/ip cloud</code><strong><br/>Packages required: </strong><code>routeros</code><br/><strong>RouterOS version required:</strong> v7.12 and newer<br/><strong>Hardware requirements:</strong> ARM/ARM64/TILE architecture devices</p><p><span>Back To Home is a convenience feature, that configures your device for secure VPN access from anywhere in the world to your router and your network, even if your router does not have a public IP address, is behind NAT or Firewall.</span></p><p>Configuration is done with MikroTik Back to Home app (<a class="external-link" href="https://play.google.com/store/apps/details?id=com.mikrotik.android.freevpn" rel="nofollow">Android</a>, <a class="external-link" href="https://apps.apple.com/lv/app/mikrotik-back-to-home/id6450679198" rel="nofollow">iPhone</a>).</p><p>If the VPN server (your home router) has a public IP address, the VPN app will create a direct VPN connection between the phone and the router. However, if the router is not directly reachable from the internet, the connection will be made through the MikroTik relay servers. <span>The connection is always end-to-end encrypted, the relay server or any other device does not have access to the encryption keys, in essence, the relay only helps your device to reach the router. The connection will appear as going out from your router, not from the relay. <em>In case of going through relay, speed could be limited.</em></span></p><p><span>This feature is a convenient option to access your home network or view content available in your home country, from locations, where some content is not available.</span> It is not meant for anonymity, it is for simple one click access to your home network. For more granular security controls, we recommend to manually configure and secure a VPN connection using the advanced RouterOS options.</p><h3 id="BackToHome-EnablingBTHusingtheapp">Enabling BTH using the app</h3><p>To set up Back to Home, you should have a smartphone with the BTH app and should be inside your home, connected to your routers WiFi network. </p><ul><li>Connect to router's Wi-Fi using your phone;</li><li>Open the Back to Home application (<a class="external-link" href="https://play.google.com/store/apps/details?id=com.mikrotik.android.freevpn" rel="nofollow">Android</a>, <a class="external-link" href="https://apps.apple.com/lv/app/mikrotik-back-to-home/id6450679198" rel="nofollow">iPhone</a>);</li><li>Tap &quot;Create new&quot;;</li><li>Enter your local router IP address (most likely 192.168.88.1), username, and password of your router, tap &quot;Connect&quot;;</li><li>Give tunnel a name, then tap&quot;Create tunnel&quot;;</li><li>Your phone will ask for permission to add new VPN settings, approve it with your phone pin; </li><li>Setup is done. You can now disconnect from router's Wi-Fi and connect to any other network, like LTE/5G or simply leave your house now;</li><li>Tap the Connect button to toggle connection of the selected tunnel.</li></ul><p><br/></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 88.3554%;"><colgroup><col style="width: 17.3333%;"/><col style="width: 16.9934%;"/><col style="width: 16.9255%;"/><col style="width: 14.2745%;"/><col style="width: 15.43%;"/></colgroup><tbody><tr><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/197984280/263749762.png" data-image-src="attachments/197984280/263749762.png" data-unresolved-comment-count="0" data-linked-resource-id="263749762" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2547.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/197984280/263749761.png" data-image-src="attachments/197984280/263749761.png" data-unresolved-comment-count="0" data-linked-resource-id="263749761" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2548.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/197984280/263749760.png" data-image-src="attachments/197984280/263749760.png" data-unresolved-comment-count="0" data-linked-resource-id="263749760" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2549.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="400" src="attachments/197984280/263749759.png" data-image-src="attachments/197984280/263749759.png" data-unresolved-comment-count="0" data-linked-resource-id="263749759" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2550.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" draggable="false" height="400" src="attachments/197984280/197984313.png" data-image-src="attachments/197984280/197984313.png" data-unresolved-comment-count="0" data-linked-resource-id="197984313" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="bth04.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th></tr><tr><th scope="col" class="confluenceTh"><div class="content-wrapper"><p>Tap &quot;Create new&quot;</p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p>Provide your router credentials</p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p>Connection established</p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p>Allow VPN to be added</p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p>If device is not supported, error is shown</p></div></th></tr></tbody></table></div><h3 id="BackToHome-SharingtheBTHconnectionwithanotherphoneuser">Sharing the BTH connection with another phone user</h3><p>It is possible to create Guest tunnels for your friends and family. You can even specify if you want these people to access your local network as well, or if they should be restricted to only use the internet via your router. Once you create shared tunnels, you can send Invitation links via any chat application in your phone, or show a QR code to your friend in person (in both these cases, the friend will have to also install the BTH app). If you want to connect to your router via the WireGuard(TM) app from another phone or from a computer, it is possible as well. Just select the share WireGuard(TM) config file, and open this file in the WireGuard(TM) app. </p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody><tr><th scope="col" class="confluenceTh"><div class="content-wrapper"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749755.png" data-image-src="attachments/197984280/263749755.png" data-unresolved-comment-count="0" data-linked-resource-id="263749755" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2554.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749754.png" data-image-src="attachments/197984280/263749754.png" data-unresolved-comment-count="0" data-linked-resource-id="263749754" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2555.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749753.png" data-image-src="attachments/197984280/263749753.png" data-unresolved-comment-count="0" data-linked-resource-id="263749753" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2556.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749752.png" data-image-src="attachments/197984280/263749752.png" data-unresolved-comment-count="0" data-linked-resource-id="263749752" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2557.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749751.jpg" data-image-src="attachments/197984280/263749751.jpg" data-unresolved-comment-count="0" data-linked-resource-id="263749751" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2558.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749750.jpg" data-image-src="attachments/197984280/263749750.jpg" data-unresolved-comment-count="0" data-linked-resource-id="263749750" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2559.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th></tr><tr><td class="confluenceTd">Manage shares</td><td class="confluenceTd">Connect to your tunnel first</td><td class="confluenceTd">Once connected, Create shares</td><td class="confluenceTd">Provide a name and access level</td><td class="confluenceTd">Share sheet opens</td><td class="confluenceTd">Send the invite link via WhatsApp, Signal etc.</td></tr></tbody></table></div><p>To share your tunnel with somebody: </p><ul><li>As the owner, connect to your BTH tunnel</li><li>Click the &quot;...&quot; icon next to your tunnel and click &quot;Manage shares&quot;</li><li>Enter the administration password for the router, since you will be modifying the router config</li><li>Tap &quot;Create&quot; in the Shares manager</li><li>Enter your friends name in the &quot;Tunnel name&quot;, since a new tunnel will be made for them</li><li>Specify expiry date of this new Guest tunnel</li><li>Specify if the user will need to access your intenal network of your home. Do not check this if they only want to use this tunnel for internet access</li><li>Once &quot;Create tunnel&quot; has been pressed, phone Share Sheet opens. Select method how to send the invite link </li><li>Once the other person clicks on this link, he will either be directed to install the BTH app, or the BTH app will open and will allow to set up this new Guest tunnel in their phone</li></ul><h3 id="BackToHome-SharingtheBTHtunnelwithacomputerviatheWireGuard(TM)app">Sharing the BTH tunnel with a computer via the WireGuard(TM) app</h3><p>Since there is no BTH app for PCs, you can use <a class="external-link" href="https://www.wireguard.com/install/" rel="nofollow">WireGuard(TM) app</a> to connect to the shared tunnel. You can even share your connection with yourself, by &quot;inviting&quot; your computer to connect. </p><p>Let's make a new share, this time for yourself, for using from the PC. </p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 58.0432%;"><colgroup><col style="width: 16.6598%;"/><col style="width: 16.6598%;"/><col style="width: 16.6598%;"/><col style="width: 16.6598%;"/><col style="width: 16.6598%;"/><col style="width: 0.31043%;"/></colgroup><tbody><tr><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749767.png" data-image-src="attachments/197984280/263749767.png" data-unresolved-comment-count="0" data-linked-resource-id="263749767" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2561.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749768.png" data-image-src="attachments/197984280/263749768.png" data-unresolved-comment-count="0" data-linked-resource-id="263749768" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2562.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749769.png" data-image-src="attachments/197984280/263749769.png" data-unresolved-comment-count="0" data-linked-resource-id="263749769" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2563.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749770.png" data-image-src="attachments/197984280/263749770.png" data-unresolved-comment-count="0" data-linked-resource-id="263749770" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2564.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749770.png" data-image-src="attachments/197984280/263749770.png" data-unresolved-comment-count="0" data-linked-resource-id="263749770" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2564.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th><th scope="col" class="confluenceTh"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/197984280/263749772.png" data-image-src="attachments/197984280/263749772.png" data-unresolved-comment-count="0" data-linked-resource-id="263749772" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2565.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p></div></th></tr><tr><td class="confluenceTd">Create</td><td class="confluenceTd">Specify name and access level</td><td class="confluenceTd">You have two shares now </td><td class="confluenceTd">Click &quot;...&quot; to send invite</td><td class="confluenceTd">Pick &quot;Share WireGuard config  file&quot;</td><td class="confluenceTd">AirDrop to your macOS or e-mail the file</td></tr></tbody></table></div><p>Install the WireGuard app in your computer and click &quot;Import Tunnel from file&quot; </p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="150" src="attachments/197984280/263749773.jpg" data-image-src="attachments/197984280/263749773.jpg" data-unresolved-comment-count="0" data-linked-resource-id="263749773" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screenshot 2024-08-08 at 13.33.05.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="197984280" data-linked-resource-container-version="48" tabindex="0" alt=""></span></p><hr/><h3 id="BackToHome-ConfiguringBTHmanuallyinRouterOS(optional,ifnosmartphoneisavailabletoyou)">Configuring BTH manually in RouterOS (optional, if no smartphone is available to you)</h3><p><br/></p><div role="region" aria-label="Info" class="confluence-information-macro  confluence-information-macro-information" ><p class="title conf-macro-render">Important notice</p><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-info-filled confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>It is important to note, <strong>NOTHING has to be configured in RouterOS to use Back to Home</strong>. Simply use the BTH app (see above section) to enable it. The whole point of Back to Home is to avoid using Winbox or command line. Below instructions are only for debugging or seasoned administrators. </p></div></div><ol><li><span style="color:var(--ds-text,#333333);">Connect to router </span><span class="hljs-bullet" style="color:var(--ds-chart-yellow-bold-hovered,#946F00);"> </span></li><li><span style="color:var(--ds-text,#333333);">Enable DDNS Cloud service: </span>`<code>/ip/cloud/set ddns-enabled=yes</code>`<span style="color:var(--ds-text,#333333);"> </span><span class="hljs-bullet" style="color:var(--ds-chart-yellow-bold-hovered,#946F00);"> </span></li><li>Enable Back To Home: `<code>/ip/cloud/set back-to-home-vpn=enabled</code>`</li><li>Print tunnel configuration: `<code>/ip/cloud/print</code>`</li><li><span style="color:var(--ds-text,#333333);">Scan QR Code (</span>`<code>vpn-wireguard-client-config-qrcode</code>`<span style="color:var(--ds-text,#333333);">) or Copy config (</span>`<code>vpn-wireguard-client-config</code>`<span style="color:var(--ds-text,#333333);">) and enter in preferred WireGuard® client. Only one client at a time will be available to use this config.</span><br/><br/><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><span style="color:var(--ds-text,#333333);">After configuring Back To Home -</span><span style="color:var(--ds-text,#333333);"> an additional peer entry is automatically made, which can be seen by running the command <em>/ip cloud print</em>. This is intended for the VPN to work in the case that the device does not have access to a public IP address and opts to establish the connection by using MikroTIk's relay server.<br/>In the case your device has access to a public IP address, the generated peer entry is ignored:<br/></span></p><pre class="code-java">[Peer]
PublicKey = //////////////////////////////////////////8=
AllowedIPs = 0.0.0.0/32
Endpoint = example.com:12345
PersistentKeepalive = 15 </pre></div></div></li></ol><h3 id="BackToHome-Removinganddisablingconnections">Removing and disabling connections</h3><p>In the smartphone app, the VPN configuration is added to the System VPN settings. In this regard, the Back to Home app only acts as a wizard. It supplies needed config to the operating system (this is why iPhone will warn you about altering system configuration).</p><p>To remove the created connection, go into the smartphone settings app and remove the VPN connections from there. </p><p>In the MikroTik router side, you should manually delete the added Peers in the Wireguard menu. Note that &quot;revoke-and-disable&quot; button can't be used to &quot;Pause&quot; the use of the Back to Home feature. Once you revoke-and-disable in RouterOS, all Peers will be disassociated from the Cloud / Relay servers, and you will have to re-create the connection from the Smartphone app. Therefore, once you have used the option &quot;revoke-and-disable&quot; in RouterOS IP Cloud menu, you need to also delete the Peers from the Wireguard menu, as they can't be re-used. </p><h1 id="BackToHome-Propertyreference">Property reference</h1><h2 id="BackToHome-IPCloud">IP Cloud</h2><p><strong style="text-decoration: none;">Sub-menu:<span style="color:var(--ds-text-accent-blue-bolder,#09326C);"><code> </code></span></strong><code>/ip/cloud/</code></p><p>Back to Home shares the menu with IP Cloud. Back to Home parameters:</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup class=""><col class=""/><col class=""/></colgroup><tbody class=""><tr class=""><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr class=""><td class="confluenceTd"><strong>back-to-home-vpn</strong> <span style="color:var(--ds-text,#172B4D);">(</span><em style="text-align: left;">enabled | revoked-and-disabled</em><span style="color:var(--ds-text,#172B4D);">; Default:<span> </span></span><strong style="text-align: left;">revoked-and-disabled</strong><span style="color:var(--ds-text,#172B4D);">)</span></td><td class="confluenceTd"><p>Enables or revokes and disables the Back to Home service. ddns-enabled has to be set to yes, for BTH to function.</p></td></tr><tr class=""><td class="confluenceTd"><strong>vpn-dns-name</strong> <span style="color:var(--ds-text,#172B4D);">(</span><em style="text-align: left;">read-only: string</em><span style="color:var(--ds-text,#172B4D);">)</span></td><td class="confluenceTd"><span style="color:var(--ds-text,#172B4D);">Shows the DNS name assigned to the device. Name consists of product serial number appended by<span> </span></span><em style="text-align: left;">.vpn.mynetname.net</em><span style="color:var(--ds-text,#172B4D);">. This field is visible only after at least one ddns-request is successfully completed.</span></td></tr><tr class=""><td class="confluenceTd"><strong>vpn-port</strong> <span style="color:var(--ds-text,#172B4D);">(</span><em style="text-align: left;">read-only: integer</em><span style="color:var(--ds-text,#172B4D);">)</span><em><br/></em></td><td class="confluenceTd">Port used by BTH VPN.</td></tr><tr class=""><td class="confluenceTd"><strong>vpn-status</strong> <span style="color:var(--ds-text,#172B4D);">(</span><em style="text-align: left;">read-only: string</em><span style="color:var(--ds-text,#172B4D);">)</span></td><td class="confluenceTd"><span style="color:var(--ds-text,#172B4D);">Contains text string that describes the current BTH state.</span></td></tr><tr class=""><td class="confluenceTd"><strong>vpn-relay-rtts</strong> (<em>read-only;</em> &quot;region (ip4: time(<strong>ms</strong>), ip6: time (<strong>ms)</strong>&quot;)</td><td class="confluenceTd">Round trip time in milliseconds for each available relay, values are shown both for IPv4 and IPv6.</td></tr><tr class=""><td class="confluenceTd"><strong>vpn-relay-ipv4-status</strong> (<em>read-only: string</em>)</td><td class="confluenceTd">Status on connection to relay and detailed information about relay</td></tr><tr><td class="confluenceTd"><strong>vpn-relay-ipv6-status </strong>(<em>read-only: string</em>)</td><td class="confluenceTd">Status on connection to relay and detailed information about relay</td></tr><tr><td class="confluenceTd"><strong>vpn-relay-codes</strong> (<em>read-only: string</em>)</td><td class="confluenceTd">Available VPN relay codes, which can be referenced in vpn-prefer-relay-code. All available relays will be shown here.</td></tr><tr><td class="confluenceTd"><strong>vpn-relay-addressess </strong>(<em>read-only: string</em>)</td><td class="confluenceTd">IPv4 address of the relay</td></tr><tr><td class="confluenceTd"><strong>vpn-relay-addressess-ipv6</strong> (<em>read-only: string</em>)</td><td class="confluenceTd">IPv6 address of the relay</td></tr><tr><td class="confluenceTd"><strong>vpn-private-key</strong> (<em>read-only: string</em>)</td><td class="confluenceTd">Private key for BTH</td></tr><tr><td class="confluenceTd"><strong>vpn-public-key</strong> (<em>read-only: string</em>)</td><td class="confluenceTd">Public key for BTH</td></tr><tr><td class="confluenceTd"><strong>vpn-peer-private-key </strong>(<em>read-only: string</em>)</td><td class="confluenceTd">Peer private key</td></tr><tr><td class="confluenceTd"><strong>vpn-peer-public-key</strong> (<em>read-only: string</em>)</td><td class="confluenceTd">Peer public key</td></tr><tr><td class="confluenceTd"><strong>vpn-prefer-relay-code</strong> (<em>string;</em>)</td><td class="confluenceTd">You can enter relay code that will be preferred for BTH connection, if not set, relay with smallest RTT will be chosen.</td></tr><tr><td class="confluenceTd"><strong>vpn-interface</strong> (<em>read-only: string</em>)</td><td class="confluenceTd">Name of the created interface for Back to Home WireGuard<span style="color:var(--ds-text,#333333);">®</span> tunnel.</td></tr><tr><td class="confluenceTd"><strong>vpn-wireguard-client-config</strong> (<em>read-only: string</em>)</td><td class="confluenceTd"><p>Configuration that can be<span style="color:var(--ds-text,#333333);"> entered in your preferred WireGuard® client. Only one client at a time will be available to use this config.</span></p></td></tr><tr><td class="confluenceTd"><strong>vpn-wireguard-client-config-qrcode</strong> (<em>read-only</em>)</td><td class="confluenceTd"><p><span style="color:var(--ds-text,#333333);">Scannable QR Code for your </span><span style="color:var(--ds-text,#333333);">preferred WireGuard® client. Only one client at a time will be available to use this config.</span></p></td></tr></tbody></table></div><div role="region" aria-label="Info" class="confluence-information-macro  confluence-information-macro-information" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-info-filled confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>When using vpn-wireguard-client-config or vpn-wireguard-client-config-qrcode, both options are equal, you only need to import one of these into your WireGuard client device.</p></div></div><h2 id="BackToHome-BacktoHomeusers">Back to Home users</h2><p><strong style="text-decoration: none;">Sub-menu: </strong><code>/ip/cloud/back-to-home-users/</code></p><p>Since RouterOS 7.14 there is a new back to home specific user manager available in the menu <code>/ip/cloud/back-to-home-users&gt;</code> where you can see all the users that are added by the Back to Home mobile app, change their firewall preference and also add new ones.</p><pre>[boss@mikrotik-ax] /ip/cloud/back-to-home-users&gt; print detail <br/>Flags: X - disabled; A - active <br/><br/> 0  A name=&quot;user1&quot; slot=3 expires=never client-address=192.168.216.3/32,fc00:0:0:216::3/128 allow-lan=no <br/>      private-key=&quot;OHqR2BZXJp0N6//3JzzoJhBJVb0rrSxV0dxQL/2UdXY=&quot; public-key=&quot;Na7oEq9XLdeK8ouCUX+tC4FIM51vEnZ7mLiFqG9xiUQ=&quot; <br/><br/>[boss@mikrotik-ax] /ip/cloud/back-to-home-users&gt;</pre><p>When adding users in this menu, you can view their Wireguard config and QR code with this command <code>/interface/wireguard/peers/show-client-config user1 </code></p><p><code>A</code><code>llow-lan=no</code> <span style="color:var(--ds-text,#333333);">will add the users into a firewall address list, that only allows internet access, but blocks the user from accessing your internal network. Note that expiry date can't be changed, once a user has been added. </span></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup class=""><col class=""/><col class=""/></colgroup><tbody class=""><tr class=""><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr class=""><td class="confluenceTd"><strong>name</strong> (<em>string</em>)</td><td class="confluenceTd"><p>Informative name of BTH user</p></td></tr><tr><td class="confluenceTd"><p><strong>expires </strong>(string; never | date:<em> &quot;YYYY-MM-DD HH:MM:SS&quot;;</em></p><p>Default: <strong>never</strong><em>)</em></p></td><td class="confluenceTd"><p>Expiration time and date for user, cannot be changed once user is created</p></td></tr><tr><td class="confluenceTd"><strong>client-addresss </strong>(string: IPv4 | IPv6)</td><td class="confluenceTd"><p>Client address, if not specified one will be made automatically</p></td></tr><tr><td class="confluenceTd"><strong>allow-lan </strong>(string: yes | no; Default: <strong>no</strong>)</td><td class="confluenceTd"><p><span style="color:var(--ds-text,#333333);">Will add the user into a firewall address list, that only allows internet access, but blocks the user from accessing your internal network</span></p></td></tr><tr><td class="confluenceTd"><strong>private-key </strong>(string;)</td><td class="confluenceTd"><p>Private key for user, if not set manually, it will be generated by the system</p></td></tr><tr><td class="confluenceTd"><strong>public-key </strong>(string;)</td><td class="confluenceTd"><p>Public key for user, if not set manually, it will be generated by the system</p></td></tr></tbody></table></div><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/197984310.png">bth03.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/197984311.png">bth01.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/197984312.png">bth02.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/197984313.png">bth04.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749749.png">IMG_2560.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749750.jpg">IMG_2559.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749751.jpg">IMG_2558.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749752.png">IMG_2557.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749753.png">IMG_2556.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749754.png">IMG_2555.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749755.png">IMG_2554.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749756.png">IMG_2553.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749757.png">IMG_2552.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749758.png">IMG_2551.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749763.png">IMG_2550.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749760.png">IMG_2549.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749761.png">IMG_2548.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749762.png">IMG_2547.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749759.png">IMG_2550.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749767.png">IMG_2561.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749768.png">IMG_2562.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749769.png">IMG_2563.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749771.png">IMG_2564.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749770.png">IMG_2564.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749772.png">IMG_2565.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/197984280/263749773.jpg">Screenshot 2024-08-08 at 13.33.05.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
