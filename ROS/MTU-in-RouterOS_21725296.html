<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : MTU in RouterOS</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Hardware_13500445.html">Hardware</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : MTU in RouterOS
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Artūrs C.</span>, last updated by <span class='editor'> Gļebs K.</span> on Feb 10, 2025
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742045092 {padding: 0px;}
div.rbtoc1747742045092 ul {margin-left: 0px;}
div.rbtoc1747742045092 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742045092'>
<ul class='toc-indentation'>
<li><a href='#MTUinRouterOS-Introduction'>Introduction</a></li>
<li><a href='#MTUinRouterOS-MaximumTransmissionUnit'>Maximum Transmission Unit</a>
<ul class='toc-indentation'>
<li><a href='#MTUinRouterOS-FullframeMTU'>Full frame MTU</a></li>
<li><a href='#MTUinRouterOS-MAC/Layer-2/L2MTU'>MAC/Layer-2/L2 MTU</a></li>
<li><a href='#MTUinRouterOS-MPLS/Layer-2.5/L2.5MTU'>MPLS/Layer-2.5/L2.5 MTU</a>
<ul class='toc-indentation'>
<li><a href='#MTUinRouterOS-MPLSSwitching'>MPLS Switching</a></li>
<li><a href='#MTUinRouterOS-IPingress'>IP ingress</a></li>
<li><a href='#MTUinRouterOS-VPLSingress'>VPLS ingress</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#MTUinRouterOS-SetupExamples'>Setup Examples</a>
<ul class='toc-indentation'>
<li><a href='#MTUinRouterOS-SimpleRouting'>Simple Routing</a></li>
<li><a href='#MTUinRouterOS-RoutingwithVLANEncap'>Routing with VLAN Encap</a></li>
<li><a href='#MTUinRouterOS-SimpleMPLSwithTags'>Simple MPLS with Tags</a></li>
<li><a href='#MTUinRouterOS-VPLSTunnel'>VPLS Tunnel</a></li>
</ul>
</li>
<li><a href='#MTUinRouterOS-AdvancedSetupExamples'>Advanced Setup Examples</a></li>
</ul>
</div></p><h1 id="MTUinRouterOS-Introduction">Introduction</h1><p><span style="color:var(--ds-text,#333333);">It is the sole responsibility of administrators to configure the Maximum Transmission Unit (MTU) such that intended services and applications can be successfully implemented in the network. In other words - administrators </span><span style="color:var(--ds-text,#333333);">must make sure that MTUs are configured in a way that packet sizes do not exceed the capabilities of network equipment.</span></p><p>Originally MTU was introduced because of the high error rates and low speed of communications. Fragmentation of the data stream gives the ability to correct corruption errors only by resending corrupted fragments, not the whole stream. Also on low-speed connections such as modems, it can take too much time to send a big fragment, so in this case, communication is possible only with smaller fragments.</p><p>But in the present day we have much lower error rates and higher speed of communication, this opens a possibility to increase the value of MTU. By increasing the value of MTU we will result in less protocol overhead and reduce CPU utilization mostly due to interrupt reduction. This way some non-standard frames started to emerge:</p><ul><li><strong>Giant</strong><span> </span>or<span> </span><strong>Jumbo</strong><span> </span>frames - frames that are bigger than standard (IEEE) Ethernet MTU;</li><li><strong>Baby Giant</strong><span> </span>or<span> </span><strong>Baby Jumbo</strong><span> </span>frames - frames that are just slightly bigger than standard (IEEE) Ethernet MTU;</li></ul><p>It is common now for Ethernet interfaces to support physical MTU above standard, but this can not be taken for granted. Abilities of other network equipment must be taken into account as well - for example, if 2 routers with Ethernet interfaces supporting physical MTU 1526 are connected through an Ethernet switch, in order to successfully implement some application that will produce these big Ethernet frames, the switch must also support forwarding such frames.</p><h1 id="MTUinRouterOS-MaximumTransmissionUnit"><span style="color:var(--ds-text,#333333);">Maximum Transmission Unit</span></h1><p><br/></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 100.0%;"><colgroup><col style="width: 27.1051%;"/><col style="width: 72.8949%;"/></colgroup><tbody><tr><td class="confluenceTd"><div class="content-wrapper"><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/21725296/135856347.jpg" data-image-src="attachments/21725296/135856347.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856347" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MTU_general_explanation.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="21725296" data-linked-resource-container-version="24" tabindex="0" alt=""></span></p></div></td><td class="confluenceTd"><p><br/></p><p>Mikrotik RouterOS recognizes several types of MTU:</p><ul><li style="text-align: left;">IP/Layer-3/L3 MTU</li><li style="text-align: left;">MPLS/Layer-2.5/L2.5 MTU</li><li style="text-align: left;">MAC/Layer-2/L2 MTU</li><li style="text-align: left;">Full frame MTU</li></ul></td></tr></tbody></table></div><h2 id="MTUinRouterOS-FullframeMTU">Full frame MTU</h2><p><span style="color:var(--ds-text,#333333);">Full frame MTU indicates the actual size of the frame that is sent by a particular interface. Frame Checksum is not included as it is removed by an ethernet driver as soon as it reaches its destination.</span></p><h2 id="MTUinRouterOS-MAC/Layer-2/L2MTU"><span class="mw-headline">MAC/Layer-2/L2 MTU</span></h2><p>L2MTU indicates the maximum size of the frame without the MAC header that can be sent by this interface.</p><p>In RouterOS L2MTU values can be seen in the &quot;/interface&quot; menu. L2MTU support is added for all Routerboard related Ethernet interfaces, VLANs, Bridge, VPLS, and wireless interfaces. Some of them support the configuration of the L2MTU value. All other Ethernet interfaces might indicate L2MTU only if the chipset is the same as Routerboard Ethernets.</p><p>This will allow users to check if the desired setup is possible. Users will be able to utilize additional bytes for VLAN and MPLS tags, or simply increase interface MTU to get rid of some unnecessary fragmentation.</p><p>This table shows <em>max-l2mtu</em> supported by Mikrotik RouterBoards (available in the &quot;/interface print&quot; menu as the value of the read-only &quot;max-l2mtu&quot; option):</p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 100.0%;"><colgroup><col style="width: 67.5439%;"/><col style="width: 32.4561%;"/></colgroup><tbody><tr><td class="confluenceTd"><strong>Model name</strong></td><td class="confluenceTd"><strong>MTU description</strong></td></tr><tr><td class="confluenceTd"><strong>RB SXT series, RB LHG, RB LDF, PL6411-2nD, PL7411-2nD, RB711 series, wAP R-2nD, RB912R-2nD-LTm (LtAP mini), RB Metal series, RB SXT Lite series, RB Groove series, Cube Lite60, LHG Lite60</strong></td><td class="confluenceTd">ether1:2028</td></tr><tr><td class="confluenceTd"><strong>RB SXT G series, RB DynaDish, wAP ac, RB QRT series, RB711G series, RB911G, RB912UAG</strong></td><td class="confluenceTd">ether1:4076</td></tr><tr><td class="confluenceTd"><strong>RB OmniTik series, RB750, RB750UP, RB751U-2HnD, RB951-2n </strong></td><td class="confluenceTd"><p>ether1:4076; ether2-ether5:2028</p></td></tr><tr><td class="confluenceTd"><strong>RB OmniTik ac series, RB750GL, RB750Gr2 </strong></td><td class="confluenceTd">ether1-ether5:4074</td></tr><tr><td class="confluenceTd"><strong>RB mAP, RB mAP lite, RB cAP, RB wAP</strong></td><td class="confluenceTd">ether1-ether2:2028</td></tr><tr><td class="confluenceTd"><strong>RB750r2, RB750P-PBr2, RB750UPr2, RB941-2nD, RB951Ui/RB952Ui series</strong></td><td class="confluenceTd">ether1-ether5:2028</td></tr><tr><td class="confluenceTd"><strong>RB750Gr3</strong></td><td class="confluenceTd">ether1-ether5:2026</td></tr><tr><td class="confluenceTd"><strong>RB751G-2HnD, RB951G-2HnD</strong></td><td class="confluenceTd">ether1-ether5:4074</td></tr><tr><td class="confluenceTd"><strong>RB962UiGS, RB960PGS</strong></td><td class="confluenceTd">ether1-ether5:4074; sfp1:4076</td></tr><tr><td class="confluenceTd"><strong>RB LHGG series</strong></td><td class="confluenceTd">ether1:9214</td></tr><tr><td class="confluenceTd"><strong>LHG XL 52 ac</strong></td><td class="confluenceTd">ether1:9214; sfp1:9214</td></tr><tr><td class="confluenceTd"><strong>RB1100Hx2, RB1100AHx2</strong></td><td class="confluenceTd">ether1-ether10:9498; ether11:9500; ether12-ether13:9116</td></tr><tr><td class="confluenceTd"><strong>RB4011iGS+ series</strong></td><td class="confluenceTd">ether1-ether10:9578; sfp-sfpplus1:9982</td></tr><tr><td class="confluenceTd"><strong>CCR1009 series</strong></td><td class="confluenceTd">ether1-ether4:10224; ether5-ether8:10226; sfp1:10226; sfp-sfpplus1:10226</td></tr><tr><td class="confluenceTd"><strong>CCR1016 series</strong></td><td class="confluenceTd">ether1-ether12:10226; sfp1-sfp12:10226; sfp-sfpplus1:10226</td></tr><tr><td class="confluenceTd"><strong>CCR1036 series</strong></td><td class="confluenceTd">ether1-ether12:10226; sfp1-sfp4:10226; sfp-sfpplus1-sfp-sfpplus2:10226</td></tr><tr><td class="confluenceTd"><strong>CCR1072 series</strong></td><td class="confluenceTd">ether1:9116; sfp-sfpplus1-sfp-sfpplus8:10226</td></tr><tr><td class="confluenceTd"><strong>CCR2004-1G-12S+2XS</strong></td><td class="confluenceTd">ether1:9586; sfp-sfpplus1-sfp-sfpplus12:9578; sfp28-1 - sfp28-2:9578</td></tr><tr><td class="confluenceTd"><strong>CCR2004-16G-2S+</strong></td><td class="confluenceTd">ether1-ether16:9582; sfp-sfpplus1-sfp-sfpplus2:9586</td></tr><tr><td class="confluenceTd"><strong>CCR2116-12G-4S+</strong></td><td class="confluenceTd">ether1-ether12:9570; ether13:9586; sfp-sfpplus1-sfp-sfpplus4:9570</td></tr><tr><td class="confluenceTd"><strong>CCR2216-1G-12XS-2XQ</strong></td><td class="confluenceTd">ether1:9586; sfp28-1 - sfp28-12:9570; qsfp28-1-1 - qsfp28-2-4:9570</td></tr><tr><td class="confluenceTd"><strong>CRS109-8G-1S</strong></td><td class="confluenceTd">ether1-ether8:4064; sfp1:4064</td></tr><tr><td class="confluenceTd"><strong>CRS125-24G-1S</strong></td><td class="confluenceTd">ether1-ether24:4064; sfp1:4064</td></tr><tr><td class="confluenceTd"><strong>CRS112-8G-4S, CRS112-8P-4S</strong></td><td class="confluenceTd">ether1-ether8:9204; sfp9-sfp12:9204</td></tr><tr><td class="confluenceTd"><strong>CRS106-1C-5S</strong></td><td class="confluenceTd">sfp1-sfp5:9204; combo1:9204</td></tr><tr><td class="confluenceTd"><strong>CRS210-8G-2S+</strong></td><td class="confluenceTd">ether1-ether8:9204; sfp-sfpplus1:9204; sfpplus2:9204</td></tr><tr><td class="confluenceTd"><strong>CRS212-1G-10S-1S+</strong></td><td class="confluenceTd">ether1:9204; sfp1-sfp10:9204; sfpplus1:9204</td></tr><tr><td class="confluenceTd"><strong>CRS226-24G-2S+</strong></td><td class="confluenceTd">ether1-ether24:9204; sfp-sfpplus1:9204; sfpplus2:9204</td></tr><tr><td class="confluenceTd"><strong>CRS326-24G-2S+, CSS326-24G-2S+</strong></td><td class="confluenceTd">ether1-ether24:10218; sfp-sfpplus1:10218; sfpplus2:10218</td></tr><tr><td class="confluenceTd"><strong>CRS317-1G-16S+</strong></td><td class="confluenceTd">ether1:10218; sfp-sfpplus1-sfp-sfpplus16:10218</td></tr><tr><td class="confluenceTd"><strong>CRS328-24P-4S+</strong></td><td class="confluenceTd">ether1-ether24:10218; sfp-sfpplus1-sfp-sfpplus4:10218</td></tr><tr><td class="confluenceTd"><strong>CRS328-4C-20S-4S+</strong></td><td class="confluenceTd">combo1-combo4:10218; sfp1-sfp20:10218; sfp-sfpplus1-sfp-sfpplus4:10218</td></tr><tr><td class="confluenceTd"><strong>CRS305-1G-4S+</strong></td><td class="confluenceTd">ether1:10218; sfp-sfpplus1-sfp-sfpplus4:10218</td></tr><tr><td class="confluenceTd"><strong>CRS304-4XG</strong></td><td class="confluenceTd">ether1-ether4:10218; ether5:9676</td></tr><tr><td class="confluenceTd"><strong>CRS309-1G-8S+</strong></td><td class="confluenceTd">ether1:10218; sfp-sfpplus1-sfp-sfpplus8:10218</td></tr><tr><td class="confluenceTd"><strong><span style="color:var(--ds-text,#172b4d);">netFiber 9/IN (CRS310-1G-5S-4S+)</span></strong></td><td class="confluenceTd">sfp1-sfp5:10218; sfp-sfpplus1-sfp-sfpplus4:10218</td></tr><tr><td style="text-align: left;vertical-align: top;" class="confluenceTd"><strong>CRS310-8G+2S+IN</strong></td><td class="confluenceTd">ether1-ether8:10218; sfp-sfpplus1-sfp-sfpplus2:10218</td></tr><tr><td class="confluenceTd"><strong>CRS312-4C+8XG</strong></td><td class="confluenceTd">combo1-combo4:10218; ether1-ether8:10218; ether9:2028</td></tr><tr><td class="confluenceTd"><strong><span style="color:var(--ds-text,#172b4d);">netPower 15FR (CRS318-1Fi-15Fr-2S)</span></strong></td><td class="confluenceTd">ether1-ether16:10218; sfp1-sfp2:10218</td></tr><tr><td class="confluenceTd"><strong><span style="color:var(--ds-text,#172b4d);">netPower 16P (CRS318-16P-2S+)</span></strong></td><td class="confluenceTd">ether1-ether16:10218; sfp-sfpplus1-sfp-sfpplus2:10218</td></tr><tr><td class="confluenceTd"><strong>CRS326-4C+20G+2Q+</strong></td><td class="confluenceTd">combo1-combo4:10218; ether1-ether20:10218; qsfpplus1-1-qsfpplus2-4:10218; ether21:2028</td></tr><tr><td class="confluenceTd"><strong>CRS326-24S+2Q+</strong></td><td class="confluenceTd">sfp-sfpplus1-sfp-sfpplus24:10218; qsfpplus1-1-qsfpplus2-4:10218; ether1:2028</td></tr><tr><td class="confluenceTd"><strong>CRS354-48G-4S+2Q+, CRS354-48P-4S+2Q+</strong></td><td class="confluenceTd">sfp-sfpplus1-sfp-sfpplus4:10218; qsfpplus1-1-qsfpplus2-4:10218; ether1-ether48:10218; ether49:2028</td></tr><tr><td class="confluenceTd"><strong><span style="color:var(--ds-text,#172b4d);">CRS504-4XQ-IN</span></strong></td><td class="confluenceTd">ether1:2028; qsfp28-1-1 - qsfp28-4-4:10218</td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">CRS510-8XS-2XQ-IN</strong></td><td class="confluenceTd">ether1:2028; sfp28-1 - sfp28-8:10218; qsfp28-1-1 - qsfp28-2-4:10218</td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>CRS518-16XS-2XQ</strong></td><td class="confluenceTd">ether1:2028; sfp28-1 - sfp28-16:10218; qsfp28-1-1 - qsfp28-2-4:10218</td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>CSS610-8G-2S+, CSS610-8P-2S+</strong></td><td class="confluenceTd">ether1-ether8:10218; sfp-sfpplus1-sfp-sfpplus2:10218</td></tr><tr><td class="confluenceTd"><strong>D52G-5HacD2HnD (hAP ac²)</strong></td><td class="confluenceTd">ether1-ether5:9124</td></tr><tr><td class="confluenceTd"><strong>C52iG-5HaxD2HaxD (hAP ax<sup>2</sup>)</strong></td><td class="confluenceTd">ether1-ether5:9214</td></tr><tr><td class="confluenceTd"><strong>C53UiG+5HPaxD2HPaxD (hAP ax<sup>3</sup>)</strong></td><td class="confluenceTd">ether1-ether5:9214</td></tr><tr><td class="confluenceTd"><strong>L41G-2axD (hAP ax lite)</strong></td><td class="confluenceTd">ether1-ether4:2026</td></tr><tr><td class="confluenceTd"><strong>cAP ac</strong></td><td class="confluenceTd">ether1-ether2:9124</td></tr><tr><td class="confluenceTd"><strong>GPEN21</strong></td><td class="confluenceTd">ether1-ether2:10222; sfp1: 10222</td></tr><tr><td class="confluenceTd"><strong>wAP60G, LHG60G</strong></td><td class="confluenceTd">ether1:9124</td></tr><tr><td class="confluenceTd"><strong>RB260GS series, CSS106-5G-1S, CSS106-1G-4P-1S</strong></td><td class="confluenceTd">ether1-ether5:9198; sfp1:9198</td></tr><tr><td class="confluenceTd"><strong>RBFTC11</strong></td><td class="confluenceTd">ether1:4046; sfp1:4046</td></tr><tr><td class="confluenceTd"><strong>RBM33G</strong></td><td class="confluenceTd">ether1-ether3:2026</td></tr><tr><td class="confluenceTd"><strong>RBM11G</strong></td><td class="confluenceTd">ether1:2026</td></tr><tr><td class="confluenceTd"><strong>RB760iGS</strong></td><td class="confluenceTd">ether1-ether5:2026; sfp1:2026</td></tr><tr><td class="confluenceTd"><strong><span style="color:var(--ds-text,#707070);">E50UG</span></strong></td><td class="confluenceTd">ether1:2048; ether2-ether5:2026</td></tr><tr><td class="confluenceTd"><strong>RB411 series</strong></td><td class="confluenceTd">ether1:1526</td></tr><tr><td class="confluenceTd"><strong>RB433 series, RB450, RB493 series </strong></td><td class="confluenceTd">ether1:1526; ether2-ether3:1522</td></tr><tr><td class="confluenceTd"><strong>RB450Gx4</strong></td><td class="confluenceTd">ether1-ether5:9214</td></tr><tr><td class="confluenceTd"><strong>RB411GL</strong></td><td class="confluenceTd">ether1:1520</td></tr><tr><td class="confluenceTd"><strong>RB433GL, RB435G , RB450G, RB493G</strong></td><td class="confluenceTd">ether1-ether3:1520</td></tr><tr><td class="confluenceTd"><strong>RB800</strong></td><td class="confluenceTd">ether1-ether2:9500; ether3:9116</td></tr><tr><td class="confluenceTd"><strong>RB850Gx2</strong></td><td class="confluenceTd">ether1-ether5:1580</td></tr><tr><td class="confluenceTd"><strong>RB921UAGS, RB922UAGS</strong></td><td class="confluenceTd">ether1:4076; sfp1:4076</td></tr><tr><td class="confluenceTd"><strong>D23UGS-5HPacD2HnD (NetMetal ac²)</strong></td><td class="confluenceTd">ether1:9214 ; sfp1:9214</td></tr><tr><td class="confluenceTd"><strong>RB953GS</strong></td><td class="confluenceTd">ether1-ether2:4074; sfp1:4074; sfp2:4076</td></tr><tr><td class="confluenceTd"><strong>RB2011 series</strong></td><td class="confluenceTd">ether1-ether5:4074; ether6-ether10:2028; sfp1:4074</td></tr><tr><td class="confluenceTd"><strong>RB3011 series</strong></td><td class="confluenceTd">ether1-ether5:8156; ether6-ether10:8156; sfp1:8158</td></tr><tr><td class="confluenceTd"><p><strong>RB5009 series</strong></p></td><td class="confluenceTd">ether1-ether8: 9796; sfp-sfpplus1: 9796</td></tr><tr><td class="confluenceTd"><p><strong>L009 series</strong></p></td><td class="confluenceTd">ether1: 8158; ether2-ether8: 8154; sfp1: 8154</td></tr><tr><td class="confluenceTd"><strong>RB44Ge</strong></td><td class="confluenceTd">ether1-ether4:9116</td></tr></tbody></table></div><p><span style="color:var(--ds-text,#333333);">All wireless interfaces in RouterOS (including Nstreme2) support 2290 byte L2MTU.</span></p><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><span style="color:var(--ds-text,#333333);">L2MTU configuration changes evoke all interface reloads (link down/link up) due to necessary internal processes.</span><br/><span style="color:var(--ds-text,#333333);">It is recommended to configure L2MTU with caution by keeping in mind that it can cause short interruption with connected devices.</span></p></div></div><h2 id="MTUinRouterOS-MPLS/Layer-2.5/L2.5MTU"><span class="mw-headline">MPLS/Layer-2.5/L2.5 MTU</span></h2><p>Configured in the &quot;/mpls interface&quot; menu, specifies the maximal size of the packet, including MPLS labels, that is allowed to send out by the particular interface.</p><p>Make sure that MPLS MTU is smaller or equal to L2MTU. MPLS MTU affects packets depending on what action the MPLS router is performing. It is strongly recommended that MPLS MTU is configured to the same value on all routers forming the MPLS cloud because of the effects MPLS MTU has on MPLS switched packets. This requirement means that all interfaces participating in the MPLS cloud must be configured to the smallest MPLS MTU values among participating interfaces, therefore care must be taken to properly select the hardware to be used.</p><p>You can read more about MPLS MTU <a href="https://help.mikrotik.com/docs/display/ROS/MPLS+MTU%2C+Forwarding+and+Label+Bindings" rel="nofollow">here.</a></p><h3 id="MTUinRouterOS-MPLSSwitching"><span class="mw-headline">MPLS Switching</span></h3><p>If the packet with labels included is bigger than MPLS MTU, MPLS tries to guess the protocol that is carried inside the MPLS frame:</p><ul><li>If this is an IP packet, MPLS produces an ICMP Need Fragment error. This behavior mimics IP protocol behavior. Note that this ICMP error is not routed back to the originator of a packet but is switched towards the end of LSP so that the egress router can route it back.</li><li>If this is not an IP packet, MPLS simply drops it, because it does not know how to interpret the contents of the packet. This feature is very important in situations where MPLS applications such as VPLS are used (where frames that are MPLS tagged are not IP packets, but e.g. encapsulated Ethernet frames as in the case of VPLS) - if somewhere along the LSP MPLS MTU will be less than packet size prepared by ingress router, frames will simply get dropped.</li></ul><h3 id="MTUinRouterOS-IPingress"><span class="mw-headline">IP ingress</span></h3><p>When a router first introduces a label (or labels) on an IP packet, and the resulting packet size including MPLS labels exceeds MPLS MTU, the router behaves as if interface MTU was exceeded - either fragment packet in fragments that do not exceed MPLS MTU when labels are attached (if IP Don't Fragment is not set) or generate ICMP Need Fragmentation error that is sent back to the originator.</p><h3 id="MTUinRouterOS-VPLSingress"><span class="mw-headline">VPLS ingress</span></h3><p>When the router encapsulates the Ethernet frame for forwarding over VPLS pseudowire, it checks if packet size with VPLS Control Word (4 bytes) and any necessary labels (usually 2 labels - 8 bytes), exceeds MPLS MTU of the outgoing interface. If it does, VPLS fragments packets so that it honors the MPLS MTU of the outgoing interface. A packet is defragmented at the egress point of the VPLS pseudowire.</p><h1 id="MTUinRouterOS-SetupExamples">Setup Examples</h1><p><br/></p><p><span style="color:var(--ds-text,#333333);">In these examples, we will take a look at frames entering and leaving the router via Ethernet interfaces.</span></p><h2 id="MTUinRouterOS-SimpleRouting"><span style="color:var(--ds-text,#333333);">Simple Routing</span></h2><p><span style="color:var(--ds-text,#333333);">The image shows the packet MTU size for simple routing, packets size is not modified.</span></p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/21725296/135856348.jpg" data-image-src="attachments/21725296/135856348.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856348" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MTUSimpleRouting.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="21725296" data-linked-resource-container-version="24" tabindex="0" alt=""></span></p><h2 id="MTUinRouterOS-RoutingwithVLANEncap"><span class="mw-headline">Routing with VLAN Encap</span></h2><p><span class="mw-headline"><span style="color:var(--ds-text,#333333);">Each VLAN tag is 4 bytes long, the VLAN tag is added by a router. L2-MTU is increased by 4 bytes.</span></span></p><p><span class="mw-headline"><span style="color:var(--ds-text,#333333);"><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/21725296/135856349.jpg" data-image-src="attachments/21725296/135856349.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856349" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MTUVLANENCAP.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="21725296" data-linked-resource-container-version="24" tabindex="0" alt=""></span><br/></span></span></p><h2 id="MTUinRouterOS-SimpleMPLSwithTags"><span class="mw-headline">Simple MPLS with Tags</span></h2><p><br/></p><p><span class="mw-headline"><span style="color:var(--ds-text,#333333);">When MPLS is used as a plain replacement for IP routing, only one label is attached to every packet, therefore packet size increases by 4 bytes, we have the situation with two MPLS labels. In order to be able to forward standard size (1500 bytes) IP packets without fragmentation, MPLS MTU must be set to at least 1508 for two MPLS labels.</span></span></p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/21725296/135856350.jpg" data-image-src="attachments/21725296/135856350.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856350" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MTUMPLS2Tags.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="21725296" data-linked-resource-container-version="24" tabindex="0" alt=""></span></p><h2 id="MTUinRouterOS-VPLSTunnel"><span class="mw-headline">VPLS Tunnel</span></h2><p><span class="mw-headline"><span style="color:var(--ds-text,#333333);">Two MPLS labels are present when a remote endpoint is not directly attached. One MPLS label is used to get to a remote endpoint, the second label is used to identify the VPLS tunnel.</span></span></p><p><span class="confluence-embedded-file-wrapper image-center-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-center" draggable="false" height="210" src="attachments/21725296/135856351.jpg" data-image-src="attachments/21725296/135856351.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856351" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="MTUVPLS.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="21725296" data-linked-resource-container-version="24" tabindex="0" alt=""></span></p><h1 id="MTUinRouterOS-AdvancedSetupExamples"><span class="mw-headline">Advanced Setup Examples</span></h1><p><br/></p><p>In this example, we will take a closer look at the required L2MTU of all Ethernet-like interfaces including Bridge, VLAN, and VPLS interfaces.</p><p>In this setup we will have 3 routers:</p><ul><li>Q-in-Q router - this router will receive a standard 1500 byte Ethernet frame and will add two VLAN tags to the packet. Then packet will be sent out via an Ethernet network to the second router</li></ul><ul><li>VPLS router - this router will remove the outer VLAN tag and will bridge the packet with the remaining VLAN tag with the VPLS tunnel. VPLS tunnel will take a packet through the MPLS network to the third router.</li></ul><ul><li>MPLS Edge router - will remove VPLS and VLAN tags and bridge packet to the client Ethernet network.</li></ul><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/21725296/135856352.jpg" data-image-src="attachments/21725296/135856352.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856352" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="L2MTU_example.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="21725296" data-linked-resource-container-version="24" tabindex="0" alt=""></span></p><p><br/></p><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773773.png">300px-MTU_general_explanation.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773774.png">300px-MTU_general_explanation.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773775.png">300px-MTU_general_explanation.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773772.png">300px-MTU_general_explanation.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773781.png">MTUSimpleRouting.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773782.png">740px-MTUVLANENCAP.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773783.png">740px-MTUMPLS2Tags.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773784.png">740px-MTUVPLS.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/22773785.png">740px-L2MTU_example.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/135856347.jpg">MTU_general_explanation.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/135856348.jpg">MTUSimpleRouting.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/135856349.jpg">MTUVLANENCAP.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/135856350.jpg">MTUMPLS2Tags.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/135856351.jpg">MTUVPLS.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/21725296/135856352.jpg">L2MTU_example.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:54</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
