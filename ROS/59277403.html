<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : Bridge IGMP/MLD snooping</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Bridging-and-Switching_328068.html">Bridging and Switching</a></span>
                            </li>
                                                    <li>
                                <span><a href="Bridging-and-Switching-Case-Studies_119144611.html">Bridging and Switching Case Studies</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : Bridge IGMP/MLD snooping
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Edgars P.</span>, last updated by <span class='editor'> Guntis G.</span> on Apr 05, 2024
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742024797 {padding: 0px;}
div.rbtoc1747742024797 ul {margin-left: 0px;}
div.rbtoc1747742024797 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742024797'>
<ul class='toc-indentation'>
<li><a href='#BridgeIGMP/MLDsnooping-Introduction'>Introduction</a></li>
<li><a href='#BridgeIGMP/MLDsnooping-Configurationoptions'>Configuration options</a></li>
<li><a href='#BridgeIGMP/MLDsnooping-Monitoringandtroubleshooting'>Monitoring and troubleshooting</a></li>
<li><a href='#BridgeIGMP/MLDsnooping-Configurationexamples'>Configuration examples</a>
<ul class='toc-indentation'>
<li><a href='#BridgeIGMP/MLDsnooping-BasicIGMPsnoopingconfiguration'>Basic IGMP snooping configuration</a></li>
<li><a href='#BridgeIGMP/MLDsnooping-IGMPsnoopingconfigurationwithVLANs'>IGMP snooping configuration with VLANs</a></li>
<li><a href='#BridgeIGMP/MLDsnooping-StaticMDBentries'>Static MDB entries</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="BridgeIGMP/MLDsnooping-Introduction">Introduction</h1><hr/><p>IGMP (Internet Group Management Protocol) and MLD (Multicast Listener Discovery) snooping allow the bridge to listen to IGMP/MLD communication and make forwarding decisions for multicast traffic based on the received information. By default, bridges are flooding multicast traffic to all bridge ports just like broadcast traffic, which might not always be the best scenario (e.g. for multicast video traffic or SDVoE applications). The IGMP/MLD snooping tries to solve the problem by forwarding the multicast traffic only to ports where clients are subscribed to, see an IGMP/MLD network concept below. RouterOS bridge can process IGMP v1/v2/v3 and MLD v1/v2 packets. The implemented bridge IGMP/MLD snooping is based on RFC4541, and IGMP/MLD protocols are specified on RFC1112 (IGMPv1) RFC2236 (IGMPv2), RFC3376 (IGMPv3), RFC2710 (MLDv1), RFC3810 (MLDv2).</p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Source-specific multicast forwarding is not supported for IGMP v3 and MLD v2.</p></div></div><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/59277403/59277438.png" data-image-src="attachments/59277403/59277438.png" data-unresolved-comment-count="0" data-linked-resource-id="59277438" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="IGMP.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59277403" data-linked-resource-container-version="39" tabindex="0" alt=""></span></p><p>The bridge will process the IGMP/MLD messages only when <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">igmp-snooping</span></code> is enabled. Additionally, the bridge should have an active IPv6 address to process MLD packets. At first, the bridge does not restrict the multicast traffic and all multicast packets get flooded. Once IGMP/MLD querier is detected by receiving an IGMP/MLD query message (the query message can be received by an external multicast router or locally by bridge interface with enabled <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">multicast-querier</span></code>), only then the bridge will start to restrict unknown IP multicast traffic and forward the known multicast from the multicast database (MDB). The IGMP and MLD querier detection is independent, which means that detecting only IGMP querier will not affect IPv6 multicast forwarding and vice versa. The querier detection also does not restrict the forwarding of non-IP and link-local multicast groups, like 224.0.0.0/24 and <span style="color:var(--ds-text,#172b4d);">ff02::1.</span></p><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>CRS3xx series devices with Marvell-98DX3236, Marvell-98DX224S or Marvell-98DX226S switch chips are not able to distinguish non-IP/IPv4/IPv6 multicast packets once IGMP or MLD querier is detected. It means that the switch will stop forwarding all unknown non-IP/IPv4/IPv6 multicast traffic when the querier is detected. This does not apply to certain link-local multicast address ranges, like 224.0.0.0/24 or <span style="color:var(--ds-text,#172b4d);">ff02::1.</span></p></div></div><h1 id="BridgeIGMP/MLDsnooping-Configurationoptions">Configuration options</h1><hr/><p>This section describes the IGMP and MLD snooping bridge configuration options.</p><p><strong>Sub-menu:</strong> <code>/interface bridge</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Property</p></th><th style="text-align: left;" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><strong>igmp-snooping</strong><span> </span>(<em>yes | no</em>; Default:<span> </span><strong>no</strong>)</td><td style="text-align: left;" class="confluenceTd">Enables IGMP and MLD snooping.</td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>igmp-version</strong><span> </span>(<em>2 | 3</em>; Default:<span> </span><strong>2</strong>)</td><td style="text-align: left;" class="confluenceTd">Selects the IGMP version in which IGMP membership queries will be generated when the bridge interface is acting as an IGMP querier. This property only has an effect when<span> <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span> and <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span> is set to <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</span></td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>last-member-interval</strong><span> </span>(<em>time</em>; Default:<span> </span><strong>1s</strong>)</td><td style="text-align: left;" class="confluenceTd"><p><span style="color:var(--ds-text,#172b4d);">When the last client on the bridge port unsubscribes to a multicast group and the bridge is acting as an active querier, the bridge will send group-specific IGMP/MLD query, to make sure that no other client is still subscribed. The setting changes the response time for these queries. In case no membership reports are received in a certain time period (<code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">last-member-interval</span></code> * <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">last-member-query-count</span></code>), the multicast group is removed from the multicast database (MDB).</span></p><p>If the bridge port is configured with <span style="color:var(--ds-background-accent-green-bolder,#1f845a);">fast-leave</span>, the multicast group is removed right away without sending any queries.</p><p><span style="color:var(--ds-text,#172b4d);">This property only has an effect when</span> <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>and<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</p></td></tr><tr><td colspan="1" class="confluenceTd"><strong>last-member-query-count</strong><span> </span>(<em>integer: 0..4294967295</em>; Default:<span> </span><strong>2</strong>)</td><td colspan="1" class="confluenceTd">How many times should<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>last-member-interval</code></span><span> </span>pass until the IGMP/MLD snooping bridge stops forwarding a certain multicast stream. This property only has an effect when <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>and<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>membership-interval</strong><span> </span>(<em>time</em>; Default:<span> </span><strong>4m20s</strong>)</td><td colspan="1" class="confluenceTd">The amount of time after an entry in the Multicast Database (MDB) is removed if no IGMP/MLD membership reports are received on a bridge port. This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>mld-version</strong><span> </span>(<em>1 | 2</em>; Default:<span> </span><strong>1</strong>)</td><td colspan="1" class="confluenceTd">Selects the MLD version in which MLD membership queries will be generated, when the bridge interface is acting as an MLD querier. This property only has an effect when the bridge has an active IPv6 address, <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>and<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>multicast-querier</strong><span> </span>(<em>yes | no</em>; Default:<span> </span><strong>no</strong>)</td><td colspan="1" class="confluenceTd"><p>Multicast querier generates periodic IGMP/MLD general membership queries to which all IGMP/MLD capable devices respond with an IGMP/MLD membership report, usually a PIM (multicast) router or IGMP proxy generates these queries.</p><p>By using this property you can make an IGMP/MLD snooping enabled bridge to generate IGMP/MLD general membership queries. This property should be used whenever there is no active querier (PIM router or IGMP proxy) in a Layer2 network. Without a multicast querier in a Layer2 network, the Multicast Database (MDB) is not being updated, the learned entries will timeout and IGMP/MLD snooping will not function properly.</p><p>Only untagged IGMP/MLD general membership queries are generated, IGMP queries are sent with IPv4 0.0.0.0 source address, MLD queries are sent with IPv6 link-local address of the bridge interface. The bridge will not send queries if an external IGMP/MLD querier is detected (see the monitoring values <code>igmp-querier</code> and <code>mld-querier</code>).</p><p>This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</p></td></tr><tr><td colspan="1" class="confluenceTd"><strong>multicast-router</strong><span> </span>(<em>disabled | permanent | temporary-query</em>; Default:<span> </span><strong>temporary-query</strong>)</td><td colspan="1" class="confluenceTd">A multicast router port is a port where a multicast router or querier is connected. On this port, unregistered multicast streams and IGMP/MLD membership reports will be sent. This setting changes the state of the multicast router for a bridge interface itself. This property can be used to send IGMP/MLD membership reports and multicast traffic to the bridge interface for further multicast routing or proxying. This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span><span>is set to</span><span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span><span>.</span><ul><li><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>disabled</code> </span>- disabled multicast router state on the bridge interface. Unregistered multicast streams and IGMP/MLD membership reports are not sent to the bridge interface regardless of what is configured on the bridge interface.</li><li><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>permanent</code> </span>- enabled multicast router state on the bridge interface. Unregistered multicast streams and IGMP/MLD membership reports are sent to the bridge interface itself regardless of what is configured on the bridge interface.</li><li><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>temporary-query</code></span><span> </span>- automatically detect multicast router state on the bridge interface using IGMP/MLD queries.</li></ul></td></tr><tr><td colspan="1" class="confluenceTd"><strong>querier-interval</strong><span> </span>(<em>time</em>; Default:<span> </span><strong>4m15s</strong>)</td><td colspan="1" class="confluenceTd">Changes the timeout period for detected querier and multicast-router ports. This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>query-interval</strong><span> </span>(<em>time</em>; Default:<span> </span><strong>2m5s</strong>)</td><td colspan="1" class="confluenceTd">Changes the interval on how often IGMP/MLD general membership queries are sent out when the bridge interface is acting as an IGMP/MLD querier. The interval takes place when the last startup query is sent. This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>and<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>query-response-interval</strong><span> </span>(<em>time</em>; Default:<span> </span><strong>10s</strong>)</td><td colspan="1" class="confluenceTd"><span style="color:var(--ds-text,#172b4d);">The setting changes the response time for general IGMP/MLD queries when the bridge is acting as an IGMP/MLD querier. </span>This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>and<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>startup-query-count</strong><span> </span>(<em>integer: 0..4294967295</em>; Default:<span> </span><strong>2</strong>)</td><td colspan="1" class="confluenceTd">Specifies how many times general IGMP/MLD queries must be sent when the bridge interface is enabled or active querier timeouts. This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>and<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>startup-query-interval</strong><span> </span>(<em>time</em>; Default:<span> </span><strong>31s250ms</strong>)</td><td colspan="1" class="confluenceTd">Specifies the interval between startup general IGMP/MLD queries. This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>and<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr></tbody></table></div><p><strong>Sub-menu:</strong> <code>/interface bridge</code> port</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col style="width: 223.0px;"/><col style="width: 1542.0px;"/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Property</p></th><th style="text-align: left;" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><strong>fast-leave</strong><span> </span>(<em>yes | no</em>; Default:<span> </span><strong>no</strong>)</td><td style="text-align: left;" class="confluenceTd">Enables IGMP/MLD fast leave feature on the bridge port. The bridge will stop forwarding multicast traffic to a bridge port when an IGMP/MLD leave message is received. This property only has an effect when<span> </span><code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">igmp-snooping</span></code><span> </span>is set to<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span>.</td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>multicast-router</strong><span> </span>(<em>disabled | permanent | temporary-query</em>; Default:<span> </span><strong>temporary-query</strong>)</td><td style="text-align: left;" class="confluenceTd">A multicast router port is a port where a multicast router or querier is connected. On this port, unregistered multicast streams and IGMP/MLD membership reports will be sent. This setting changes the state of the multicast router for bridge ports. This property can be used to send IGMP/MLD membership reports and multicast streams to certain bridge ports for further multicast routing or proxying. This property only has an effect when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span><span>is set to</span><span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>yes</code></span><span>.</span><ul><li><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>disabled</code> </span>- disabled multicast router state on the bridge port. Unregistered multicast streams and IGMP/MLD membership reports are not sent to the bridge port regardless of what is connected to it.</li><li><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>permanent</code> </span>- enabled multicast router state on the bridge port. Unregistered multicast and IGMP/MLD membership reports are sent to the bridge port regardless of what is connected to it.</li><li><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>temporary-query</code></span><span> </span>- automatically detect multicast router state on the bridge port using IGMP/MLD queries.</li></ul></td></tr><tr><td colspan="1" class="confluenceTd"><strong>unknown-multicast-flood</strong><span> </span>(<em>yes | no</em>; Default:<span> </span><strong>yes</strong>)</td><td colspan="1" class="confluenceTd"><p>Changes the multicast flood option on the bridge port, only controls the egress traffic. When enabled, the bridge allows flooding multicast packets to the specified bridge port, but when disabled, the bridge restricts multicast traffic from being flooded to the specified bridge port. The setting affects all multicast traffic, this includes non-IP, IPv4, IPv6, and the link-local multicast ranges (e.g. 224.0.0.0/24 and <span style="color:var(--ds-text,#172b4d);">ff02::1</span>).</p><p>Note that when <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span> is enabled and IGMP/MLD querier is detected, the bridge will automatically restrict unknown IP multicast from being flooded, so the setting is not mandatory for IGMP/MLD snooping setups.</p><p>When using this setting together with <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span>, the only multicast traffic that is allowed on the bridge port is the known multicast from the MDB table. </p></td></tr></tbody></table></div><p><strong>Sub-menu:</strong><span> </span><code>/interface bridge mdb</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Property</p></th><th style="text-align: left;" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><strong>bridge</strong><span> (<em>name</em>; Default: )</span></td><td style="text-align: left;" class="confluenceTd">The bridge interface to which the MDB entry is going to be assigned.</td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>disabled</strong><span> (<em>yes | no</em>; Default: <strong>no</strong>)</span></td><td style="text-align: left;" class="confluenceTd">Disables or enables static MDB entry.</td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>group</strong><span> </span>(<em>ipv4 | ipv6 address</em>; Default: )</td><td style="text-align: left;" class="confluenceTd">The IPv4 or IPv6 multicast address. Static entries for<span> </span><span style="color:var(--ds-text,#172b4d);">link-local multicast groups 224.0.0.0/24 and<span> </span></span><span style="color:var(--ds-text,#172b4d);">ff02::1 cannot be created, as these packets are always flooded on all ports and VLANs. </span></td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>ports</strong><span> </span>(<em>name</em>; Default: )</td><td style="text-align: left;" class="confluenceTd">The list of bridge ports to which the multicast group will be forwarded.</td></tr><tr><td style="text-align: left;" class="confluenceTd"><strong>vid</strong><span> </span>(<em>integer: 1..4094</em>; Default: )</td><td style="text-align: left;" class="confluenceTd">The VLAN ID on which the MDB entry will be created, only applies when <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">vlan-filtering</span></code><span> </span>is enabled. When the VLAN ID is not specified, the entry will work in shared-VLAN mode and dynamically apply on all defined VLAN IDs for particular ports.</td></tr></tbody></table></div><h1 id="BridgeIGMP/MLDsnooping-Monitoringandtroubleshooting">Monitoring and troubleshooting</h1><hr/><p>This section describes the IGMP/MLD snooping bridge monitoring and troubleshooting options. </p><p><span class="mw-headline">To monitor learned multicast database (MDB) entries, use the <code><span style="color:var(--ds-icon-accent-magenta,#cd519d);">print</span></code> command.</span></p><p><strong>Sub-menu:</strong><span> </span><code>/interface bridge mdb</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Property</p></th><th style="text-align: left;" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><strong>bridge</strong><span> </span>(<em>read-only: <em>name</em></em>)</td><td colspan="1" style="text-align: left;" class="confluenceTd">Shows the bridge interface the entry belongs to.</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><strong>group</strong><span> </span>(<em>read-only: </em><em>ipv4 | ipv6 address</em>)</td><td colspan="1" style="text-align: left;" class="confluenceTd">Shows a multicast group address.</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><strong>on-ports</strong><span> </span>(<em>read-only: name</em>)</td><td colspan="1" style="text-align: left;" class="confluenceTd">Shows the bridge ports that are subscribed to the certain multicast group.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>vid</strong><span> </span>(<em>read-only: integer</em>)</td><td colspan="1" class="confluenceTd">Shows the VLAN ID for the multicast group, only applies when<code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"> vlan-filtering</span></code> is enabled.</td></tr></tbody></table></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /interface bridge mdb print 
Flags: D - DYNAMIC
Columns: GROUP, VID, ON-PORTS, BRIDGE
 #   GROUP              VID  ON-PORTS  BRIDGE 
 0 D ff02::2              1  bridge1   bridge1
 1 D ff02::6a             1  bridge1   bridge1
 2 D ff02::1:ff00:0       1  bridge1   bridge1
 3 D ff02::1:ff01:6a43    1  bridge1   bridge1
 4 D 229.1.1.1           10  ether2    bridge1
 5 D 229.2.2.2           10  ether3    bridge1
                             ether2           
 6 D ff02::2             10  ether5    bridge1
                             ether3           
                             ether2           
                             ether4            </pre>
</div></div><p><span class="mw-headline">To monitor the current status of a bridge interface, use the<span> </span></span><span style="color:var(--ds-icon-accent-magenta,#cd519d);"><code>monitor</code></span><span> </span><span class="mw-headline">command.</span></p><p><strong>Sub-menu:</strong><span> </span><code>/interface bridge</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Property</p></th><th style="text-align: left;" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><strong>igmp-querier</strong><span> </span>(<em>none<span> </span></em>|<span> </span><em>interface &amp; IPv4 address</em>)</td><td colspan="1" style="text-align: left;" class="confluenceTd">Shows a bridge port and source IP address from the detected IGMP querier. Only shows detected external IGMP querier, local bridge IGMP querier (including IGMP proxy and PIM) will not be displayed. Monitoring value appears only when<span> </span><code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">igmp-snooping</span></code><span> </span>is enabled.</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><strong>mld-querier</strong><span> </span>(<em>none<span> </span></em>|<span> </span><em>interface &amp; IPv6 address</em>)</td><td colspan="1" style="text-align: left;" class="confluenceTd">Shows a bridge port and source IPv6 address from the detected MLD querier. Only shows detected external MLD querier, local bridge MLD querier will not be displayed. Monitoring value appears only when<span> </span><code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">igmp-snooping</span></code><span> </span>is enabled and the bridge has an active IPv6 address.</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><strong>multicast-router</strong><span> </span>(<em>yes | no</em>)</td><td colspan="1" style="text-align: left;" class="confluenceTd">Shows if a multicast router is detected on the bridge interface. Monitoring value appears only when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>is enabled.</td></tr></tbody></table></div><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /interface bridge monitor bridge1
                  state: enabled
    current-mac-address: 64:D1:54:C7:3A:59
            root-bridge: yes
         root-bridge-id: 0x8000.64:D1:54:C7:3A:59
         root-path-cost: 0
              root-port: none
             port-count: 3
  designated-port-count: 3
           fast-forward: no
       multicast-router: no
           igmp-querier: ether2 192.168.10.10
            mld-querier: ether2 fe80::e68d:8cff:fe39:3824</pre>
</div></div><p><span class="mw-headline">To monitor the current status of bridge ports, use the<span> </span></span><span style="color:var(--ds-icon-accent-magenta,#cd519d);"><code>monitor</code></span><span> </span><span class="mw-headline">command.</span></p><p><strong>Sub-menu:</strong><span> </span><code>/interface bridge port</code></p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup><col/><col/></colgroup><thead><tr><th style="text-align: left;" class="confluenceTh"><p>Property</p></th><th style="text-align: left;" class="confluenceTh"><p>Description</p></th></tr></thead><tbody><tr><td style="text-align: left;" class="confluenceTd"><strong>multicast-router</strong><span> </span>(<em>yes | no</em>)</td><td style="text-align: left;" class="confluenceTd">Shows if a multicast router is detected on the port. Monitoring value appears only when<span> </span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>igmp-snooping</code></span><span> </span>is enabled.</td></tr></tbody></table></div><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] &gt; /interface bridge port monitor [find]
              interface: ether2          ether3          ether4
                 status: in-bridge       in-bridge       in-bridge
            port-number: 1               2               3
                   role: designated-port designated-port designated-port
              edge-port: no              yes             yes
    edge-port-discovery: yes             yes             yes
    point-to-point-port: yes             yes             yes
           external-fdb: no              no              no
           sending-rstp: yes             yes             yes
               learning: yes             yes             yes
             forwarding: yes             yes             yes
       multicast-router: yes             no              no
       hw-offload-group: switch1         switch1         switch1</pre>
</div></div><h1 id="BridgeIGMP/MLDsnooping-Configurationexamples">Configuration examples</h1><hr/><p>Below are described the most common configuration examples. Some examples are using a bridge with VLAN filtering, so make sure to understand the filtering principles first -<span> </span><a href="https://help.mikrotik.com/docs/display/ROS/Bridging+and+Switching#BridgingandSwitching-BridgeVLANFiltering" rel="nofollow">bridge VLAN filtering</a>, <a href="https://help.mikrotik.com/docs/display/ROS/Bridge+VLAN+Table" rel="nofollow" style="text-decoration: none;">bridge VLAN table</a>.</p><h2 id="BridgeIGMP/MLDsnooping-BasicIGMPsnoopingconfiguration">Basic IGMP snooping configuration</h2><p>The first example consists only of a single IGMP snooping bridge, a single multicast source device, and a couple of multicast client devices. See a network scheme below.</p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/59277403/61046788.png" data-image-src="attachments/59277403/61046788.png" data-unresolved-comment-count="0" data-linked-resource-id="61046788" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="IGMPBasic.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59277403" data-linked-resource-container-version="39" tabindex="0" alt=""></span></p><p>First, create a bridge interface with enabled IGMP snooping. In this example, there is no active IGMP querier (no multicast router or proxy), so a local IGMP querier must be enabled on the same bridge. This can be done with a <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>multicast-querier</code></span> setting. If there is no active IGMP querier in the LAN, the unregistered IP multicast will be flooded and multicast entries will always timeout from the multicast database.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge
add igmp-snooping=yes multicast-querier=yes name=bridge1</pre>
</div></div><p>Then add the necessary interfaces as bridge ports.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge port
add bridge=bridge1 interface=ether2
add bridge=bridge1 interface=ether3
add bridge=bridge1 interface=ether4
add bridge=bridge1 interface=ether5</pre>
</div></div><p>The basic IGMP snooping configuration is finished. Use &quot;<code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">/interface bridge mdb print</span>&quot; </code>command to monitor the active multicast groups. If necessary, you can configure an IP address and <a href="https://help.mikrotik.com/docs/display/ROS/DHCP#DHCP-ConfigurationExamples" rel="nofollow">DHCP server</a> on the same bridge interface. </p><h2 id="BridgeIGMP/MLDsnooping-IGMPsnoopingconfigurationwithVLANs">IGMP snooping configuration with VLANs</h2><p>The second example adds some complexity. There are two IGMP snooping bridges and we need to isolate the multicast traffic on a different VLAN. See a network scheme below.</p><p><span class="confluence-embedded-file-wrapper image-center-wrapper"><img class="confluence-embedded-image image-center" draggable="false" src="attachments/59277403/61046800.png" data-image-src="attachments/59277403/61046800.png" data-unresolved-comment-count="0" data-linked-resource-id="61046800" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IGMPVlan.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="59277403" data-linked-resource-container-version="39" tabindex="0" alt=""></span></p><p>First, create a bridge on both devices and add the needed interfaces as bridge ports. To change untagged VLAN for a bridge port, use the <span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>pvid</code></span> setting. The Bridge1 will be acting as an IGMP querier. Below are the configuration commands for the Bridge1:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge
add igmp-snooping=yes multicast-querier=yes name=bridge1
/interface bridge port
add bridge=bridge1 interface=ether2 pvid=10
add bridge=bridge1 interface=ether3 pvid=10
add bridge=bridge1 interface=ether4 pvid=10
add bridge=bridge1 interface=ether5 pvid=20
add bridge=bridge1 interface=sfp-sfpplus1 pvid=10</pre>
</div></div><p class="auto-cursor-target">And for the Bridge2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge
add igmp-snooping=yes name=bridge1
/interface bridge port
add bridge=bridge1 interface=ether3 pvid=10
add bridge=bridge1 interface=ether4 pvid=10
add bridge=bridge1 interface=ether5 pvid=20
add bridge=bridge1 interface=sfp-sfpplus1 pvid=10</pre>
</div></div><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Bridge IGMP querier implementation can only send untagged IGMP queries. In case tagged IGMP queries should be sent or IGMP queries should be generated in multiple VLANs, it is possible to install a <a href="https://help.mikrotik.com/docs/display/ROS/Packages" rel="nofollow">multicast package</a>, add a VLAN interface and configure a <a class="external-link" href="https://wiki.mikrotik.com/wiki/Manual:Routing/Multicast#Interfaces" rel="nofollow">PIM interface</a> on VLAN. The PIM interface can be used as an IGMP querier.</p></div></div><p>Make sure to configure <a href="https://help.mikrotik.com/docs/display/ROS/Bridging+and+Switching#BridgingandSwitching-Managementaccessconfiguration" rel="nofollow">management access</a> for devices. It is essential when configuring a bridge with VLAN filtering. In this example, a VLAN 99 interface with an IP address is added to the bridge. This VLAN will be allowed on the tagged sfp-sfpplus1 port. Below are configuration commands for the Bridge1:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface vlan
add interface=bridge1 name=MGMT vlan-id=99
/ip address
add address=192.168.99.1/24 interface=MGMT network=192.168.99.0
/interface bridge vlan
add bridge=bridge1 tagged=bridge1,sfp-sfpplus1 vlan-ids=99</pre>
</div></div><p>And for the Bridge2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface vlan
add interface=bridge1 name=MGMT vlan-id=99
/ip address
add address=192.168.99.2/24 interface=MGMT network=192.168.99.0
/interface bridge vlan
add bridge=bridge1 tagged=bridge1,sfp-sfpplus1 vlan-ids=99</pre>
</div></div><p>Add bridge VLAN entries and specify tagged and untagged ports. The VLAN 99 entry was already created when configuring management access, only VLAN 10 and VLAN 20 should be added now. Below are the configuration commands for the Bridge1:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge vlan
add bridge=bridge1 untagged=ether2,ether3,ether4,sfp-sfpplus1 vlan-ids=10
add bridge=bridge1 tagged=sfp-sfpplus1 untagged=ether5 vlan-ids=20</pre>
</div></div><p>And for the Bridge2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge vlan
add bridge=bridge1 untagged=ether3,ether4,sfp-sfpplus1 vlan-ids=10
add bridge=bridge1 tagged=sfp-sfpplus1 untagged=ether5 vlan-ids=20</pre>
</div></div><p class="auto-cursor-target">Last, <span style="color:var(--ds-text,#172b4d);">enable VLAN filtering. Below is the configuration command for Bridge1 and Bridge2:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge set [find name=bridge1] vlan-filtering=yes</pre>
</div></div><p class="auto-cursor-target"><span style="color:var(--ds-text,#172b4d);">At this point, VLANs and IGMP snooping are configured and devices should be able to communicate through ports. However, it is recommended to go even a step further and apply some additional filtering options. Enable<span> </span></span><span style="color:var(--ds-background-accent-green-bolder,#1f845a);"><code>ingress-filtering</code></span><span style="color:var(--ds-text,#172b4d);"><span> and <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">frame-types</span></code> </span>on bridge ports. Below are the configuration commands for the Bridge1:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge port
set [find interface=ether2] ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged
set [find interface=ether3] ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged
set [find interface=ether4] ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged
set [find interface=ether5] ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged
set [find interface=sfp-sfpplus1] ingress-filtering=yes</pre>
</div></div><p class="auto-cursor-target">And for the Bridge2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge port
set [find interface=ether3] ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged
set [find interface=ether4] ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged
set [find interface=ether5] ingress-filtering=yes frame-types=admit-only-untagged-and-priority-tagged
set [find interface=sfp-sfpplus1] ingress-filtering=yes</pre>
</div></div><h2 class="auto-cursor-target" id="BridgeIGMP/MLDsnooping-StaticMDBentries">Static MDB entries</h2><p>Since RouterOS version 7.7, it is possible to create static MDB entries for IPv4 and IPv6 multicast groups. For example, to create a static MDB entry for multicast group 229.10.10.10 on ports ether2 and ether3 on VLAN 10, use the command below:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge mdb
add bridge=bridge1 group=229.10.10.10 ports=ether2,ether3 vid=10</pre>
</div></div><p>Verify the results with the <span style="color:var(--ds-icon-accent-magenta,#cd519d);"><code>print</code></span> command:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] &gt; /interface bridge mdb print where group=229.10.10.10
Columns: GROUP, VID, ON-PORTS, BRIDGE
 # GROUP         VID  ON-PORTS  BRIDGE 
12 229.10.10.10   10  ether2    bridge1
                      ether3   </pre>
</div></div><p>In case a certain IPv6 multicast group does not need to be snooped and it is desired to be flooded on all ports and VLANs, it is possible to create a static MDB entry on all VLANs and ports, including the bridge interface itself. Use the command below to create a static MDB entry for multicast group ff02::2 on all VLANs and ports (modify the <code><span style="color:var(--ds-background-accent-green-bolder,#1f845a);">ports</span></code> setting for your particular setup):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface bridge mdb
add bridge=bridge1 group=ff02::2 ports=bridge1,ether2,ether3,ether4,ether5

[admin@MikroTik] &gt; /interface bridge mdb print where group=ff02::2
Flags: D - DYNAMIC
Columns: GROUP, VID, ON-PORTS, BRIDGE
 #   GROUP    VID  ON-PORTS  BRIDGE 
 0   ff02::2                 bridge1
15 D ff02::2    1  bridge1   bridge1
16 D ff02::2   10  bridge1   bridge1
                   ether2           
                   ether3           
                   ether4           
                   ether5           
17 D ff02::2   20  bridge1   bridge1
                   ether2           
                   ether3           
18 D ff02::2   30  bridge1   bridge1
                   ether2           
                   ether3     </pre>
</div></div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59277403/59277440.png">IGMP.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59277403/59277438.png">IGMP.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59277403/61046790.png">IGMPBasic.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59277403/61046788.png">IGMPBasic.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/59277403/61046800.png">IGMPVlan.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
