<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : HotSpot - Captive portal</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="119144604.html">Authentication, Authorization, Accounting</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : HotSpot - Captive portal
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Artūrs C.</span>, last updated by <span class='editor'> Normunds R.</span> on Oct 03, 2024
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742022698 {padding: 0px;}
div.rbtoc1747742022698 ul {margin-left: 0px;}
div.rbtoc1747742022698 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742022698'>
<ul class='toc-indentation'>
<li><a href='#HotSpotCaptiveportal-Introduction'>Introduction</a>
<ul class='toc-indentation'>
<li><a href='#HotSpotCaptiveportal-HotSpotGatewayfeatures:'>HotSpot Gateway features:</a></li>
</ul>
</li>
<li><a href='#HotSpotCaptiveportal-Example'>Example</a>
<ul class='toc-indentation'>
<li><a href='#HotSpotCaptiveportal-Parametersaskedduringthesetupprocess'>Parameters asked during the setup process</a></li>
</ul>
</li>
<li><a href='#HotSpotCaptiveportal-IPHotSpot'>IP HotSpot</a></li>
<li><a href='#HotSpotCaptiveportal-IPHotSpotActive'>IP HotSpot Active</a></li>
<li><a href='#HotSpotCaptiveportal-IPHotSpotHost'>IP HotSpot Host</a></li>
<li><a href='#HotSpotCaptiveportal-IPBinding'>IP Binding</a></li>
<li><a href='#HotSpotCaptiveportal-Cookies'>Cookies</a></li>
<li><a href='#HotSpotCaptiveportal-UsingDHCPoptiontoadvertiseHotSpotURL'>Using DHCP option to advertise HotSpot URL</a></li>
</ul>
</div></p><h1 id="HotSpotCaptiveportal-Introduction">Introduction</h1><p><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">The MikroTik HotSpot Gateway provides authentication for clients before access to public networks.</span></p><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><strong>Hotspot (captive portal)</strong> - uses web-proxy and it is capable of using only the default routing table, at the moment. Making the PCC(per connection-classifier) not a valid method, due to the, multiple routing tables used.</p></div></div><h2 id="HotSpotCaptiveportal-HotSpotGatewayfeatures:"><strong>HotSpot Gateway features:</strong></h2><ul><li>different authentication methods of clients, using a local client database on the router, or remote RADIUS server;</li><li>users accounting in a local database on the router, or on remote RADIUS server;</li><li>a walled-garden system, access to some web pages without authorization;</li><li>login page modification, where you can put information about the company;</li><li>automatic and transparent change any IP address of a client to a valid address;</li><li>HotSpot can inform DHCP clients that they are behind a captive portal (RFC7710);</li></ul><p>A hotspot can work reliably only when IPv4 is used. Hotspot relies on Firewall NAT rules which currently are not supported for IPv6.</p><h1 id="HotSpotCaptiveportal-Example">Example</h1><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /ip hotspot&gt; setup 
Select interface to run HotSpot on 

hotspot interface: ether3
Set HotSpot address for interface 

local address of network: 10.5.50.1/24
masquerade network: yes
Set pool for HotSpot addresses 

address pool of network: 10.5.50.2-10.5.50.254
Select hotspot SSL certificate 

select certificate: none
Select SMTP server 

ip address of smtp server: 0.0.0.0
Setup DNS configuration 

dns servers: 10.1.101.1
DNS name of local hotspot server 

dns name: myhotspot
Create local hotspot user 

name of local hotspot user: admin
password for the user: 
[admin@MikroTik] /ip hotspot&gt;</pre>
</div></div><p>Verify HotSpot configuration:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">[admin@MikroTik] /ip hotspot&gt; print 
Flags: X - disabled, I - invalid, S - HTTPS 
# NAME INTERFACE ADDRESS-POOL PROFILE IDLE-TIMEOUT
0 hotspot1 ether3 hs-pool-3 hsprof1 5m 
[admin@MikroTik] /ip hotspot&gt; 
[admin@MikroTik] /ip pool&gt; print 
# NAME RANGES 
0 hs-pool-3 10.5.50.2-10.5.50.254 
[admin@MikroTik] /ip pool&gt; /ip dhcp-server 
[admin@MikroTik] /ip dhcp-server&gt; print 
Flags: X - disabled, I - invalid 
# NAME INTERFACE RELAY ADDRESS-POOL LEASE-TIME ADD-ARP
0 dhcp1 ether3 hs-pool-3 1h 
[admin@MikroTik] /ip dhcp-server&gt; /ip firewall nat 
[admin@MikroTik] /ip firewall nat&gt; print 
Flags: X - disabled, I - invalid, D - dynamic 
0 X ;;; place hotspot rules here
chain=unused-hs-chain action=passthrough 

1 ;;; masquerade hotspot network
chain=srcnat action=masquerade src-address=10.5.50.0/24 
[admin@MikroTik] /ip firewall nat&gt; </pre>
</div></div><h2 id="HotSpotCaptiveportal-Parametersaskedduringthesetupprocess"><strong>Parameters asked during the setup process</strong></h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="margin-left: 23.1719px;width: 98.0287%;"><colgroup><col style="width: 31.8556%;"/><col style="width: 68.1194%;"/></colgroup><tbody><tr><th class="confluenceTh">Parameter</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>hotspot interface</strong><span> </span>(<em>string</em>; Default:<span> </span><strong>allow</strong>)</td><td class="confluenceTd">Interface name on which to run HotSpot. To run HotSpot on a bridge interface, make sure public interfaces are not included in the bridge ports.</td></tr><tr><td class="confluenceTd"><strong>local address of network</strong><span> </span>(<em>IP</em>; Default:<span> </span><strong>10.5.50.1/24</strong>)</td><td class="confluenceTd">HotSpot gateway address</td></tr><tr><td class="confluenceTd"><strong>masquerade network</strong><span> </span>(<em>yes | no</em>; Default:<span> </span><strong>yes</strong>)</td><td class="confluenceTd">Whether to masquerade HotSpot network, when<span> </span><strong>yes</strong><span> </span>rule is added to<span> </span><em>/ip firewall nat</em><span> </span>with<span> </span><em>action=masquerade</em></td></tr><tr><td class="confluenceTd"><strong>address pool of network</strong><span> </span>(<em>string</em>; Default:<span> </span><strong>yes</strong>)</td><td class="confluenceTd">Address pool for HotSpot network, which is used to change user IP address to a valid address. Useful if providing network access to mobile clients that are not willing to change their networking settings.</td></tr><tr><td class="confluenceTd"><strong>select certificate</strong><span> </span>(<em>none | import-other-certificate</em>; Default: )</td><td class="confluenceTd">Choose SSL certificate, when HTTPS authorization method is required.</td></tr><tr><td class="confluenceTd"><strong>ip address of smtp server</strong><span> </span>(<em>IP</em>; Default:<span> </span><strong>0.0.0.0</strong>)</td><td class="confluenceTd">The IP address of the SMTP server, where to redirect HotSpot's network SMTP requests (25 TCP port)</td></tr><tr><td class="confluenceTd"><strong>dns servers</strong><span> </span>(<em>IP</em>; Default:<span> </span><strong>0.0.0.0</strong>)</td><td class="confluenceTd">DNS server addresses used for HotSpot clients, configuration taken from<span> </span><em>/ip dns</em><span> </span>menu of the HotSpot gateway</td></tr><tr><td class="confluenceTd"><strong>dns name</strong><span> </span>(<em>string</em>; Default:<span> </span><strong>&quot;&quot;</strong>)</td><td class="confluenceTd">the domain name of the HotSpot server, a full qualified domain name is required, for example, <a class="external-link" href="http://www.example.com" rel="nofollow">www.example.com</a></td></tr><tr><td class="confluenceTd"><strong>name of local hotspot user</strong><span> </span>(<em>string</em>; Default:<span> </span><strong>&quot;admin&quot;</strong>)</td><td class="confluenceTd">username of one automatically created HotSpot user, added to<span> </span><em>/ip hotspot user</em></td></tr><tr><td class="confluenceTd"><strong>password for the user'</strong><span> </span>(<em>string</em>; Default: )</td><td class="confluenceTd">Password for automatically created HotSpot user</td></tr></tbody></table></div><h1 id="HotSpotCaptiveportal-IPHotSpot">IP HotSpot</h1><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip/hotspot</pre>
</div></div><p>The menu is designed to manage the HotSpot servers of the router. It is possible to run HotSpot on Ethernet, wireless, VLAN, and bridge interfaces. One HotSpot server is allowed per interface. When HotSpot is configured on the bridge interface, set HotSpot interface as bridge interface, not as bridge port, do not add public interfaces to bridge ports. You can add HotSpot servers manually to the <em>/ip/hotspot </em>menu, but it is advised to run <em>/ip/hotspot/setup</em>, which adds all necessary settings.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 99.1474%;"><colgroup><col style="width: 32.4457%;"/><col style="width: 67.5543%;"/></colgroup><tbody><tr><th class="confluenceTh">Parameters</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong style="text-align: left;">name</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(text)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">HotSpot server's name or identifier</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">address-pool</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(name<span>/</span></span><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">none; default:<span> </span></span><em style="text-align: left;">none</em><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">address space used to change HotSpot client<span> </span></span><em style="text-align: left;">any</em><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>IP address to a valid address. Useful for providing public network access to mobile clients that are not willing to change their networking settings</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">idle-timeout</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(time/none</span><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">; default:<span> </span></span><em style="text-align: left;">5m</em><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">) </span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">period of inactivity for unauthorized clients. When there is no traffic from this client (literally client computer should be switched off), once the timeout is reached, a user is dropped from the HotSpot host list, its used address becomes available</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">keepalive-timeout</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(time/none</span><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">; default:<span> </span></span><em style="text-align: left;">none</em><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">Value of how long host can stay out of reach to be removed from the HotSpot</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">login-timeout</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(time/none</span><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">; default:<span> </span></span><em style="text-align: left;">none</em><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">Period of time after which if a host hasn't been authorized itself with a system the host entry gets deleted from host table. Loop repeats until the host logs in the system. Enable if there are situations where a host cannot log in after being too long in the host table unauthorized.</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">interface</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(name of an interface)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">Interface to run HotSpot on</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">addresses-per-mac</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(integer</span><strong style="text-align: left;">/</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">unlimited; default: 2)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">Number of IP addresses allowed to be bind with the MAC address, when multiple HotSpot clients connected with one MAC-address</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">profile </strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">(name; default:<span> </span></span><strong style="text-align: left;"><em style="text-align: left;">default</em><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">)</span></strong></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">HotSpot server default HotSpot profile, which is located in<span> </span></span><em style="text-align: left;">/ip/hotspot/profile</em></td></tr></tbody></table></div><p class="auto-cursor-target">Read-only</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 100.0%;"><colgroup><col style="width: 32.2492%;"/><col style="width: 67.7508%;"/></colgroup><tbody><tr><th class="confluenceTh">Parameters</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">keepalive-timeout (read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">The exact value of the keepalive-timeout, that is applied to the user. Value shows how long the host can stay out of reach to be removed from the HotSpot</span></td></tr></tbody></table></div><h1 id="HotSpotCaptiveportal-IPHotSpotActive"><span class="mw-headline">IP HotSpot Active</span></h1><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip/hotspot/active</pre>
</div></div><p class="auto-cursor-target"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">HotSpot active menu shows all clients authenticated in HotSpot, the menu is informational (read-only) it is not possible to change anything here.</span></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 99.7711%;"><colgroup><col style="width: 32.461%;"/><col style="width: 67.539%;"/></colgroup><tbody><tr><th class="confluenceTh">Parameters</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong style="text-align: left;">server</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; name)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">HotSpot server name client is logged in</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">user</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; name)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">name of the HotSpot user</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">domain</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; text)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">the domain of the user (if split from the username), a parameter is used only with RADIUS authentication</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">address</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; IP address)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">The IP address of the HotSpot user</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">mac-address</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; MAC-address)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">MAC-address of the HotSpot user</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">login-by</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; multiple-choice: cookie<span> </span></span><strong style="text-align: left;">/</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>http-chap<span> </span></span><strong style="text-align: left;">/</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>http-pap<span> </span></span><strong style="text-align: left;">/</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>https<span> </span></span><strong style="text-align: left;">/</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>mac<span> </span></span><strong style="text-align: left;">/</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>mac-cookie<span> </span></span><strong style="text-align: left;">/</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>trial)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">the authentication method used by the HotSpot client</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">uptime</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">current session time of the user, it is showing how long the user has been logged in</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">idle-time</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">the amount of time the user has been idle</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">session-time-left</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">the exact value of session-time, that is applied for the user. Value shows how long user is allowed to be online to be logged off automatically by<span> </span></span><strong style="text-align: left;">uptime</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>reached</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">idle-timeout</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">the exact value of the user's idle-timeout</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">keepalive-timeout</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">the exact value of the keepalive-timeout, that is applied for the user. Value shows how long the host can stay out of reach to be removed from the HotSpot</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">limit-bytes-in</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; integer)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">value shows how many bytes received from the client, an option is active when the appropriate parameter is configured for HotSpot user</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">limit-bytes-out</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; integer) </span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">value shows how many bytes send to the client, an option is active when the appropriate parameter is configured for HotSpot user</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">limit-bytes-total</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; integer)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">value shows how many bytes total were send/received from the client, an option is active when the appropriate parameter is configured for HotSpot user</span></td></tr></tbody></table></div><h1 id="HotSpotCaptiveportal-IPHotSpotHost"><span class="mw-headline">IP HotSpot H</span><span class="mw-headline">ost</span></h1><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip/hotspot/host</pre>
</div></div><p class="auto-cursor-target"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">The host table lists all computers connected to the HotSpot server. The host table is informational and it is not possible to change any value there:</span></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 99.9542%;"><colgroup><col style="width: 32.6306%;"/><col style="width: 67.3694%;"/></colgroup><tbody><tr><th class="confluenceTh">Parameters</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong style="text-align: left;">mac-address</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; MAC-address)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">HotSpot user MAC-address</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">address</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; IP address)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">HotSpot client original IP address</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">to-address</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; IP address)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">The new client address assigned by HotSpot might be the same as the original<span> </span></span><strong style="text-align: left;">address</strong></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">server</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; name)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">HotSpot server name client is connected to</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">bridge-port</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; name)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><em>&quot;/interface bridge port&quot;</em> the client is connected to, value is unknown when HotSpot is not configured on the bridge</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">uptime</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">value shows how long the user is online (connected to the HotSpot)</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">idle-time</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">time user has been idle</span></td></tr><tr><td class="confluenceTd"><p><strong>idle-timeout</strong><span> </span>(read-only; time) </p></td><td class="confluenceTd">value of the client idle-timeout (unauthorized client)</td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">keepalive-timeout</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; time)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">keepalive-timeout value of the unauthorized client</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">bytes-in</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; integer)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">amount of bytes received from an unauthorized client</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">packet-in</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; integer)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">amount of packets received from an unauthorized client</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">bytes-out</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; integer)</span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">amount of bytes sent to an unauthorized client</span></td></tr><tr><td class="confluenceTd"><strong style="text-align: left;">packet-out</strong><span style="color:var(--ds-text-accent-lime-bolder,#37471f);"><span> </span>(read-only; integer) </span></td><td class="confluenceTd"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">amount of packets sent to an unauthorized client</span></td></tr></tbody></table></div><h1 class="auto-cursor-target" id="HotSpotCaptiveportal-IPBinding">IP Binding</h1><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip/hotspot/ip-binding</pre>
</div></div><p class="auto-cursor-target"><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">IP-Binding HotSpot menu allows to the setup of static One-to-One NAT translations, allows to bypass specific HotSpot clients without any authentication, and also allows to block specific hosts and subnets from the HotSpot network</span></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="margin-left: 20.375px;width: 99.1474%;"><colgroup><col style="width: 32.077%;"/><col style="width: 67.923%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>address</strong><span> </span>(<em>IP Range</em>; Default:<span> </span><strong>&quot;&quot;</strong>)</td><td class="confluenceTd">The original IP address of the client</td></tr><tr><td class="confluenceTd"><strong>mac-address</strong><span> </span>(<em>MAC</em>; Default:<span> </span><strong>&quot;&quot;</strong>)</td><td class="confluenceTd">MAC address of the client</td></tr><tr><td class="confluenceTd"><strong>server</strong><span> </span>(<em>string | all</em>; Default:<span> </span><strong>&quot;all&quot;</strong>)</td><td class="confluenceTd">Name of the HotSpot server.<ul><li><strong>all</strong><span> </span>- will be applied to all hotspot servers</li></ul></td></tr><tr><td class="confluenceTd"><strong>to-address</strong><span> </span>(<em>IP</em>; Default:<span> </span><strong>&quot;&quot;</strong>)</td><td class="confluenceTd">New IP address of the client, translation occurs on the router (client does not know anything about the translation)</td></tr><tr><td class="confluenceTd"><strong>type</strong><span> </span>(<em>blocked | bypassed | regular</em>; Default:<span> </span><strong>&quot;&quot;</strong>)</td><td class="confluenceTd">Type of the IP-binding action<ul><li><strong>regular</strong><span> </span>- performs One-to-One NAT according to the rule, translates<span> the </span><strong>address</strong><span> </span>to<span> </span><strong>to-address</strong></li><li><strong>bypassed</strong><span> </span>- performs the translation, but excludes client from login to the HotSpot</li><li><strong>blocked</strong><span> </span>- translation is not performed and packets from a host are dropped</li></ul></td></tr></tbody></table></div><h1 class="auto-cursor-target" id="HotSpotCaptiveportal-Cookies">Cookies</h1><p><span style="color:var(--ds-text-accent-lime-bolder,#37471f);">The menu contains all cookies sent to the HotSpot clients, which are authorized by cookie method, all the entries are read-only.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip/hotspot/cookie</pre>
</div></div><p><br/></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="margin-left: 23.1719px;width: 99.0256%;"><colgroup><col style="width: 31.9934%;"/><col style="width: 68.0066%;"/></colgroup><tbody><tr><th style="text-align: left;" class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>domain</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">The domain name (if split from the username)</td></tr><tr><td class="confluenceTd"><strong>expires-in</strong><span> </span>(<em>time</em>)</td><td class="confluenceTd">How long the cookie is valid</td></tr><tr><td class="confluenceTd"><strong>mac-address</strong><span> </span>(<em>MAC</em>)</td><td class="confluenceTd">Client's MAC-address</td></tr><tr><td class="confluenceTd"><strong>user</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd">HotSpot username</td></tr></tbody></table></div><h1 id="HotSpotCaptiveportal-UsingDHCPoptiontoadvertiseHotSpotURL"><span class="mw-headline">Using DHCP option to advertise HotSpot URL</span></h1><p>Most devices, such as modern smartphones, do some kind of background checking to see if they are behind a captive portal. They do this by requesting a known webpage and comparing the contents of that page, to what they should be. If contents are different, the device assumes there is a login page and creates a popup with this login page.</p><p>This does not always happen, as this &quot;known webpage&quot; could be blocked, whitelisted, or not accessible in internal networks. To improve on this mechanism, RFC 7710 was created, allowing the HotSpot to inform all DHCP clients that they are behind a captive-portal device and that they will need to authenticate to get Internet access, regardless of what webpages they do or do not request.</p><p>This DHCP option field is enabled automatically, but only if the router has a DNS name configured and has a valid SSL certificate (so that the login page can be accessed over HTTPS). When these requirements are met, a special DHCP option will be sent, containing a link to<span> </span><code>https://&lt;dns-name-of-hotspot&gt;/api</code>. This link contains information in JSON format, instructing the client device of the captive portal status, and the location of the login page.</p><p>Contents of<span> </span><code>https://&lt;dns-name-of-hotspot&gt;/api</code><span> </span>are as follows:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: actionscript3; gutter: false">{
&quot;captive&quot;: $(if logged-in == &#39;yes&#39;)false$(else)true$(endif),
&quot;user-portal-url&quot;: &quot;$(link-login-only)&quot;,
$(if session-timeout-secs != 0)
&quot;seconds-remaining&quot;: $(session-timeout-secs),
$(endif)
$(if remain-bytes-total)
&quot;bytes-remaining&quot;: $(remain-bytes-total),
$(endif)
&quot;can-extend-session&quot;: true
}</pre>
</div></div><p><a class="external-link" href="https://developer.apple.com/news/?id=q78sq5rv" rel="nofollow">Some devices require venue-info URL</a> as well, so you are free to modify the api.json file to your liking, just like any other hotspot files. It is located in the router files menu. </p><div role="region" aria-label="Info" class="confluence-information-macro  confluence-information-macro-information" ><p class="title conf-macro-render">Important</p><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-info-filled confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>If you have set up Hotspot before RouterOS v7.3 when RFC 7710 was implemented, you will have to use &quot;Reset HTML&quot; function, or manually add/edit the api.json file to have the above contents, for Hotspot detection to work. </p></div></div>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
