<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : User Manager</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="119144604.html">Authentication, Authorization, Accounting</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : User Manager
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Unknown User (emils)</span>, last updated by <span class='editor'> Ruslans Sud≈Üiks</span> on Jan 27, 2025
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742022930 {padding: 0px;}
div.rbtoc1747742022930 ul {margin-left: 0px;}
div.rbtoc1747742022930 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742022930'>
<ul class='toc-indentation'>
<li><a href='#UserManager-Overview'>Overview</a></li>
<li><a href='#UserManager-Attributes'>Attributes</a></li>
<li><a href='#UserManager-Database'>Database</a></li>
<li><a href='#UserManager-Limitations'>Limitations</a></li>
<li><a href='#UserManager-Payments'>Payments</a></li>
<li><a href='#UserManager-Profiles'>Profiles</a></li>
<li><a href='#UserManager-ProfileLimitations'>Profile Limitations</a></li>
<li><a href='#UserManager-Routers'>Routers</a></li>
<li><a href='#UserManager-Sessions'>Sessions</a></li>
<li><a href='#UserManager-Settings'>Settings</a>
<ul class='toc-indentation'>
<li><a href='#UserManager-Advanced'>Advanced</a></li>
</ul>
</li>
<li><a href='#UserManager-Users'>Users</a></li>
<li><a href='#UserManager-UserGroups'>User Groups</a></li>
<li><a href='#UserManager-UserProfiles'>User Profiles</a></li>
<li><a href='#UserManager-WEBInterface'>WEB Interface</a></li>
<li><a href='#UserManager-ApplicationGuides'>Application Guides</a>
<ul class='toc-indentation'>
<li><a href='#UserManager-Batchusercreation'>Batch user creation</a></li>
<li><a href='#UserManager-ProvidingNASwithcustomRADIUSattributes'>Providing NAS with custom RADIUS attributes</a>
<ul class='toc-indentation'>
<li><a href='#UserManager-StaticIPaddressforauser'>Static IP address for a user</a></li>
<li><a href='#UserManager-Specifyingaddresspoolforagroupofusers'>Specifying address pool for a group of users</a></li>
</ul>
</li>
<li><a href='#UserManager-UsingTOTP(time-basedone-timepassword)foruserauthentication'>Using TOTP (time-based one-time password) for user authentication</a></li>
<li><a href='#UserManager-Exportingusercredentials'>Exporting user credentials</a>
<ul class='toc-indentation'>
<li><a href='#UserManager-Printablelogincredentialsforasingleuser'>Printable login credentials for a single user</a></li>
<li><a href='#UserManager-Multipleusercredentialexport'>Multiple user credential export</a></li>
</ul>
</li>
<li><a href='#UserManager-Generatingusagereport'>Generating usage report</a></li>
<li><a href='#UserManager-Purchasingaprofile'>Purchasing a profile</a></li>
<li><a href='#UserManager-MigratingfromRouterOSv6'>Migrating from RouterOS v6</a></li>
</ul>
</li>
<li><a href='#UserManager-ApplicationExamples'>Application Examples</a>
<ul class='toc-indentation'>
<li><a href='#UserManager-BasicL2TP/IPsecserverwithUserManagerauthentication'>Basic L2TP/IPsec server with User Manager authentication</a></li>
<li><a href='#UserManager-MFAauthenticationforRouterOSuserlogin'>MFA authentication for RouterOS user login</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="UserManager-Overview">Overview</h1><p>User Manager is RADIUS server implementation in RouterOS which provides centralized user authentication and authorization to a certain service. Having a central user database allows better tracking of system users and customers. As a separate package, User Manager is available on all architectures except SMIPS, however, care must be taken due to limited free space available. It supports many different authentication methods including PAP, CHAP, MS-CHAP, MS-CHAPv2, EAP-TLS, EAP-TTLS, and EAP-PEAP. In RouterOS, DHCP, Dot1x, Hotspot, IPsec, PPP, and Wireless are features that benefit from User Manager the most. Each user can see their account statistics and manage available profiles using the WEB interface. Additionally, users can buy their own data plans (profiles) using the most popular payment gateway - PayPal making it a great system for service providers. Customized reports can be generated to ease processing by the billing department. User Manager works according to RADIUS standards defined in <a class="external-link" href="https://tools.ietf.org/html/rfc2865" rel="nofollow">RFC2865</a> and <a class="external-link" href="https://tools.ietf.org/html/rfc3579" rel="nofollow">RFC3579</a>.</p><p>User Manager is one of the RouterOS features, that is limited by the RouterOS license level. Depending on the <a href="https://help.mikrotik.com/docs/spaces/ROS/pages/328149/RouterOS+license+keys#RouterOSlicensekeys-LicenseLevels" rel="nofollow">License level</a>, number of active sessions will be limited, including multiple connections per user (not unique accounts).</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2555940/135856335.jpg" data-image-src="attachments/2555940/135856335.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856335" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="usermanager.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p><h1 id="UserManager-Attributes">Attributes</h1><p><strong>Sub-menu:</strong> <code>/user-manager attribute</code></p><p>RADIUS attributes are defined authorization, information, and configuration parameters that are passed between the RADIUS server and the client. User Manager allows sending customized attributes defined in the &quot;attributes&quot; menu. RouterOS has a set of predefined attributes already present, but it is also possible to add additional attributes if necessary. Predefined attributes:</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 97.0378%;"><colgroup><col style="width: 12.2171%;"/><col style="width: 8.54067%;"/><col style="width: 5.20359%;"/><col style="width: 28.0541%;"/><col style="width: 7.86257%;"/><col style="width: 38.1219%;"/></colgroup><tbody><tr><th class="confluenceTh">Attribute</th><th colspan="1" class="confluenceTh">Vendor ID</th><th colspan="1" class="confluenceTh">Type ID</th><th colspan="1" class="confluenceTh">Value type</th><th class="confluenceTh">Packet type</th><th colspan="1" class="confluenceTh">Description</th></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Framed-IP-Address</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">ip address</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc2865#section-5.8" rel="nofollow">RFC2865 section 5.8</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Framed-IP-Netmask</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">9</td><td colspan="1" class="confluenceTd">ip address</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc2865#section-5.9" rel="nofollow">RFC2865 section 5.9</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Session-Timeout</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">27</td><td colspan="1" class="confluenceTd">integer (maximum value: 21474720)</td><td colspan="1" class="confluenceTd">Access-Accept, Access-Challenge</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc2865#section-5.27" rel="nofollow">RFC2865 section 5.27</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Idle-Timeout</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">28</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept, Access-Challenge</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc2865#section-5.28" rel="nofollow">RFC2865 section 5.28</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Tunnel-Type</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">64</td><td colspan="1" class="confluenceTd"><div class="table-wrap"><table class="wrapped confluenceTable" data-mce-resize="false"><tbody><tr><th class="confluenceTh">Value</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">Point-to-Point Tunneling Protocol (PPTP)</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">Layer Two Forwarding (L2F)</td></tr><tr><td class="confluenceTd">3</td><td class="confluenceTd">Layer Two Tunneling Protocol (L2TP)</td></tr><tr><td class="confluenceTd">4</td><td class="confluenceTd">Ascend Tunnel Management Protocol (ATMP)</td></tr><tr><td class="confluenceTd">5</td><td class="confluenceTd">Virtual Tunneling Protocol (VTP)</td></tr><tr><td class="confluenceTd">6</td><td class="confluenceTd">IP Authentication Header in the Tunnel-mode (AH)</td></tr><tr><td class="confluenceTd">7</td><td class="confluenceTd">IP-in-IP Encapsulation (IP-IP)</td></tr><tr><td class="confluenceTd">8</td><td class="confluenceTd">Minimal IP-in-IP Encapsulation (MIN-IP-IP)</td></tr><tr><td class="confluenceTd">9</td><td class="confluenceTd">IP Encapsulating Security Payload in the Tunnel-mode (ESP)</td></tr><tr><td class="confluenceTd">10</td><td class="confluenceTd">Generic Route Encapsulation (GRE)</td></tr><tr><td class="confluenceTd">11</td><td class="confluenceTd">Bay Dial Virtual Services (DVS)</td></tr><tr><td class="confluenceTd">12</td><td class="confluenceTd">IP-in-IP Tunneling</td></tr><tr><td class="confluenceTd">13</td><td class="confluenceTd">Virtual LAN</td></tr></tbody></table></div></td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><p><a class="external-link" href="https://tools.ietf.org/html/rfc2868#section-3.1" rel="nofollow">RFC2868 section 3.1</a></p><a class="external-link" href="https://www.rfc-editor.org/rfc/rfc3580.html" rel="nofollow">RFC3580 section 3.31</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Tunnel-Medium-Type</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">65</td><td colspan="1" class="confluenceTd"><div class="table-wrap"><table class="wrapped confluenceTable" data-mce-resize="false"><tbody><tr><th class="confluenceTh">Value</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">IPv4 (IP version 4)</td></tr><tr><td class="confluenceTd">2</td><td class="confluenceTd">IPv6 (IP version 6)</td></tr><tr><td class="confluenceTd">3</td><td class="confluenceTd">NSAP</td></tr><tr><td class="confluenceTd">4</td><td class="confluenceTd">HDLC (8-bit multidrop)</td></tr><tr><td class="confluenceTd">5</td><td class="confluenceTd">BBN 1822</td></tr><tr><td class="confluenceTd">6</td><td class="confluenceTd">802 (includes all 802 media plus Ethernet &quot;canonical format&quot;)</td></tr><tr><td class="confluenceTd">7</td><td class="confluenceTd">E.163 (POTS)</td></tr><tr><td class="confluenceTd">8</td><td class="confluenceTd">E.164 (SMDS, Frame Relay, ATM)</td></tr><tr><td class="confluenceTd">9</td><td class="confluenceTd">F.69 (Telex)</td></tr><tr><td class="confluenceTd">10</td><td class="confluenceTd">X.121 (X.25, Frame Relay)</td></tr><tr><td class="confluenceTd">11</td><td class="confluenceTd">IPX</td></tr><tr><td class="confluenceTd">12</td><td class="confluenceTd">Appletalk</td></tr><tr><td class="confluenceTd">13</td><td class="confluenceTd">Decnet IV</td></tr><tr><td class="confluenceTd">14</td><td class="confluenceTd">Banyan Vines</td></tr><tr><td class="confluenceTd">15</td><td class="confluenceTd">E.164 with NSAP format subaddress</td></tr></tbody></table></div></td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc2868#section-3.2" rel="nofollow">RFC2868 section 3.2</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Tunnel-Private-Group-ID</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">81</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc2868#section-3.6" rel="nofollow">RFC2868 section 3.6</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Framed-Pool</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">88</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc2869#section-5.18" rel="nofollow">RFC2869 section 5.18</a></td></tr><tr><td colspan="1" class="confluenceTd">Framed-IPv6-Prefix</td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">97</td><td colspan="1" class="confluenceTd">ipv6 prefix</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc3162#section-2.3" rel="nofollow">RFC3162 section 2.3</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Framed-IPv6-Pool</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">100</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc3162#section-2.6" rel="nofollow">RFC3162 section 2.6</a></td></tr><tr><td colspan="1" class="confluenceTd"><p class="newpage">Delegated-IPv6-Prefix</p></td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">123</td><td colspan="1" class="confluenceTd">ipv6 prefix</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc4818" rel="nofollow">RFC4818</a></td></tr><tr><td colspan="1" class="confluenceTd">Framed-IPv6-Address</td><td colspan="1" class="confluenceTd">0 (standard)</td><td colspan="1" class="confluenceTd">168</td><td colspan="1" class="confluenceTd">ip address</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><a class="external-link" href="https://tools.ietf.org/html/rfc6911#section-3.1" rel="nofollow">RFC6911 section 3.1</a></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Recv-Limit</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">1</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">Total receive limit in bytes for the client.</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Xmit-Limit</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">Total transmit limit in bytes for the client.</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Group</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><p>User's group for local users.</p><p>HotSpot profile for HotSpot users.</p><p>PPP profile for PPP users.</p></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-Forward</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">Not forward the client's frames back to the wireless infrastructure if this attribute is set to &quot;0&quot; (wireless only).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-Skip-Dot1x</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">Disable 802.1x authentication for the particular wireless client if set to a non-zero value (wireless only).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-Enc-Algo</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">6</td><td colspan="1" class="confluenceTd"><div class="table-wrap"><table class="wrapped confluenceTable" data-mce-resize="false"><tbody><tr><th class="confluenceTh">Value</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">No-encryption</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">40-bit-WEP</td></tr><tr><td colspan="1" class="confluenceTd">2</td><td colspan="1" class="confluenceTd">104-bit-WEP</td></tr><tr><td colspan="1" class="confluenceTd">3</td><td colspan="1" class="confluenceTd">AES-CCM</td></tr><tr><td colspan="1" class="confluenceTd">4</td><td colspan="1" class="confluenceTd">TKIP</td></tr></tbody></table></div></td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">WEP encryption algorithm( wireless only).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-Enc-Key</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">7</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">WEP encryption key for the client (wireless only).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Rate-Limit</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">8</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">Datarate limitation for clients. The format is: rx-rate[/tx-rate] [rx-burst-rate[/tx-burst-rate] [rx-burst-threshold[/tx-burst-threshold] [rx-burst-time[/tx-burst-time] [priority] [rx-rate-min[/tx-rate-min]]]] from the point of view of the router (so &quot;rx&quot; is client upload, and &quot;tx&quot; is client download). All rates should be numbers with optional 'k' (1,000s) or 'M' (1,000,000s). If the tx-rate is not specified, the rx-rate is as tx-rate too. The same goes for tx-burst-rate and tx-burst-threshold and tx-burst-time. If both rx-burst-threshold and tx-burst-threshold are not specified (but burst-rate is specified), rx-rate and tx-rate are used as burst thresholds. If both rx-burst-time and tx-burst-time are not specified, 1s is used as default. Priority takes values 1..8, where 1 implies the highest priority, but 8 - the lowest. If rx-rate-min and tx-rate-min are not specified rx-rate and tx-rate values are used. The rx-rate-min and tx-rate-min values can not exceed rx-rate and tx-rate values.¬†</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Realm</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">9</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Request</td><td colspan="1" class="confluenceTd">If it is set in /radius menu, it is included in every RADIUS request as Mikrotik-Realm attribute. If it is not set, the same value is sent as in the MS-CHAP-Domain attribute (if MS-CHAP-Domain is missing, Realm is not included either).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Host-IP</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">10</td><td colspan="1" class="confluenceTd">ip address</td><td colspan="1" class="confluenceTd">Access-Request</td><td colspan="1" class="confluenceTd">The IP address of HotSpot client before Universal Client translation (the original IP address of the client).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Mark-Id</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">11</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">Firewall mangle chain name (HotSpot only). The MikroTik RADIUS client upon receiving this attribute creates a dynamic firewall mangle rule with action=jump chain=hotspot and jump-target equal to the attribute value. Mangle chain name can have suffixes .in or .out, which will install rule only for incoming or outgoing traffic. Multiple Mark-id attributes can be provided, but only the last ones for incoming and outgoing are used.¬†</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Advertise-URL</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">12</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">URL of the page with advertisements that should be displayed to clients. If this attribute is specified, advertisements are enabled automatically, including transparent proxy, even if they were explicitly disabled in the corresponding user profile. Multiple attribute instances may be sent by the RADIUS server to specify additional URLs which are chosen in a round-robin fashion.</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Advertise-Interval</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">13</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">The time interval between two adjacent advertisements. Multiple attribute instances may be sent by the RADIUS server to specify additional intervals. All interval values are treated as a list and are taken one by one for each successful advertisement. If the end of the list is reached, the last value is continued to be used.</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Recv-Limit-Gigawords</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">14</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">4G (2^32) bytes of total receive limit (bits 32..63, when bits 0..31 are delivered in Mikrotik-Recv-Limit).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Xmit-Limit-Gigawords</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">15</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">4G (2^32) bytes of total transmit limit (bits 32..63, when bits 0..31 are delivered in Mikrotik-Recv-Limit).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-PSK</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">16</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Total-Limit</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">17</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Total-Limit-Gigawords</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">18</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Address-List</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">19</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-MPKey</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">20</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-Comment</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">21</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Delegated-IPv6-Pool</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">22</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">IPv6 pool used for Prefix Delegation.</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-DHCP-Option-Set</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">23</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-DHCP-Option-Param-STR1</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">24</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-DHCP-Option-Param-STR2</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">25</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-VLANID</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">26</td><td colspan="1" class="confluenceTd">integer</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">VLAN ID for the client (Wireless only).</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-VLANIDtype</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">27</td><td colspan="1" class="confluenceTd"><div class="table-wrap"><table class="wrapped confluenceTable" data-mce-resize="false"><tbody><tr><th class="confluenceTh">Value</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">0</td><td class="confluenceTd">802.1q</td></tr><tr><td class="confluenceTd">1</td><td class="confluenceTd">802.1ad</td></tr></tbody></table></div></td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">VLAN ID type for the client (Wireless only).¬†</td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-Minsignal</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">28</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Wireless-Maxsignal</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">29</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">Mikrotik-Switching-Filter</td><td colspan="1" class="confluenceTd">14988 (Mikrotik)</td><td colspan="1" class="confluenceTd">30</td><td colspan="1" class="confluenceTd">string</td><td colspan="1" class="confluenceTd">Access-Accept</td><td colspan="1" class="confluenceTd">Allows to create dynamic switch rules when authenticating clients with dot1x server.</td></tr></tbody></table></div><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 26.4371%;"/><col style="width: 73.557%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Name of the attribute.</td></tr><tr><td class="confluenceTd"><strong>packet-types</strong> (<em>string</em>; Default: <strong>access-accept</strong>)</td><td class="confluenceTd"><ul><li>access-accept - use this attribute in RADIUS Access-Accept messages</li><li>access-challenge - use this attribute in RADIUS Access-Challenge messages</li></ul></td></tr><tr><td class="confluenceTd"><strong>type-id</strong> (<em>integer:1..255</em>; Default: )</td><td class="confluenceTd">Attribute identification number from the specific vendor's attribute database.</td></tr><tr><td class="confluenceTd"><strong>value-type</strong> (<em>string</em>; Default: )</td><td class="confluenceTd"><ul><li>hex</li><li>ip-address - IPv4 or IPv6 IP address</li><li>ip6-prefix - IPv6 prefix</li><li>macro</li><li>string</li><li>uint32</li></ul></td></tr><tr><td class="confluenceTd"><strong>vendor-id </strong>(<em>integer</em>; Default: <strong>0</strong>)</td><td class="confluenceTd">IANA allocated a specific enterprise identification number.</td></tr></tbody></table></div><h1 id="UserManager-Database">Database</h1><p><strong>Sub-menu:</strong> <code>/user-manager database</code></p><p>All RADIUS-related information is stored in a separate User Manager's database configurable under the &quot;database&quot; sub-menu. &quot;Enabled&quot; and &quot;db-path&quot; are the only parameters that are not stored in the User Manager's database and instead are stored in the main RouterOS configuration table meaning that these parameters will be affected by the RouterOS configuration reset. The rest of the configuration, session, and payment data is stored in a separate SQLite database on the FLASH storage of the device. When performing any actions with databases, it is advised to make a backup before and after any activity.</p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 26.4371%;"/><col style="width: 73.557%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>db-path </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Path to the location where database files will be stored.</td></tr></tbody></table></div><p><strong>Read-only properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 37.5754%;"><colgroup><col style="width: 26.462%;"/><col style="width: 73.538%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>db-size</strong></td><td class="confluenceTd">The current size of the database.</td></tr><tr><td class="confluenceTd"><strong>free-disk-space</strong></td><td class="confluenceTd">Free space left on the disk where the database is stored.</td></tr></tbody></table></div><p><strong>Commands</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 64.1799%;"><colgroup><col style="width: 29.5121%;"/><col style="width: 70.4879%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>load</strong> (<em>name</em>)</td><td class="confluenceTd">Restore previously created backup file in .umb format.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>migrate-legacy-db</strong> (<em>database-path; overwrite</em>)</td><td colspan="1" class="confluenceTd">Convert the old User Manager (from RouterOS v6 or before) to the new standard. It is possible to overwrite the current database.¬†</td></tr><tr><td colspan="1" class="confluenceTd"><strong>optimize-db</strong> ()</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>save</strong> (name; overwrite)</td><td colspan="1" class="confluenceTd">Save the current state of the User Manager database.</td></tr></tbody></table></div><h1 id="UserManager-Limitations">Limitations</h1><p><strong>Sub-menu:</strong> <code>/user-manager limitation</code></p><p>Limitations are used by Profiles and are linked together by Profile-Limitations. RADIUS accounting and Interim updates must be enabled to seamlessly switch between multiple limitations or disconnect active sessions when <em>download-limit</em>, <em>upload-limit</em> or <em>uptime-limit</em> is reached.</p><p>To disconnect already active sessions from User Manager, <em>accept</em> must be set to <em>yes</em> on the RADIUS client side. If simultaneous session limits are not unlimited (shared-users) and it has reached the maximum allowed number, then the router will try to disconnect the older user session first.</p><p>User-Manager attempts to disconnect an active session before a new user will be accepted (when the appropriate limit is set), that's why in such setups it is suggested to use 1s for /radius client timeout.</p><p><br/></p><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body">IPsec service in RouterOS does not support rate limitations.</div></div><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 65.9353%;"><colgroup><col style="width: 48.4459%;"/><col style="width: 51.5541%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>comment </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Short description of the limitation.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>download-limit</strong> (<em>integer</em>; Default: <strong>0</strong>)</td><td colspan="1" class="confluenceTd">The total amount of traffic a user can download in Bytes.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: )</td><td colspan="1" class="confluenceTd">Unique name of the limitation.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-burst-rx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-burst-threshold-rx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-burst-threshold-tx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-burst-time-rx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-burst-time-tx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-burst-tx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-min-rx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-min-tx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-priority</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-rx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>rate-limit-tx</strong> ()</td><td colspan="1" class="confluenceTd">Part of <em>MT-Rate-Limit</em> RADIUS attribute. Refer to <a href="Queues_328088.html#Queues-SimpleQueue">Queues#SimpleQueue</a>.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>reset-counters-interval</strong> (<em>hourly </em>| <em>daily </em>| <em>weekly </em>| <em>monthly </em>| <em>disabled</em>); Default: <strong>disabled</strong>)</td><td colspan="1" class="confluenceTd">The interval from <em>reset-counters-start-time</em> when all associated user statistics are cleared.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>reset-counters-start-time</strong> (<em>datetime</em>; Default: )</td><td colspan="1" class="confluenceTd">Static date and time value from which <em>reset-counters-interval</em> is calculated.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>transfer-limit</strong> (<em>integer</em>; Default: <strong>0</strong>)</td><td colspan="1" class="confluenceTd">The total amount of aggregated (download+upload) traffic in Bytes.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>upload-limit</strong> (<em>integer</em>; Default: <strong>0</strong>)</td><td colspan="1" class="confluenceTd">The total amount of traffic a user can upload in Bytes.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>uptime-limit</strong> (<em>time</em>; Default: <strong>00:00:00</strong>)</td><td colspan="1" class="confluenceTd">The total amount of uptime a user can stay active.</td></tr></tbody></table></div><h1 id="UserManager-Payments">Payments</h1><p><strong>Sub-menu:</strong> <code>/user-manager payment</code></p><p>Information about all received payments is available in this section.</p><p><strong>Read-only properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 89.9067%;"><colgroup><col style="width: 18.1921%;"/><col style="width: 81.8079%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>currency </strong>(<em>string</em>)</td><td class="confluenceTd">The currency used in the transaction.</td></tr><tr><td class="confluenceTd"><strong>method </strong>(<em>string</em>)</td><td class="confluenceTd">Service used for the transaction (currently PayPal only).</td></tr><tr><td class="confluenceTd"><strong>price </strong>(<em>decimal</em>)</td><td class="confluenceTd">Amount paid by the user.</td></tr><tr><td class="confluenceTd"><strong>profile </strong>(<em>profile</em>)</td><td class="confluenceTd">Name of the profile the user purchased.</td></tr><tr><td class="confluenceTd"><strong>trans-end </strong>(<em>datetime</em>)</td><td class="confluenceTd">Date and time when the transaction started.</td></tr><tr><td class="confluenceTd"><strong>trans-start </strong>(<em>datetime</em>)</td><td class="confluenceTd">Date and time when the transaction ended.</td></tr><tr><td class="confluenceTd"><strong>trans-status </strong>(<em>string</em>)</td><td class="confluenceTd">Status of the transaction. Possible statuses - <em>started</em>, <em>pending</em>, <em>approved</em>, <em>declined</em>, <em>error</em>, <em>timeout</em>, <em>aborted</em>, <em>user approved</em>. Only <em>approved </em>should be considered as a complete transaction.</td></tr><tr><td class="confluenceTd"><strong>user </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Name of the user who performed the transaction.</td></tr><tr><td class="confluenceTd"><strong>user-message </strong>(<em>string</em>; Default: )</td><td class="confluenceTd"><br/></td></tr></tbody></table></div><h1 id="UserManager-Profiles">Profiles</h1><p><strong>Sub-menu:</strong> <code>/user-manager profile</code></p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 97.3121%;"><colgroup><col style="width: 40.2679%;"/><col style="width: 59.733%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>comment </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Short description of the entry.</td></tr><tr><td class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Unique name of the profile.</td></tr><tr><td class="confluenceTd"><strong>name-for-users</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Name of the profile that will be shown for users on the Web page.</td></tr><tr><td class="confluenceTd"><strong>override-shared-users </strong>(<em>decimal | off | unlimited</em>; Default: <strong>off</strong>)</td><td class="confluenceTd">Whether to allow multiple sessions with the same user name. This overrides the <em>shared-users</em> setting.</td></tr><tr><td class="confluenceTd"><strong>price</strong> (<em>decimal</em>; Default: <strong>0.00</strong>)</td><td class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd"><strong>starts-when</strong> (<em>assigned</em> | <em>first-auth</em>; Default: <strong>assigned</strong>)</td><td class="confluenceTd">The time when does the profile become active. <em>Assigned </em>- immediately when a User Profile entry is created. <em>First-auth</em> - upon first authentication request from the user.</td></tr><tr><td class="confluenceTd"><strong>validity</strong> (<em>time | unlimited</em>; Default: <strong>unlimited</strong>)</td><td class="confluenceTd">The total amount of time a user can use this profile.</td></tr></tbody></table></div><h1 id="UserManager-ProfileLimitations">Profile Limitations</h1><p><strong>Sub-menu:</strong> <code>/user-manager profile-limitation</code></p><p>Profile-Limitations table links Limitations and Profiles together and defines their validity period. When multiple Limitations are assigned to the same Profile, a user must comply with all Limitations for the session to be established. This allows more complicated setups to be created, for example, separate monthly and daily bandwidth limits.</p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 97.367%;"><colgroup><col style="width: 40.2452%;"/><col style="width: 59.7556%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>comment </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Short description of the entry.</td></tr><tr><td class="confluenceTd"><strong>from-time</strong> (<em>time</em>; Default: <strong>00:00:00</strong>)</td><td class="confluenceTd">Time of day when the limitation should start.</td></tr><tr><td class="confluenceTd"><strong>limitation </strong>(<em>limitation</em>; Default: )</td><td class="confluenceTd">Name of already created <strong>Limitation</strong>.</td></tr><tr><td class="confluenceTd"><strong>profile </strong>(<em>profile</em>; Default: )</td><td class="confluenceTd">Name of already created <strong>Profile</strong>.</td></tr><tr><td class="confluenceTd"><strong>till-time</strong> (<em>time</em>; Default: <strong>23:59:59</strong>)</td><td class="confluenceTd">Time of day when the limitation should end.</td></tr><tr><td class="confluenceTd"><strong>weekdays</strong> (<em>day of week</em>; Default: <strong>Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday</strong>)</td><td class="confluenceTd">Day of the week when the limitation should be active.</td></tr></tbody></table></div><h1 id="UserManager-Routers">Routers</h1><p><strong>Sub-menu:</strong> <code>/user-manager router</code></p><p>Here you can define NAS devices that can use User Manager as a RADIUS server.</p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 26.4371%;"/><col style="width: 73.557%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>coa-port </strong>(<em>integer:1..65535</em>; Default: <strong>3799</strong>)</td><td class="confluenceTd">Port number of CoA (Change of Authorization) communication.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>address</strong> (<em>IP/IPv6</em><strong>; </strong>Default: )</td><td colspan="1" class="confluenceTd">IP address of the RADIUS client.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>comment </strong>(<em>string</em>; Default: )</td><td colspan="1" class="confluenceTd">Short description of the NAS.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>disabled</strong> (<em>yes | no</em>; Default: <strong>no</strong>)</td><td colspan="1" class="confluenceTd">Controls whether the entry is currently active or not.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>name </strong>(<em>string</em>; Default: )</td><td colspan="1" class="confluenceTd">Unique name of the RADIUS client.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>shared-secret </strong>(<em>string</em>; Default: )</td><td colspan="1" class="confluenceTd">Used to secure communication between a RADIUS server and a RADIUS client.</td></tr></tbody></table></div><p><strong>Commands</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 61.2726%;"><colgroup><col style="width: 30.914%;"/><col style="width: 69.086%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>reset-counters </strong>()</td><td class="confluenceTd">Clear all statistics for specific RADIUS client.</td></tr></tbody></table></div><h1 id="UserManager-Sessions">Sessions</h1><p><strong>Sub-menu:</strong> <code>/user-manager session</code></p><p>Sessions are logged only if accounting is enabled on NAS.</p><p><strong>Read-only properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 67.5809%;"><colgroup><col style="width: 22.0938%;"/><col style="width: 77.9062%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>acct-session-id</strong> (<em>string</em>)<strong><br/></strong></td><td class="confluenceTd">Unique identification of the accounting session.</td></tr><tr><td class="confluenceTd"><strong>active </strong>(<em>yes | no</em>)<strong><br/></strong></td><td class="confluenceTd">Whether the session is currently used.</td></tr><tr><td class="confluenceTd"><strong>calling-station-id</strong> (<em>string</em>)</td><td class="confluenceTd">User's identifier, usually IP address or MAC address.</td></tr><tr><td class="confluenceTd"><strong>download</strong> (<em>Bytes</em>)</td><td class="confluenceTd">Amount of traffic downloaded.</td></tr><tr><td class="confluenceTd"><strong>ended</strong> (<em>datetime</em>)</td><td class="confluenceTd">Date and time when the session was closed. Empty for active sessions.</td></tr><tr><td class="confluenceTd"><strong>last-accounting-packet</strong> (<em>datetime</em>)</td><td class="confluenceTd">Date and time when the last accounting update was received.</td></tr><tr><td class="confluenceTd"><strong>nas-ip-address</strong> (<em>IP address</em>)</td><td class="confluenceTd">The IP address of the NAS.</td></tr><tr><td class="confluenceTd"><strong>nas-port-id</strong> (<em>string</em>)</td><td class="confluenceTd">Identifier of the NAS port that is authenticating the user.¬†</td></tr><tr><td class="confluenceTd"><strong>nas-port-type</strong> (<em>string</em>)</td><td class="confluenceTd">The port type (<em>physical </em>or <em>virtual</em>) that is authenticating the user.¬†</td></tr><tr><td class="confluenceTd"><strong>started</strong> (<em>datetime</em>)</td><td class="confluenceTd">Date and time when the session was established.</td></tr><tr><td class="confluenceTd"><strong>status</strong> (<em>list of statuses</em>)</td><td class="confluenceTd">Possible available statuses of a session: <em>start - </em>accounting message <em>Start</em> has been received, <em>stop - </em>accounting message <em>Stop</em> has been received, <em>interim - Interim update</em> has been received, <em>close-acked</em> - session is successfully closed, <em>expired.</em></td></tr><tr><td class="confluenceTd"><strong>terminate-cause</strong> (<em>string</em>)</td><td class="confluenceTd">The reason why the session was closed.</td></tr><tr><td class="confluenceTd"><strong>upload</strong> (<em>Bytes</em>)</td><td class="confluenceTd">Amount of traffic uploaded.</td></tr><tr><td class="confluenceTd"><strong>uptime</strong> (<em>time</em>)</td><td class="confluenceTd">Total logged uptime on the session.</td></tr><tr><td class="confluenceTd"><strong>user</strong> (<em>string</em>)</td><td class="confluenceTd">Name of the user.</td></tr><tr><td class="confluenceTd"><strong>user-address</strong> (<em>IP address</em>)</td><td class="confluenceTd">IP address provided to the user.</td></tr></tbody></table></div><h1 id="UserManager-Settings">Settings</h1><p><strong>Sub-menu:</strong> <code>/user-manager<br/></code></p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 26.4371%;"/><col style="width: 73.557%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>accounting-port </strong>(<em>integer</em>; Default: <strong>1813</strong>)</td><td class="confluenceTd">Port to listen for RADIUS accounting requests.</td></tr><tr><td class="confluenceTd"><strong>authentication-port<em> </em></strong>(<em>integer</em>; Default: <strong>1812</strong>)</td><td class="confluenceTd">Port to listen for RADIUS authentication requests.</td></tr><tr><td class="confluenceTd"><strong><em>certificate </em></strong>(<em>certificate</em>; Default: )</td><td class="confluenceTd">Certificate for use in EAP TLS-type authentication methods.</td></tr><tr><td class="confluenceTd"><strong><em>enabled </em></strong>(<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Whether the User Manager functionality is enabled.</td></tr><tr><td class="confluenceTd"><strong>use-profiles<em> </em></strong>(<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Whether to use <strong>Profiles </strong>and <strong>Limitations</strong>. When set to <em>no, </em>only <strong>User </strong>configuration is required to run User Manager.</td></tr></tbody></table></div><h2 id="UserManager-Advanced">Advanced</h2><p><strong>Sub-menu:</strong> <code>/user-manager advanced</code></p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 26.4371%;"/><col style="width: 73.557%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>paypal-allow </strong>(<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Whether to enable PayPal functionality for User Manager.</td></tr><tr><td class="confluenceTd"><strong>paypal-currency </strong>(<em>string</em>; Default: <strong>USD</strong>)</td><td class="confluenceTd">The currency related to <em>price </em>setting in which users will be billed.</td></tr><tr><td class="confluenceTd"><strong>paypal-password </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">The password of your PayPal API account.</td></tr><tr><td class="confluenceTd"><strong>paypal-signature </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Signature of your PayPal API account.</td></tr><tr><td class="confluenceTd"><strong>paypal-use-sandbox </strong>(<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Whether to use PayPal's sandbox environment for testing purposes.</td></tr><tr><td class="confluenceTd"><strong>paypal-user </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Username of your PayPal API account.</td></tr><tr><td class="confluenceTd"><strong>web-private-password </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Password for accessing <em>/um/PRIVATE/</em> section over HTTP.</td></tr><tr><td class="confluenceTd"><strong>web-private-username </strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Username for accessing <em>/um/PRIVATE/</em> section over HTTP.</td></tr></tbody></table></div><h1 id="UserManager-Users">Users</h1><p><strong>Sub-menu:</strong> <code>/user-manager user</code></p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 26.4371%;"/><col style="width: 73.557%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>attributes </strong>(<em>array of attributes</em>; Default: )</td><td class="confluenceTd">Custom set of <strong>Attributes </strong>with their values that will additionally be added to Access-Accept messages.</td></tr><tr><td class="confluenceTd"><strong>caller-id<em> </em></strong>(<em>string</em>; Default: )</td><td class="confluenceTd">Allow user's authentication with a specific <em>Calling-Station-Id</em> value.</td></tr><tr><td class="confluenceTd"><strong>comment</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Short description of the user.</td></tr><tr><td class="confluenceTd"><strong>disabled</strong> (<em>yes | no</em>; Default: <strong>no</strong>)</td><td class="confluenceTd">Controls whether the user can be used or not.</td></tr><tr><td class="confluenceTd"><strong>group</strong> (<em>group</em>; Default: <strong>default</strong>)</td><td class="confluenceTd">Name of the <strong>Group</strong> the user<strong> </strong>is associated to.</td></tr><tr><td class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Username for session authentication.</td></tr><tr><td class="confluenceTd"><strong>otp-secret</strong> (<em>string</em>; Default: )</td><td class="confluenceTd"><span class="ILfuVd" lang="en"><span class="hgKElc"><span><span>A one-time password token that is attached to the password.<br/></span></span></span></span></td></tr><tr><td class="confluenceTd"><strong>password</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">The password of the user for session authentication.</td></tr><tr><td class="confluenceTd"><strong>shared-users</strong> (<em>integer | unlimited</em>; Default: <strong>1</strong>)</td><td class="confluenceTd">The total amount of sessions the user can simultaneously establish.</td></tr></tbody></table></div><p><strong>Commands</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 68.294%;"><colgroup><col style="width: 27.7357%;"/><col style="width: 72.2643%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>add-batch-users </strong>()</td><td class="confluenceTd">The command can generate multiple user accounts based on various parameters.</td></tr><tr><td class="confluenceTd"><strong>generate-voucher</strong> ()</td><td class="confluenceTd">Generates a file based on <em>voucher-template</em> that can be presented to the end user.</td></tr><tr><td class="confluenceTd"><strong>monitor</strong> ()</td><td class="confluenceTd">Shows total statistics for a user. Stats include <em>total-uptime</em>, <em>total-download</em>, <em>total-upload</em>, <em>active-sessions</em>, <em>actual-profile</em>, <em>attributes-details</em>.</td></tr></tbody></table></div><h1 id="UserManager-UserGroups">User Groups</h1><p><strong>Sub-menu:</strong> <code>/user-manager user group</code></p><p>User groups define common characteristics of multiple users such as allowed authentication methods and RADIUS attributes. There are two groups already present in User Manager called <em>default </em>and <em>default-anonymous</em>.</p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 91.0038%;"><colgroup><col style="width: 19.188%;"/><col style="width: 80.812%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>attributes </strong>(<em>array of attributes</em>; Default: )</td><td class="confluenceTd">Custom set of <strong>Attributes </strong>with their values that will additionally be added to Access-Accept messages for users in this group.</td></tr><tr><td class="confluenceTd"><strong>comment</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Short description of the group.</td></tr><tr><td class="confluenceTd"><strong>inner-auths </strong>(<em>list of auths</em>; Default: )</td><td class="confluenceTd">List of allowed authentication methods for tunneled (outer) authentication methods. Supported inner authentication methods - <em>ttls-pap</em>, <em>ttls-chap</em>, <em>ttls-mschap1</em>, <em>ttls-mschap2</em>, <em>peap-mschap2</em>.</td></tr><tr><td class="confluenceTd"><strong>name</strong> (<em>string</em>; Default: )</td><td class="confluenceTd">Unique name of the group.</td></tr><tr><td class="confluenceTd"><strong>outer-auths</strong> (<em>list of auths</em>; Default: )</td><td class="confluenceTd">List of allowed authentication methods. Supported outer authentication methods - <em>pap</em>, <em>chap</em>, <em>mschap1</em>, <em>mschap2</em>, <em>eap-tls</em>, <em>eap-ttls</em>, <em>eap-peap</em>, <em>eap-mschap2</em>.</td></tr></tbody></table></div><h1 id="UserManager-UserProfiles">User Profiles</h1><p><strong>Sub-menu:</strong> <code>/user-manager user-profile</code></p><p>This menu assigns users a profile and tracks the status of the profile. A single user can have multiple profiles assigned, however, only one can be used at the same time. A user will seamlessly be switched to the next profile when the currently active profile expires without dropping the user's session.</p><p><strong>Properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 26.4371%;"/><col style="width: 73.557%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>profile </strong>(<em>profile</em>; Default: )</td><td class="confluenceTd">Name of the profile to assign for user.</td></tr><tr><td class="confluenceTd"><strong>user<em> </em></strong>(<em>user</em>; Default: )</td><td class="confluenceTd">Name of the user to use particular profile.</td></tr></tbody></table></div><p><strong>Read-only properties</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 67.5809%;"><colgroup><col style="width: 22.0938%;"/><col style="width: 77.9062%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>end-time</strong> (<em>datetime</em>)<strong><br/></strong></td><td class="confluenceTd">Date and time the <strong>User Profile</strong> will expire.</td></tr><tr><td class="confluenceTd"><strong>state</strong> (<em>running active</em> | running | <em>used</em>)<strong><br/></strong></td><td class="confluenceTd">The current state of the <strong>User Profile</strong>. <em>Running active - </em>currently used profile by the user. <em>Running</em> - a profile is ready to be used. <em>Used </em>- an expired profile that can no longer be activated.</td></tr></tbody></table></div><p><strong>Commands</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 61.2726%;"><colgroup><col style="width: 30.914%;"/><col style="width: 69.086%;"/></colgroup><tbody><tr><th class="confluenceTh">Property</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>activate-user-profile </strong>()</td><td class="confluenceTd">Make a <strong>User Profile</strong> entry active immediately.</td></tr></tbody></table></div><h1 id="UserManager-WEBInterface">WEB Interface</h1><p>Each user has access to his personal profile using a WEB interface. The WEB interface can be accessed by adding &quot;/um/&quot; directory to the router's IP or domain, for example,¬†<a class="external-link" href="http://router.ip/um/" rel="nofollow">http://example.com/um/</a>. Note that the WEB interface is affected by IP Services &quot;www&quot; and &quot;www-ssl&quot;. The WEB interface can be customized using CSS, JavaScript, and HTML.</p><p><strong>Customizable file reference</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 30.914%;"/><col style="width: 69.086%;"/></colgroup><tbody><tr><th class="confluenceTh">File</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>css/login.css</strong></td><td class="confluenceTd">Cascading style sheet file used in login prompt page.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>css/user.css</strong></td><td colspan="1" class="confluenceTd">Cascading style sheet file used in user's profile page.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>img/PayPal_mark_37x23.gif</strong></td><td colspan="1" class="confluenceTd">PayPal logo image.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>img/ajax-loader.gif</strong></td><td colspan="1" class="confluenceTd">Loading gif while processing page switching.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>img/mikrotik_logo.png</strong></td><td colspan="1" class="confluenceTd">MikroTik logo that is displayed on all pages.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>js/generic.js</strong></td><td colspan="1" class="confluenceTd">Javascript file used on all pages.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>js/login.js</strong></td><td colspan="1" class="confluenceTd">Javascript file used in login prompt page.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>js/user.js</strong></td><td colspan="1" class="confluenceTd">Javascript file used in user's profile page.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>user/login_dynamic.html</strong></td><td colspan="1" class="confluenceTd">Layout of the login prompt page.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>user/user_dynamic.html</strong></td><td colspan="1" class="confluenceTd">Layout of the user's profile page.</td></tr></tbody></table></div><h1 id="UserManager-ApplicationGuides">Application Guides</h1><h2 id="UserManager-Batchusercreation">Batch user creation</h2><p>It is possible to create multiple new users with randomly generated usernames and passwords. For example, the following command will generate 3 new users with 6 lowercase symbols as the username and 6 lowercase, uppercase, and numbers as the password.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user
add-batch-users number-of-users=3 password-characters=lowercase,numbers,uppercase password-length=6 username-characters=lowercase username-length=6</pre>
</div></div><p>The command generated users can be seen by printing the user's table:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user print 
Flags: X - disabled 
 0   name=&quot;olsgkl&quot; password=&quot;86a6zH&quot; otp-secret=&quot;&quot; group=default shared-users=1 attributes=&quot;&quot; 

 1   name=&quot;lkbwss&quot; password=&quot;jaKY5V&quot; otp-secret=&quot;&quot; group=default shared-users=1 attributes=&quot;&quot; 

 2   name=&quot;cwxbwu&quot; password=&quot;a62yZd&quot; otp-secret=&quot;&quot; group=default shared-users=1 attributes=&quot;&quot; 

</pre>
</div></div><h2 id="UserManager-ProvidingNASwithcustomRADIUSattributes">Providing NAS with custom RADIUS attributes</h2><p>It is possible to send additional RADIUS attributes during the authentication process to provide NAS with custom information about the session, such as what IP address should be assigned to the supplicant or what address pool to use for address assigning.</p><h3 id="UserManager-StaticIPaddressforauser">Static IP address for a user</h3><p>To assign the end user a static IP address,¬†<em>Framed-IP-Address</em> attribute can be used. When using static IP address allocation, <em>shared-sessions</em> must be set to 1 to prevent cases when a user has multiple simultaneous sessions, but there is only one IP address. For example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user
set [find name=username] shared-users=1 attributes=Framed-IP-Address:192.168.1.4</pre>
</div></div><h3 id="UserManager-Specifyingaddresspoolforagroupofusers">Specifying address pool for a group of users</h3><p>We can group up multiple similar users and assign RADIUS attributes to all of them at once. First of all, create a new group:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user group
add name=location1 outer-auths=chap,eap-mschap2,eap-peap,eap-tls,eap-ttls,mschap1,mschap2,pap \
inner-auths=peap-mschap2,ttls-chap,ttls-mschap1,ttls-mschap2,ttls-pap attributes=Framed-Pool:pool1</pre>
</div></div><p>The next step is to assign a user to the group:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user
 set [find name=username] group=location1</pre>
</div></div><p>In this case, an IP address from <em>pool1</em> will be assigned to the user upon authentication - make sure <em>pool1 </em>is created on the NAS device.</p><h2 id="UserManager-UsingTOTP(time-basedone-timepassword)foruserauthentication">Using TOTP (time-based one-time password) for user authentication</h2><p>User Manager supports time-based authentication token addition to the user's password field that is regenerated every 30 seconds.</p><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>OTP depends on the clock, so make sure time settings are configured correctly.</p></div></div><p>TOTP works by having a shared secret on the supplicant (client) and the authentication server (User Manager). To configure TOTP on RouterOS, simply set the <em>otp-secret</em> for the user. For example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user
set [find name=username] password=mypass otp-secret=mysecret
</pre>
</div></div><p>To calculate the TOTP token on the supplicant side, many widely available applications can be used, for example, Google Authenticator or <a class="external-link" href="https://totp.app/" rel="nofollow">https://totp.app/</a>. Adding mysecret<em>¬†</em>to the TOTP token generator will provide a new unique 6-digit code that must be added to the user password.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2555940/135856321.png" data-image-src="attachments/2555940/135856321.png" data-unresolved-comment-count="0" data-linked-resource-id="135856321" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="TOTP_generator.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p><p>The following example will accept the user's authentication with a calculated TOTP token added to the common password until a new TOTP token is generated, for example,</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false">User-Name=username
User-Password=mypass620872</pre>
</div></div><h2 id="UserManager-Exportingusercredentials">Exporting user credentials</h2><h3 id="UserManager-Printablelogincredentialsforasingleuser"><strong>Printable login credentials for a single user</strong></h3><p>To generate a single user's printable voucher card, simply use the <em>generate-voucher</em> command. Specify the RouterOS ID number of the user or use the <em>find </em>command to specify a username. A template is already included in User Manager's installation available in the Files section of your device. You can customize the template for your needs.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user
generate-voucher voucher-template=printable_vouchers.html [find where name=username]</pre>
</div></div><p>The generated voucher card is available by accessing the router using a WEB browser and navigating to <em>/um/PRIVATE/GENERATED/vouchers/gen_printable_vouchers.html</em></p><p>By default, the printable card looks like this:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" height="250" src="attachments/2555940/147521538.png" data-image-src="attachments/2555940/147521538.png" data-unresolved-comment-count="0" data-linked-resource-id="147521538" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>To access the PRIVATE path of the /um/ directory by the WEB browser, <em>private-username</em> and<em> private-password</em> must be configured. See <strong>Settings </strong>section.</p></div></div><p>It is possible to use different variables when generating vouchers. Currently, supported variables are:</p><p>$(username) - Represents User Manager username<br/>$(password) - Password of the username<br/>$(userprofname) - Profile that is active for the particular user<br/>$(userprofendtime) - Profile validity end time if specified</p><h3 id="UserManager-Multipleusercredentialexport">Multiple user credential export</h3><p>It is possible to generate a CSV or XML file with multiple or all user credentials at once by using the <em>export.xml</em> or <em>export.csv</em> as <em>voucher-template</em>.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user
generate-voucher voucher-template=export.xml [find]</pre>
</div></div><p>The command generates an XML file <em>um5files/PRIVATE/GENERATED/vouchers/gen_export.xml</em> which can either be accessible by the WEB browser or any other file access tools.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;users&gt;
    &lt;user&gt;
        &lt;username&gt;olsgkl&lt;/username&gt;
        &lt;password&gt;86a6zH&lt;/password&gt;
    &lt;/user&gt;
    &lt;user&gt;
        &lt;username&gt;lkbwss&lt;/username&gt;
        &lt;password&gt;jaKY5V&lt;/password&gt;
    &lt;/user&gt;
    &lt;user&gt;
        &lt;username&gt;cwxbwu&lt;/username&gt;
        &lt;password&gt;a62yZd&lt;/password&gt;
    &lt;/user&gt;
    &lt;user&gt;
        &lt;username&gt;username&lt;/username&gt;
        &lt;password&gt;secretpassword&lt;/password&gt;
    &lt;/user&gt;

&lt;/users&gt;</pre>
</div></div><h2 id="UserManager-Generatingusagereport">Generating usage report</h2><p>In cases where presentable network usage information is required by companies billing or legal team an automated session export can be created using the <em>generate-report</em> command. The command requires an input of the report template - an example of the template is available in¬†<em>um5files/PRIVATE/TEMPLATES/reports/report_default.html</em>. Example of the report generation:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager
generate-report report-template=report_default.html columns=username,uptime,download,upload</pre>
</div></div><p>The generated report is available by accessing the router using a WEB browser and navigating to <em>/um/PRIVATE/GENERATED/reports/gen_report_default.html</em></p><p><em><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2555940/135856265.png" data-image-src="attachments/2555940/135856265.png" data-unresolved-comment-count="0" data-linked-resource-id="135856265" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="Capture.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></em></p><h2 id="UserManager-Purchasingaprofile">Purchasing a profile</h2><p>After logging into the user's private profile by accessing the router's¬†<em>/um/</em> directory using a WEB browser, for example,¬†<a class="external-link" href="http://example.com/um/," rel="nofollow">http://example.com/um/,</a> he will be able to see all available <strong>Profiles</strong> in the respective menu. Profiles that have specified <em>price </em>values will have a <em>Buy this Profile</em> button available.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2555940/135856311.png" data-image-src="attachments/2555940/135856311.png" data-unresolved-comment-count="0" data-linked-resource-id="135856311" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="buy_profile.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p><p>After pressing the <em>Buy this Profile</em> button, the user will be asked to choose from available transaction service providers (currently only PayPal is available) and later redirected to PayPal's payment processing page.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2555940/135856312.png" data-image-src="attachments/2555940/135856312.png" data-unresolved-comment-count="0" data-linked-resource-id="135856312" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="paypal_purchase.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p><p>When the payment is completed, the User Manager will ask PayPal to approve the transaction. After approval, the profile is assigned to the user and is ready to use.<span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2555940/135856313.png" data-image-src="attachments/2555940/135856313.png" data-unresolved-comment-count="0" data-linked-resource-id="135856313" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="purchase_complete.PNG" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p><h2 id="UserManager-MigratingfromRouterOSv6">Migrating from RouterOS v6</h2><p><br/>When you upgrade your User Manager router from RouterOS v6 to the v7 the new User Manager will work with new database files and configuration. To continue using the old user, router, profile, etc. configuration you must manually execute the migrate command. To do so you must have files from the old User Manager server folder &quot;user-manager&quot; present. The folder can be renamed, but all the contents from the old installation must be transferred to the new v7 installation (you can move the old configuration from one router to another router with v7, you must copy &quot;user-manager&quot; folder). After that, all you need to do is execute this command - &quot;/user-manager/database/migrate-legacy-db database-path=&lt;path_to_old_user_manager_folder&gt;&quot;.</p><p>The import process will try to convert such configuration - users, profiles, user-profiles, limitations, profile-limitations, user-counters, routers, and sessions.</p><h1 id="UserManager-ApplicationExamples">Application Examples</h1><h2 id="UserManager-BasicL2TP/IPsecserverwithUserManagerauthentication">Basic L2TP/IPsec server with User Manager authentication</h2><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/2555940/135856358.jpg" data-image-src="attachments/2555940/135856358.jpg" data-unresolved-comment-count="0" data-linked-resource-id="135856358" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="scheme.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p><p><strong>User Manager configuration</strong></p><p>Start off by enabling User Manager functionality.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager
set enabled=yes</pre>
</div></div><p>Allow receiving RADIUS requests from the localhost (the router itself).</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager router
add address=127.0.0.1 comment=localhost name=local shared-secret=test</pre>
</div></div><p><span class="mw-headline">Next, add users and their credentials that clients will use to authenticate to the server.</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/user-manager user
add name=user1 password=password</pre>
</div></div><p><strong><span class="mw-headline">Configuring RADIUS client</span></strong></p><p>For the router to use the RADIUS server for user authentication, it is required to add a new RADIUS client that has the same shared secret that we already configured on User Manager.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/radius
add address=127.0.0.1 secret=test service=ipsec</pre>
</div></div><p class="auto-cursor-target"><strong>L2TP/IPsec server configuration</strong></p><p class="auto-cursor-target">Configure the IP pool from which IP addresses will be assigned to the users and assign it to the PPP Profile.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip pool
add name=vpn-pool range=192.168.99.2-192.168.99.100

/ppp profile
set default-encryption local-address=192.168.99.1 remote-address=vpn-pool</pre>
</div></div><p class="auto-cursor-target">Enable the use of RADIUS for PPP authentication.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ppp aaa
set use-radius=yes</pre>
</div></div><p class="auto-cursor-target">Enable the L2TP server with IPsec encryption.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/interface l2tp-server server
set enabled=yes use-ipsec=required ipsec-secret=mySecret</pre>
</div></div><p class="auto-cursor-target">That is it. Your router is now ready to accept L2TP/IPsec connections and authenticate them to the internal User Manager.</p><h2 id="UserManager-MFAauthenticationforRouterOSuserlogin">MFA authentication for RouterOS user login</h2><p>As User-Manager supports TOTP (time-based-one-time password), it is possible to setup so called MFA authentication for different services. Here will will look into RouterOS user authentication over User Manager (radius) with time based password, that is changed every 30 seconds.¬†</p><p><strong>Here are the necessary configuration options on your MikroTik router,</strong></p><p>Enable to use RADIUS for /user menu, and set default-grop from /user group menu. Keep in mind that local /user database is checked first, and then RADIUS is contacted.<br/>¬†</p><pre>/user/aaa/set use-radius=yes default-group=full</pre><p>Enable radius client for login service. As we run User Manager on the same router, 127.0.0.1 is used,</p><pre>/radius/add address=127.0.0.1 service=login secret=mystrongsecret</pre><p><strong>Here are the configuration steps for User Manager</strong>,</p><p>Make sure you have added your managed devices to &quot;Routers&quot; menu,</p><pre>/user-manager/router/add name=myrouter address=127.0.0.1 shared-secret=mystrongsecret</pre><p>Add user to User-Manager user table with OTP secret parameter. Few more steps are required for proper OTP configuration.<br/>Pick OTP-secret name and convert it to base32 format (there are plenty of online converters from utf-8 to base32 format). For my configuration I use &quot;mysupersecret&quot;, that in base32 would be NV4XG5LQMVZHGZLDOJSXI===</p><pre>/user-manager/user/add name=mikrotik password=mysuperpassword otp-secret=&quot;NV4XG5LQMVZHGZLDOJSXI===&quot;</pre><p>Note, than in your favorite authenticator app, you will need to set user this key manually &quot;NV4XG5LQMVZHGZLDOJSXI===&quot;, when adding new time password instance.</p><p>To login to your MikroTik device, open Winbox/Console and connect to your router address, use login:mikrotik and password:mysuperpasswordxxxxxx, where xxxxxx is 6 digit code from your favorite authentication app.</p><p>Password is changed every 30 seconds and it is available from your favorite app.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-thumbnail" draggable="false" height="250" src="attachments/2555940/283574312.jpg" data-image-src="attachments/2555940/283574312.jpg" data-unresolved-comment-count="0" data-linked-resource-id="283574312" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="IMG_2908.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="2555940" data-linked-resource-container-version="51" tabindex="0" alt=""></span></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856309.png">Capture.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856265.png">Capture.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856311.png">buy_profile.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856312.png">paypal_purchase.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856313.png">purchase_complete.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856314.png">httpatomoreillycomsourceoreillyimages1119404.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856321.png">TOTP_generator.PNG</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856335.jpg">usermanager.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/135856358.jpg">scheme.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/147521538.png">image.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/2555940/283574312.jpg">IMG_2908.jpg</a> (image/jpeg)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
