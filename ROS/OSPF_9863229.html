<!DOCTYPE html>
<html>
    <head>
        <title>RouterOS : OSPF</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="RouterOS_328059.html">RouterOS</a></span>
                            </li>
                                                    <li>
                                <span><a href="Routing_328222.html">Routing</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            RouterOS : OSPF
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Māris B.</span>, last updated on Jul 25, 2024
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1747742031572 {padding: 0px;}
div.rbtoc1747742031572 ul {margin-left: 0px;}
div.rbtoc1747742031572 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1747742031572'>
<ul class='toc-indentation'>
<li><a href='#OSPF-Overview'>Overview</a></li>
<li><a href='#OSPF-OSPFTerminology'>OSPF Terminology</a></li>
<li><a href='#OSPF-BasicConfigurationExample'>Basic Configuration Example</a></li>
<li><a href='#OSPF-RoutingTableCalculation'>Routing Table Calculation</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-SPTCalculation'>SPT Calculation</a></li>
<li><a href='#OSPF-ForwardingAddress'>Forwarding Address</a></li>
</ul>
</li>
<li><a href='#OSPF-NeighbourRelationshipandAdjacency'>Neighbour Relationship and Adjacency</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-CommunicationBetweenOSPFRouters'>Communication Between OSPF Routers</a></li>
<li><a href='#OSPF-NeighborsDiscovery'>Neighbors Discovery</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-DiscoveryonBroadcastSubnets'>Discovery on Broadcast Subnets</a></li>
<li><a href='#OSPF-DiscoveryonNBMASubnets'>Discovery on NBMA Subnets</a></li>
<li><a href='#OSPF-DiscoveryonPTMPSubnets'>Discovery on PTMP Subnets</a></li>
</ul>
</li>
<li><a href='#OSPF-Master-SlaveRelation'>Master-Slave Relation</a></li>
<li><a href='#OSPF-DatabaseSynchronization'>Database Synchronization</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-SynchronizationonBroadcastSubnets'>Synchronization on Broadcast Subnets</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-DRElection'>DR Election</a></li>
</ul>
</li>
<li><a href='#OSPF-SynchronizationonNBMASubnets'>Synchronization on NBMA Subnets</a></li>
<li><a href='#OSPF-SynchronizationonPTMPSubnets'>Synchronization on PTMP Subnets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#OSPF-UnderstandingOSPFAreas'>Understanding OSPF Areas</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-LSATypes'>LSA Types</a></li>
<li><a href='#OSPF-StandardArea'>Standard Area</a></li>
<li><a href='#OSPF-StubArea'>Stub Area</a></li>
<li><a href='#OSPF-TotallyStubbyArea'>Totally Stubby Area</a></li>
<li><a href='#OSPF-NSSA'>NSSA</a></li>
<li><a href='#OSPF-ExternalRoutingInformationandDefaultRoute'>External Routing Information and Default Route</a></li>
<li><a href='#OSPF-RouteSummarisation'>Route Summarisation</a></li>
<li><a href='#OSPF-VirtualLink'>Virtual Link</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-PartitionedBackbone'>Partitioned Backbone</a></li>
<li><a href='#OSPF-Nophysicalconnectiontoabackbone'>No physical connection to a backbone</a></li>
</ul>
</li>
</ul>
</li>
<li><a href='#OSPF-PropertyReference'>Property Reference</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-Instance'>Instance</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-Notes'>Notes</a></li>
</ul>
</li>
<li><a href='#OSPF-Area'>Area</a></li>
<li><a href='#OSPF-AreaRange'>Area Range</a></li>
<li><a href='#OSPF-Interface'>Interface</a></li>
<li><a href='#OSPF-InterfaceTemplates'>Interface Templates</a>
<ul class='toc-indentation'>
<li><a href='#OSPF-Matchers'>Matchers</a></li>
<li><a href='#OSPF-AssignedParameters'>Assigned Parameters</a></li>
</ul>
</li>
<li><a href='#OSPF-Lsa'>Lsa</a></li>
<li><a href='#OSPF-Neighbors'>Neighbors</a></li>
<li><a href='#OSPF-StaticNeighbourconfiguration'>Static Neighbour configuration</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="OSPF-Overview">Overview</h1><p>OSPF is Interior Gateway Protocol (IGP) designed to distribute routing information between routers belonging to the same Autonomous System (AS).</p><p>The protocol is based on link-state technology that has several advantages over distance-vector protocols such as RIP:</p><ul class="bullets"><li>no hop count limitations;</li><li>multicast addressing is used to send routing information updates;</li><li>updates are sent only when network topology changes occur;</li><li>the logical definition of networks where routers are divided into areas</li><li>transfers and tags external routes injected into AS.</li></ul><p>However, there are a few disadvantages:</p><ul class="bullets"><li>OSPF is quite CPU and memory intensive due to the SPF algorithm and maintenance of multiple copies of routing information;</li><li>more complex protocol to implement compared to RIP;</li></ul><p>RouterOS implements the following standards:</p><ul><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc2328" rel="nofollow">2328</a> - OSPF Version 2</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc3101" rel="nofollow">3101</a> - The OSPF Not-So-Stubby Area (NSSA) Option</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc3630" rel="nofollow">3630</a> - Traffic Engineering (TE) Extensions to OSPF Version 2</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc4577" rel="nofollow">4577</a> - OSPF as the Provider/Customer Edge Protocol for BGP/MPLS IP Virtual Private Networks (VPNs)</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc5329" rel="nofollow">5329</a> - Traffic Engineering Extensions to OSPF Version 3</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc5340" rel="nofollow">5340</a> - OSPF for IPv6</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc5643" rel="nofollow">5643</a> - Management Information Base for OSPFv3</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc6549" rel="nofollow">6549</a> - OSPFv2 Multi-Instance Extensions</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc6565" rel="nofollow">6565</a> - OSPFv3 as a Provider Edge to Customer Edge (PE-CE) Routing Protocol</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc6845" rel="nofollow">6845</a> - OSPF Hybrid Broadcast and Point-to-Multipoint Interface Type</li><li>RFC <a class="external-link" href="https://tools.ietf.org/html/rfc7471" rel="nofollow">7471</a> - OSPF Traffic Engineering (TE) Metric Extensions</li></ul><h1 id="OSPF-OSPFTerminology">OSPF Terminology</h1><p>Before we move on let's familiarise ourselves with terms important for understanding the operation of the OSPF. These terms will be used throughout the article.</p><ul><li><strong>Neighbor</strong> - connected (adjacent) router that is running OSPF with the adjacent interface assigned to the same area. Neighbors are found by Hello packets (unless manually configured).</li><li><strong>Adjacency</strong> - logical connection between a router and its corresponding DR and BDR. No routing information is exchanged unless adjacencies are formed.</li><li><strong>Link</strong> - link refers to a network or router interface assigned to any given network.</li><li><strong>Interface</strong> - physical interface on the router. The interface is considered a link when it is added to OSPF. Used to build link database.</li><li><strong>LSA</strong> - Link State Advertisement, data packet contains link-state and routing information, that is shared among OSPF Neighbors.</li><li><strong>DR</strong> - Designated Router, chosen router to minimize the number of adjacencies formed. The option is used in broadcast networks.</li><li><strong>BDR</strong> -Backup Designated Router, hot standby for the DR. BDR receives all routing updates from adjacent routers, but it does not flood LSA updates.</li><li><strong>Area</strong> - areas are used to establish a hierarchical network.</li><li><strong>ABR</strong> - Area Border Router, router connected to multiple areas. <strong>ABRs</strong> are responsible for <strong>summarization</strong> and <strong>update suppression</strong> between connected areas.</li><li><strong>ASBR</strong> - Autonomous System Boundary Router, router connected to an external network (in a different AS). If you import other protocol routes into OSPF from the router it is now considered ASBR.</li><li><strong>NBMA</strong> - Non-broadcast multi-access, networks allow multi-access but have no broadcast capability. Additional OSPF neighbor configuration is required for those networks.</li><li><strong>Broadcast</strong> - Network that allows broadcasting, for example, Ethernet.</li><li><strong>Point-to-point</strong> - Network type eliminates the need for DRs and BDRs</li><li><strong>Router-ID</strong> - IP address used to identify the OSPF router. If the OSPF Router-ID is not configured manually, a router uses one of the IP addresses assigned to the router as its Router-ID.</li><li><strong>Link State</strong> - The term link-state refers to the status of a link between two routers. It defines the relationship between a router's interface and its neighboring routers.</li><li><strong>Cost</strong> - Link-state protocols assign a value to each link called cost. the cost value depends on the speed of the media. A cost is associated with the outside of each router interface. This is referred to as interface output cost.</li><li><strong>Autonomous System</strong> - An autonomous system is a group of routers that use a common routing protocol to exchange routing information.</li></ul><h1 id="OSPF-BasicConfigurationExample">Basic Configuration Example</h1><p>To start OSPF v2 and v3 instances, the first thing to do is to add the instance and the backbone area:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
add name=v2inst version=2 router-id=1.2.3.4
add name=v3inst version=3 router-id=1.2.3.4
/routing ospf area
add name=backbone_v2 area-id=0.0.0.0 instance=v2inst
add name=backbone_v3 area-id=0.0.0.0 instance=v3inst</pre>
</div></div><p>At this point, we can add a template. The template is used to match interfaces on which OSPF should be running, it can be done either by specifying the network or interface directly.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf interface-template
add networks=192.168.0.0/24 area=backbone_v2
add networks=2001:db8::/64 area=backbone_v3
add interfaces=ether1 area=backbone_v3</pre>
</div></div><p><br/></p><h1 id="OSPF-RoutingTableCalculation"><span class="mw-headline">Routing Table Calculation</span></h1><p>Link state database describes the routers and links that interconnect them and are appropriate for forwarding. It also contains the cost (metric) of each link. This metric is used to calculate the shortest path to the destination network. <br/>Each router can advertise a different cost for the router's own link direction, making it possible to have asymmetric links (packets to the destination travel over one path, but the response travels a different path). Asymmetric paths are not very popular, because it makes it harder to find routing problems.<br/>The value of the cost can be changed in the <a href="https://help.mikrotik.com/docs/display/ROS/OSPF#OSPF-InterfaceTemplates" rel="nofollow">OSPF interface template configuration menu</a>, for example, to add an ether2 interface with a cost of 100:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf interface-template 
add interfaces=ether2 cost=100 area=backbone_v2</pre>
</div></div><p><br/></p><p>The cost of an interface on Cisco routers is inversely proportional to the bandwidth of that interface. A higher bandwidth indicates a lower cost. If similar costs are necessary on RouterOS, then use the following formula:</p><p>Cost = 100000000/bw in bps.</p><p><br/>OSPF router is using Dijkstra's Shortest Path First (SPF) algorithm to calculate the shortest path. The algorithm places the router at the root of a tree and calculates the shortest path to each destination based on the cumulative cost required to reach the destination. Each router calculates its own tree even though all routers are using the same link-state database.</p><p><br/></p><h2 id="OSPF-SPTCalculation"><span class="mw-headline">SPT Calculation</span></h2><p>Assume we have the following network. The network consists of 4(four) routers. OSPF costs for outgoing interfaces are shown near the line that represents the link. In order to build the shortest-path tree for router R1, we need to make R1 the root and calculate the smallest cost for each destination.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/18350151.png" data-image-src="attachments/9863229/18350151.png" data-unresolved-comment-count="0" data-linked-resource-id="18350151" data-linked-resource-version="3" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-2-26_11-9-11.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/18350152.png" data-image-src="attachments/9863229/18350152.png" data-unresolved-comment-count="0" data-linked-resource-id="18350152" data-linked-resource-version="5" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2020-2-26_11-9-32.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><p>As you can see from the image above multiple shortest paths have been found to the 172.16.1.0 network, allowing load balancing of the traffic to that destination called <a href="https://help.mikrotik.com/docs/display/ROS/How+Packets+Are+Routed#HowPacketsAreRouted-Multipath(ECMP)routes" rel="nofollow">equal-cost multipath (ECMP)</a>. After the shortest-path tree is built, a router starts to build the routing table accordingly. Networks are reached consequently to the cost calculated in the tree.</p><p>Routing table calculation looks quite simple, however, when some of the OSPF extensions are used or OSPF areas are calculated, routing calculation gets more complicated.</p><h2 id="OSPF-ForwardingAddress">Forwarding Address</h2><p>OSPF router can set the <strong>forwarding-address</strong> to something other than itself which indicates that an alternate next-hop is possible. Mostly forwarding address is set to <strong>0.0.0.0 </strong>suggesting that the route is reachable only via the advertising router.</p><p>The forwarding address is set in LSA if the following conditions are met:</p><ul class="bullets" style="text-decoration: none;"><li>OSPF must be enabled on the next-hop interface</li><li>Next-hop address falls into the network provided by OSPF networks</li></ul><p>A router that receives such LSA can use a forwarding address if OSPF is able to resolve the forwarding address. If forwarding address is not resolved directly - router sets nexthop for forwading address from LSA as a gateway, if forwarding address is not resolved at all - the gateway will be originator-id. Resolve happens only using OSPF instance routes, not the whole routing table.</p><p><br/>Let's look at the example setup below:</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/161611815.png" data-image-src="attachments/9863229/161611815.png" data-unresolved-comment-count="0" data-linked-resource-id="161611815" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Ospf-forwarding-traffic.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><p>Router <strong>R1</strong> has a static route to the external network <em>192.168.0.0/24</em>. OSPF is running between R1, R2, and R3, and the static route is distributed across the OSPF network.</p><p>The problem in such a setup is obvious, R2 can not reach the external network directly. Traffic going to the LAN network from <strong>R2</strong> will be forwarded over the router <strong>R1</strong>, but if we look at the network diagram we can see that more R2 can directly reach the router where the LAN network i located.<strong><br/></strong></p><p><br/>So knowing the forwarding address conditions, we can make router <strong>R1</strong> to set the forwarding address. We simply need to add 10.1.101.0/24 network to OSPF networks in the router's <strong>R1</strong> configuration:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing/ospf/interface-template add area=backbone_v2 networks=10.1.101.0/24</pre>
</div></div><p>Now lets verify that forwarding address is actually working: </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false">[admin@r2] /ip/route&gt; print where dst-address=192.168.0.0/24
Flags: D - DYNAMIC; A - ACTIVE; o, y - COPY
Columns: DST-ADDRESS, GATEWAY, DISTANCE
    DST-ADDRESS       GATEWAY            DISTANCE
DAo 192.168.0.0/24    10.1.101.1%ether1       110



</pre>
</div></div><p class="auto-cursor-target">On all OSPF routers you will see LSA set with forwarding address other than 0.0.0.0 </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: text; gutter: false">[admin@r2] /routing/ospf/lsa&gt; print where id=192.168.0.0
Flags: S - self-originated, F - flushing, W - wraparound; D - dynamic 

 1  D instance=default_ip4 type=&quot;external&quot; originator=10.1.101.10 id=192.168.0.0 
      sequence=0x80000001 age=19 checksum=0xF336 body=
        options=E
        netmask=255.255.255.0
        forwarding-address=10.1.101.1
        metric=10 type-1
        route-tag=0</pre>
</div></div><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">OSPF adjacency between routers in the 10.1.101.0/24 network is not required</span></p></div></div><p><br/></p><p><br/></p><h1 id="OSPF-NeighbourRelationshipandAdjacency"><span class="mw-headline">Neighbour Relationship and Adjacency</span></h1><p>OSPF is a link-state protocol that assumes that the interface of the router is considered an OSPF link. Whenever OSPF is started, it adds the state of all the links in the local <strong>link-state database</strong>.</p><p>There are several steps before the OSPF network becomes fully functional:</p><ul><li>Neighbors discovery</li><li>Database Synchronization</li><li>Routing calculation</li></ul><p><br/></p><p>Link-state routing protocols are distributing and replicating database that describes the routing topology. The link-state protocol's flooding algorithm ensures that each router has an identical link-state database and the routing table is calculated based on this database.</p><p>After all the steps above are completed link-state database on each neighbor contains full routing domain topology (how many other routers are in the network, how many interfaces routers have, what networks link between router connects, cost of each link, and so on).</p><h2 id="OSPF-CommunicationBetweenOSPFRouters"><span class="mw-headline">Communication Between OSPF Routers</span></h2><p>OSPF operates over the IP network layer using protocol number 89. <br/>A destination IP address is set to the neighbor's IP address or to one of the OSPF multicast addresses AllSPFRouters (224.0.0.5) or AllDRRouters (224.0.0.6). The use of these addresses is described later in this article.<br/>Every OSPF packet begins with a standard 24-byte header.</p><div class="sectionColumnWrapper"><div class="sectionMacro"><div class="sectionMacroRow"><div class="columnMacro" style="width:400px;min-width:400px;max-width:400px;"><p><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" draggable="false" width="400" src="attachments/9863229/9863240.png" data-image-src="attachments/9863229/9863240.png" data-unresolved-comment-count="0" data-linked-resource-id="9863240" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="OSPF_Header.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p></div><div class="columnMacro"><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 11.9852%;"/><col style="width: 88.0148%;"/></colgroup><tbody><tr><th class="confluenceTh">Field</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>Packet type</strong></td><td class="confluenceTd">There are several types of OSPF packets: Hello packet, Database Description (DD) packet, Link state request packet, Link State Update packet, and Link State Acknowledgement packet. All of these packets except the Hello packet are used in link-state database synchronization.</td></tr><tr><td class="confluenceTd"><strong>Router ID</strong></td><td class="confluenceTd">one of the router's IP addresses unless configured manually</td></tr><tr><td class="confluenceTd"><strong>Area ID</strong></td><td class="confluenceTd">Allows OSPF router to associate the packet to the proper OSPF area.</td></tr><tr><td class="confluenceTd"><strong>Checksum</strong></td><td class="confluenceTd">Allows receiving router to determine if a packet was damaged in transit.</td></tr><tr><td class="confluenceTd"><strong>Authentication fields</strong></td><td class="confluenceTd">These fields allow the receiving router to verify that the packet's contents were not modified and that packet really came from the OSPF router whose Router ID appears in the packet.</td></tr></tbody></table></div></div></div></div></div><p><br/></p><p><br/></p><p>There are five different OSPF packet types used to ensure proper LSA flooding over the OSPF network.</p><ul><li><strong>Hello packet</strong> - used to discover OSPF neighbors and build adjacencies.</li><li><strong>Database Description (DD)</strong> - check for Database synchronization between routers. Exchanged after adjacencies are built.</li><li><strong>Link-State Request (LSR)</strong> - used to request up-to-date pieces of the neighbor's database. Out-of-date parts of the routing database are determined after the DD exchange.</li><li><strong>Link-State Update (LSU)</strong> - carries a collection of specifically requested link-state records.</li><li><strong>Link-State Acknowledgment (LSack)</strong> - is used to acknowledge other packet types that way introducing reliable communication.</li></ul><h2 id="OSPF-NeighborsDiscovery"><span class="mw-headline">Neighbors Discovery</span></h2><p>OSPF discovers potential neighbors by periodically sending Hello packets out of configured interfaces. By default <em>Hello packets</em> are sent out at 10-second intervals which can be changed by setting <a href="https://help.mikrotik.com/docs/display/ROS/OSPF#OSPF-InterfaceTemplates" rel="nofollow">hello-interval</a> in OSPF interface settings. The router learns the existence of a neighboring router when it receives the neighbor's Hello in return with matching parameters.</p><p>The transmission and reception of Hello packets also allow a router to detect the failure of the neighbor. If Hello packets are not received within <a href="https://help.mikrotik.com/docs/display/ROS/OSPF#OSPF-InterfaceTemplates" rel="nofollow">dead-interval</a> (which by default is 40 seconds) router starts to route packets around the failure. &quot;Hello&quot; protocol ensures that the neighboring routers agree on the Hello interval and Dead interval parameters, preventing situations when not in time received Hello packets mistakenly bring the link down.</p><div class="sectionColumnWrapper"><div class="sectionMacro"><div class="sectionMacroRow"><div class="columnMacro" style="width:400px;min-width:400px;max-width:400px;"><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" draggable="false" width="400" src="attachments/9863229/9863242.png" data-image-src="attachments/9863229/9863242.png" data-unresolved-comment-count="0" data-linked-resource-id="9863242" data-linked-resource-version="2" data-linked-resource-type="attachment" data-linked-resource-default-alias="Hello_data.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p></div><div class="columnMacro"><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 17.6471%;"/><col style="width: 82.3529%;"/></colgroup><tbody><tr><th class="confluenceTh">Field</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><strong>network mask</strong></td><td class="confluenceTd">The IP mask of the originating router's interface IP address.</td></tr><tr><td class="confluenceTd"><strong>hello interval</strong></td><td class="confluenceTd">the period between Hello packets (default 10s)</td></tr><tr><td class="confluenceTd"><strong>options</strong></td><td class="confluenceTd">OSPF options for neighbor information</td></tr><tr><td class="confluenceTd"><strong>router priority</strong></td><td class="confluenceTd">an 8-bit value used to aid in the election of the DR and BDR. (Not set in p2p links)</td></tr><tr><td class="confluenceTd"><strong>router dead interval</strong></td><td class="confluenceTd">time interval has to be received before considering the neighbor is down. ( By default four times bigger than the Hello interval)</td></tr><tr><td class="confluenceTd"><strong>DR</strong></td><td class="confluenceTd">the router-id of the current DR</td></tr><tr><td class="confluenceTd"><strong>BDR</strong></td><td class="confluenceTd">the router-id of the current BDR</td></tr><tr><td class="confluenceTd"><strong>Neighbor router IDs</strong></td><td class="confluenceTd">a list of router ids for all the originating router's neighbors</td></tr></tbody></table></div></div></div></div></div><p><br/></p><p>On each type of network segment Hello protocol works a little differently. It is clear that on point-to-point segments only one neighbor is possible and no additional actions are required. However, if more than one neighbor can be on the segment additional actions are taken to make OSPF functionality even more efficient.</p><p>Two routers do not become neighbors unless the following conditions are met.</p><ul><li>Two-way communication between routers is possible. Determined by flooding Hello packets.</li><li>The interface should belong to the same area;</li><li>The interface should belong to the same subnet and have the same network mask unless it has network-type configured as <strong>point-to-point</strong>;</li><li>Routers should have the same authentication options, and have to exchange the same password (if any);</li><li>Hello and Dead intervals should be the same in Hello packets;</li><li>External routing and NSSA flags should be the same in Hello packets.</li></ul><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Network mask, Priority, DR, and BDR fields are used only when the neighbors are connected by a broadcast or NBMA network segment.</p></div></div><h3 id="OSPF-DiscoveryonBroadcastSubnets"><span class="mw-headline">Discovery on Broadcast Subnets</span></h3><p>The attached node to the broadcast subnet can send a single packet and that packet is received by all other attached nodes. This is very useful for auto-configuration and information replication. Another useful capability in broadcast subnets is multicast. This capability allows sending a single packet which will be received by nodes configured to receive multicast packets. OSPF is using this capability to find OSPF neighbors and detect bidirectional connectivity.</p><p>Each OSPF router joins the IP multicast group <strong>AllSPFRouters</strong> (224.0.0.5), then the router periodically multicasts its Hello packets to the IP address 224.0.0.5. All other routers that joined the same group will receive a multicasted Hello packet. In that way, OSPF routers maintain relationships with all other OSPF routers by sending a single packet instead of sending a separate packet to each neighbor on the segment.</p><p>This approach has several advantages:</p><p>Automatic neighbor discovery by multicasting or broadcasting Hello packets. Less bandwidth usage compared to other subnet types. On the broadcast segment, there are n*(n-1)/2 neighbor relations, but those relations are maintained by sending only n Hellos. If the broadcast has the multicast capability, then OSPF operates without disturbing non-OSPF nodes on the broadcast segment. If the multicast capability is not supported all routers will receive broadcasted Hello packets even if the node is not an OSPF router.</p><p><br/></p><h3 id="OSPF-DiscoveryonNBMASubnets"><span class="mw-headline">Discovery on NBMA Subnets</span></h3><p>Non-broadcast multiaccess (NBMA) segments are similar to broadcast. Support more than two routers, the only difference is that NBMA does not support a data-link broadcast capability. Due to this limitation, OSPF neighbors must be discovered initially through configuration. On RouterOS static neighbor configuration is set in the <code><a href="https://help.mikrotik.com/docs/pages/viewpage.action?pageId=328218#id-/routing/ospf-/routing/ospf/static-neighbor" rel="nofollow">/routing ospf static-neighbor</a></code> menu. To reduce the amount of Hello traffic, most routers attached to the NBMA subnet should be assigned a Router Priority of 0 (set by default in RouterOS). Routers that are eligible to become Designated Routers should have priority values other than 0. It ensures that during the election of DR and BDR Hellos are sent only to eligible routers.</p><p><br/></p><h3 id="OSPF-DiscoveryonPTMPSubnets"><span class="mw-headline">Discovery on PTMP Subnets</span></h3><p>Point-to-MultiPoint treats the network as a collection of point-to-point links.</p><p>By design, PTMP networks should not have broadcast capabilities, which means that OSPF neighbors (the same way as for NBMA networks) must be discovered initially through configuration and all communication happens by sending unicast packets directly between neighbors. On RouterOS static neighbor configuration is set in the <code><a href="https://help.mikrotik.com/docs/pages/viewpage.action?pageId=328218#id-/routing/ospf-/routing/ospf/static-neighbor" rel="nofollow">/routing ospf static-neighbor</a></code> menu. Designated Routers and Backup Designated Routers are not elected on Point-to-multipoint subnets.</p><p>For PTMP networks that do support broadcast, a hybrid type named &quot;<span style="color:var(--ds-text-accent-green,#216e4e);">ptmp-broadcast</span>&quot; can be used. This network type uses multicast Hellos to discover neighbors automatically and detect bidirectional communication between neighbors. After neighbor detection &quot;<span style="color:var(--ds-text-accent-green,#216e4e);">ptmp-broacast</span>&quot; sends unicast packets directly to the discovered neighbors. This mode is compatible with the RouterOS v6 &quot;<span style="color:var(--ds-text-accent-green,#216e4e);">ptmp</span>&quot; type.</p><h2 id="OSPF-Master-SlaveRelation"><span class="mw-headline">Master-Slave Relation</span></h2><p style="text-align: justify;">Before database synchronization can begin, a hierarchy order of exchanging information must be established, which determines which router sends <strong>Database Descriptor</strong> (<strong>DD</strong>) packets first (<strong>Master</strong>). The master router is elected based on the <strong>highest priority </strong>and if priority is not set then the <strong>router ID</strong> will be used. Note that it is a router priority-based relation to arranging the exchanging data between neighbors which does not affect DR/BDR election (meaning that <strong>DR</strong> does not always have to be <strong>Master</strong>).</p><h2 id="OSPF-DatabaseSynchronization"><span class="mw-headline">Database Synchronization</span></h2><p>Link-state Database synchronization between OSPF routers is very important. Unsynchronized databases may lead to incorrectly calculated routing tables which could cause routing loops or black holes.</p><p>There are two types of database synchronizations:</p><ul><li>initial database synchronization</li><li>reliable flooding.</li></ul><p>When the connection between two neighbors first comes up, <em>initial database synchronization</em> will happen. OSPF is using explicit database download when neighbor connections first come up. This procedure is called <strong>Database exchange</strong>. Instead of sending the entire database, the OSPF router sends only its LSA headers in a sequence of OSPF <strong>Database Description (DD)</strong> packets. The router will send the next DD packet only when the previous packet is acknowledged. When an entire sequence of DD packets has been received, the router knows which LSAs it does not have and which LSAs are more recent. The router then sends <strong>Link-State Request (LSR)</strong> packets requesting desired LSAs, and the neighbor responds by flooding LSAs in <strong>Link-State Update (LSU)</strong> packets. After all the updates are received neighbors are said to be <strong>fully adjacent</strong>.</p><p>Reliable flooding is another database synchronization method. It is used when adjacencies are already established and the OSPF router wants to inform other routers about LSA changes. When the OSPF router receives such Link State Update, it installs a new LSA in the link-state database, sends an acknowledgment packet back to the sender, repackages LSA in new LSU, and sends it out to all interfaces except the one that received the LSA in the first place.</p><p>OSPF determines if LSAs are up to date by comparing sequence numbers. Sequence numbers start with 0×80000001, the larger the number, the more recent the LSA is. A sequence number is incremented each time the record is flooded and the neighbor receiving the update resets the Maximum age timer. LSAs are refreshed every 30 minutes, but without a refresh, LSA remains in the database for the maximum age of 60 minutes.</p><p>Databases are not always synchronized between all OSPF neighbors, OSPF decides whether databases need to be synchronized depending on the network segment, for example, on point-to-point links databases are always synchronized between routers, but on Ethernet networks databases are synchronized between certain neighbor pairs.</p><p><br/></p><h3 id="OSPF-SynchronizationonBroadcastSubnets"><span class="mw-headline">Synchronization on Broadcast Subnets</span></h3><p><br/></p><p>On the broadcast segment, there are n*(n-1)/2 neighbor relations, it will be a huge amount of Link State Updates and Acknowledgements sent over the subnet if the OSPF router will try to synchronize with each OSPF router on the subnet.</p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/125108281.jpg" data-image-src="attachments/9863229/125108281.jpg" data-unresolved-comment-count="0" data-linked-resource-id="125108281" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Ospf-adjacency.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><p>This problem is solved by electing one <strong>Designated Router</strong> and one <strong>Backup Designated Router</strong> for each broadcast subnet. All other routers are synchronizing and forming adjacencies only with those two elected routers. This approach reduces the number of adjacencies from n*(n-1)/2 to only 2n-3.</p><p>The image on the right illustrates adjacency formations on broadcast subnets. Routers R1 and R2 are Designated Routers and Backup Designated routers respectively. For example, if R3 wants to flood Link State Update (LSU) to both R1 and R2, a router sends LSU to the IP multicast address <strong>AllDRouters</strong> (224.0.0.6) and only DR and BDR listen to this multicast address. Then Designated Router sends LSU addressed to AllSPFRouters, updating the rest of the routers.</p><h4 id="OSPF-DRElection"><span class="mw-headline">DR Election</span></h4><p>DR and BDR routers are elected from data received in the Hello packet. The first OSPF router on a subnet is always elected as Designated Router, when a second router is added it becomes Backup Designated Router. When an existing DR or BDR fails new DR or BDR is elected to take into account configured <a href="https://help.mikrotik.com/docs/display/ROS/OSPF#OSPF-InterfaceTemplates" rel="nofollow">router priority</a>. The router with the highest priority becomes the new DR or BDR.</p><p>Being Designated Router or Backup Designated Router consumes additional resources. If Router Priority is set to 0, then the router is not participating in the election process. This is very useful if certain slower routers are not capable of being DR or BDR.</p><h3 id="OSPF-SynchronizationonNBMASubnets"><span class="mw-headline">Synchronization on NBMA Subnets</span></h3><p>Database synchronization on NBMA networks is similar to that on broadcast networks. DR and BDR are elected, databases initially are exchanged only with DR and BDR routers and flooding always goes through the DR. The only difference is that Link State Updates must be replicated and sent to each adjacent router separately.</p><h3 id="OSPF-SynchronizationonPTMPSubnets"><span class="mw-headline">Synchronization on PTMP Subnets</span></h3><p>On PTMP subnets OSPF router becomes adjacent to all other routes with which it can communicate directly.</p><p><br/></p><h1 id="OSPF-UnderstandingOSPFAreas"><span class="mw-headline">Understanding OSPF Areas</span></h1><p>A distinctive feature of OSPF is the possibility to divide AS into multiple routing Areas which contain their own set of neighbors. <br/>Imagine a large network with 300+ routers and multiple links between them. Whenever link flaps or some other topology change happens in the network, this change will be flooded to all OSPF devices in the network resulting in a quite heavy load on the network and even downtime since network convergence may take some time for such a large network. </p><p>A large single-area network can produce serious issues:</p><ul><li>Each router recalculates the database every time whenever network topology change occurs, the process takes CPU resources.</li><li>Each router holds an entire link-state database, which shows the topology of the entire network, it takes memory resources.</li><li>A complete copy of the routing table and a number of routing table entries may be significantly greater than the number of networks, which can take even more memory resources.</li><li>Updating large databases requires more bandwidth.</li></ul><p>The introduction of areas allows for better resource management since topology change inside one area is not flooded to other areas in the network. The concept of areas enables simplicity in network administration as well as routing summarization between areas significantly reducing the database size that needs to be stored on each OSPF neighbor. This means that each area has its own link-state database and corresponding shortest-path tree.</p><p>The structure of an area is invisible to other areas. This isolation of knowledge makes the protocol more scalable if multiple areas are used; routing table calculation takes fewer CPU resources and routing traffic is reduced.</p><p style="text-align: left;">However, multi-area setups create additional complexity. It is not recommended to separate areas with fewer than 50 routers. The maximum number of routers in one area is mostly dependent on the CPU power you have for routing table calculation.</p><p><br/></p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/19136839.png" data-image-src="attachments/9863229/19136839.png" data-unresolved-comment-count="0" data-linked-resource-id="19136839" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="OSPF_AREAS.png" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/png" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><p>OSPF area has unique 32-bit identification (Area ID) and the area with an Area ID of 0.0.0.0 (called the Backbone area) is the main one where any other area should connect. Routers that connect to more than one area are called <strong>ABR</strong> (Area Border Routers), and their main responsibility is summarization and update suppression between connected areas. The router connecting to another routing domain is called <strong>ASBR</strong> (Autonomous System Boundary Router).</p><p>Each area has its own link-state database, consisting of router-LSAs and network-LSAs describing how all routers within that area are interconnected. Detailed knowledge of the area's topology is hidden from all other areas; router-LSAs and network-LSAs are not flooded beyond the area's borders. Area Border Routers (<strong>ABR</strong>s) leak addressing information from one area into another in OSPF summary-LSAs. This allows one to pick the best area border router when forwarding data to destinations from another area and is called <strong>intra-area routing</strong>.</p><p>Routing information exchange between areas is essentially a Distance Vector algorithm and to prevent algorithm convergence problems, such as counting to infinity, all areas are required to attach directly to the <strong>backbone area</strong> making a simple hub-and-spoke topology. The area-ID of the backbone area is always 0.0.0.0 and can not be changed.</p><p>RouterOS area configuration is done in the <span style="color:var(--ds-text-accent-blue,#0055cc);"><code>/routing/ospf/area</code></span> menu.  For example, a configuration of an ABR router with multiple attached areas, one Stub area, and one default area:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf area
add name=backbone_v2 area-id=0.0.0.0 instance=v2inst
add name=stub_area area-id=1.1.1.1 instance=v2inst type=stub
add name=another_area area-id=2.2.2.2 instance=v2inst type=default</pre>
</div></div><p>OSPF can have 5 types of areas. Each area type defines what type of LSAs the area supports:</p><ul><li>standard/default - OSPF packets can normally be transmitted in this area, it supports types 1,2,3,4 and 5 LSAs</li><li>backbone - as already mentioned this is the main area where any other area connects. It is basically the same as the standard area but identified with ID 0.0.0.0</li><li>stub - this area does not accept any external routes</li><li>totally stubby - a variation of the stub area</li><li>not-so-stubby (NSSA) - a variation of the stub area</li></ul><h2 id="OSPF-LSATypes">LSA Types</h2><p>Before we continue a detailed look at each area type, let's get familiar with LSA types:</p><ul><li><strong><em>type 1</em></strong> - (Router LSA) Sent by routers within the Area, including the list of directly attached links. Do not cross the ABR or ASBR.</li><li><em><strong>type 2</strong></em> - (Network LSA) Generated for every &quot;transit network&quot; within an area. A transit network has at least two directly attached OSPF routers. Ethernet is an example of a Transit Network. A Type 2 LSA lists each of the attached routers that make up the transit network and is generated by the DR.</li><li><em><strong>type 3</strong></em> - (Summary LSA) The ABR sends Type 3 Summary LSAs. A Type 3 LSA advertises any networks owned by an area to the rest of the areas in the OSPF AS. By default, OSPF advertises Type 3 LSAs for every subnet defined in the originating area, which can cause flooding problems, so it´s a good idea to use a manual summarization at the ABR.</li><li><strong><em>type 4</em></strong> - (ASBR-Summary LSA) It announces the ASBR address, it shows “where” the ASBR is located, announcing its address instead of its routing table.</li><li><em><strong>type 5</strong></em> - (External LSA) Announces the Routes learned through the ASBR, are flooded to all areas except Stub areas. This LSA divides into two sub-types: <strong><em>external type 1</em></strong> and <strong><em>external type 2</em></strong>.</li><li><strong><em>type 6</em></strong> - (Group Membership LSA) This was defined for Multicast extensions to OSPF and is not used by RouterOS.</li><li><strong><em>type 7</em></strong> - type 7 LSAs are used to tell the ABRs about these external routes imported into the NSSA area. Area Border Router then translates these LSAs to <strong>type 5</strong> external LSAs and floods as normal to the rest of the OSPF network</li><li><strong><em>type 8</em></strong> - External Attributes LSA (OSPFv2) / link-local LSA (OSPFv3)</li><li><strong><em> type 9</em></strong> - Link-Local Scope Opaque (OSPFv2) / Intra Area Prefix LSA (OSPFv3). LSA of this type is not flooded beyond the local (sub)network.</li><li><strong><em>type 10</em></strong> - Area Local Scope Opaque. LSA of this type is not flooded beyond the scope of its associated area.</li><li><strong><em>type 11</em></strong> - Opaque LSA which is flooded throughout the AS (scope is the same as <strong>type 5</strong>). It is not flooded in stub areas and NSSAs.</li></ul><p><br/></p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>If we do not have any ASBR, there are no LSA Types 4 and 5 in the network.</p></div></div><p><br/></p><h2 id="OSPF-StandardArea">Standard Area</h2><p>This area supports 1, 2, 3, 4, and 5 LSAs.</p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/125108282.jpg" data-image-src="attachments/9863229/125108282.jpg" data-unresolved-comment-count="0" data-linked-resource-id="125108282" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Basic-multi-area.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><p class="auto-cursor-target">Simple multi-area network using default area. In this example, all networks from area1 are flooded to the backbone and all networks from the backbone are flooded to area1.<br/>R1:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip address add address=10.0.3.1/24 interface=ether1
/ip address add address=10.0.2.1/24 interface=ether2
/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.1
/routing ospf area
add name=backbone_v2 area-id=0.0.0.0 instance=v2inst
add name=area1 area-id=1.1.1.1 type=default instance=v2inst
/routing ospf interface-template
add networks=10.0.2.0/24 area=backbone_v2
add networks=10.0.3.0/24 area=area1

</pre>
</div></div><p>R2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip address add address=10.0.1.1/24 interface=ether2
/ip address add address=10.0.2.2/24 interface=ether1
/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.2
/routing ospf area
add name=backbone_v2 area-id=0.0.0.0
/routing ospf interface-template
add networks=10.0.2.0/24 area=backbone_v2
add networks=10.0.1.0/24 area=backbone_v2</pre>
</div></div><p>R3:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip address add address=10.0.3.2/24 interface=ether2
/ip address add address=10.0.4.1/24 interface=ether1
/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.3
/routing ospf area
add name=area1 area-id=1.1.1.1 type=stub instance=v2inst
/routing ospf interface-template
add networks=10.0.3.0/24 area=area1
add networks=10.0.4.0/24 area=area1</pre>
</div></div><p><br/></p><h2 id="OSPF-StubArea">Stub Area</h2><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">The main purpose of stub areas is to keep such areas from carrying external routes. Routing from these areas to the outside world is based on a default route. A stub area reduces the database size inside an area and reduces the memory requirements of routers in the area.</span></p><div class="sectionMacro"><div class="sectionMacroRow"><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/125108283.jpg" data-image-src="attachments/9863229/125108283.jpg" data-unresolved-comment-count="0" data-linked-resource-id="125108283" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Stub-example.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><p>The stub area has a few restrictions, ASBR routers cannot be internal to the area, stub area cannot be used as a transit area for virtual links. The restrictions are made because the stub area is mainly configured not to carry external routes.</p><p>This area supports 1, 2, and 3 LSAs.</p><p><br/></p><p>Let's consider the example above. Area1 is configured as a stub area meaning that routers R2 and R3 will not receive any routing information from the backbone area except the default route.</p></div></div><p><br/></p><p>R1:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.1
/routing ospf area
add name=backbone_v2 area-id=0.0.0.0 instance=v2inst
add name=area1 area-id=1.1.1.1 type=stub instance=v2inst
 
/routing ospf interface-template
add networks=10.0.0.0/24 area=backbone_v2
add networks=10.0.1.0/24 area=area1
add networks=10.0.3.0/24 area=area1

</pre>
</div></div><p>R2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.2
/routing ospf area
add name=area1 area-id=1.1.1.1 type=stub instance=v2inst
/routing ospf interface-template
add networks=10.0.1.0/24 area=area1</pre>
</div></div><p>R3:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.3
/routing ospf area
add name=area1 area-id=1.1.1.1 type=stub instance=v2inst
/routing ospf interface-template
add networks=10.0.3.0/24 area=area1</pre>
</div></div><p><br/></p><h2 id="OSPF-TotallyStubbyArea">Totally Stubby Area</h2><p>Totally stubby area is an extension of the stub area. A totally stubby area blocks external routes and summarized (inter-area) routes from going into the area. Only intra-area routes are injected into the area. Totally stubby area is configured as a stub area with an additional <span style="color:var(--ds-text-accent-green,#216e4e);"><code>no-summaries</code></span> flag. This area supports Type 1, Type 2 LSAs, and Type 3 LSAs with default routes.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf area
add name=totally_stubby_area area-id=1.1.1.1 instance=v2inst type=stub no-summaries</pre>
</div></div><p><br/></p><h2 id="OSPF-NSSA">NSSA</h2><p>Not-so-stubby area (NSSA) is useful when it is required to inject external routes, but injection of type 5 LSA routes is not required.</p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/125108284.jpg" data-image-src="attachments/9863229/125108284.jpg" data-unresolved-comment-count="0" data-linked-resource-id="125108284" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Nssa-example.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><p>The illustration shows two areas (backbone and area1) and RIP connection to the router located in &quot;area1&quot;. We need &quot;area1&quot; to be configured as a stub area, but it is also required to inject external RIP routes in the backbone. Area1 should be configured as NSSA in this case.</p><p>The configuration example does not cover <a href="https://help.mikrotik.com/docs/display/ROS/RIP" rel="nofollow">RIP</a> configuration.</p><p><br/>R1:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.1
/routing ospf area
add name=backbone_v2 area-id=0.0.0.0 instance=v2inst
add name=area1 area-id=1.1.1.1 type=nssa instance=v2inst
/routing ospf interface-template
add networks=10.0.0.0/24 area=backbone_v2
add networks=10.0.1.0/24 area=area1

</pre>
</div></div><p>R2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
add name=v2inst version=2 router-id=1.0.0.2
/routing ospf area
add name=area1 area-id=1.1.1.1 type=nssa instance=v2inst
/routing ospf interface-template
add networks=10.0.1.0/24 area=area1</pre>
</div></div><p><br/></p><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>Virtual links cannot be used over NSSA areas.</p></div></div><h2 id="OSPF-ExternalRoutingInformationandDefaultRoute">External Routing Information and Default Route</h2><p>On the edge of an OSPF routing domain, you can find routers called <strong>AS boundary routers (ASBRs)</strong> that run one of the other routing protocols. The job of those routers is to import routing information learned from other routing protocols into the OSPF routing domain. External routes can be imported at two separate levels depending on the metric type.</p><ul class="bullets" style="text-decoration: none;"><li><span style="color:var(--ds-text-accent-green,#216e4e);">type1</span> - OSPF metric is the sum of the internal OSPF cost and the external route cost</li><li><span style="color:var(--ds-text-accent-green,#216e4e);">type2</span> - OSPF metric is equal only to the external route cost.</li></ul><p>External routes can be imported via the instance <span style="color:var(--ds-text-accent-green,#216e4e);"><code>redistribute</code></span> parameter. The example below will pick and redistribute all static and RIP routes:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
add name=v2inst version=2 router-id=1.2.3.4 redistribute=static,rip</pre>
</div></div><p>Redistribution of default route is a special case where the <span style="color:var(--ds-text-accent-green,#216e4e);"><code>originate-default</code></span> the parameter should be used:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf instance
set v2inst originate-default=if-installed</pre>
</div></div><p>Since redistribution is controlled by &quot;<span style="color:var(--ds-text-accent-green,#216e4e);"><code>originate-default</code></span>&quot; and &quot;<span style="color:var(--ds-text-accent-green,#216e4e);"><code>redistribute</code></span>&quot; parameter, it introduces some corner-cases for default route filtering. </p><ul><li>if <span style="color:var(--ds-text-accent-green,#216e4e);"><code>redistribute</code></span> is enabled, then pick all routes matching redistribute parameters</li><li>If <code><span style="color:var(--ds-text-accent-green,#216e4e);">originate-default</span>=<span style="color:var(--ds-text-accent-orange-bolder,#702e00);">never</span></code>, a default route will be rejected</li><li>run selected routes through <span style="color:var(--ds-text-accent-green,#216e4e);"><code>out-select-chain</code></span> (if configured)</li><li>run selected routes through <span style="color:var(--ds-text-accent-green,#216e4e);"><code>out-filter-chain</code></span> (if configured)</li><li>if <span style="color:var(--ds-text-accent-green,#216e4e);"><code>originate-default</code></span> is set to <code><span style="color:var(--ds-text-accent-orange-bolder,#702e00);">always</span></code> or <span style="color:var(--ds-text-accent-orange-bolder,#702e00);"><code>if-installed</code></span>:<ul><li>OSPF creates a fake default route without attributes;</li><li>runs this route through <span style="color:var(--ds-text-accent-green,#216e4e);"><code>out-filter-chain</code></span> where attributes can be applied, but action is ignored (always accept);</li></ul></li></ul><p><br/></p><p>For a complete list of redistribution values, see the reference manual.</p><h2 id="OSPF-RouteSummarisation">Route Summarisation</h2><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">Route summarization is a consolidation of multiple routes into one single advertisement. It is normally done at the area boundaries (Area Border Routers).</span></p><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">It is better to summarise in the direction of the backbone. That way the backbone receives all the aggregated routes and injects them into other areas already summarized. There are two types of summarization: inter-area and external route summarization.</span></p><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">Inter-area route summarization works on area boundaries (ABRs), it does not apply to external routes injected into OSPF via redistribution. By default, ABR creates a summary LSA for each route in a specific area and advertises it in adjacent areas.</span></p><p>Using ranges allows for creating only one summary LSA for multiple routes and sending only a single advertisement into adjacent areas, or suppressing advertisements altogether.</p><p>If a range is configured with the '<span style="color:var(--ds-text-accent-green,#216e4e);"><code>advertise</code></span>' parameter, a single summary LSA is advertised for each range if there are any routes under the range in the specific area. Otherwise (when '<span style="color:var(--ds-text-accent-green,#216e4e);"><code>advertise</code></span>' parameter disabled) no summary LSAs are created and advertised outside area boundaries at all.</p><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">Inter-area route summarization can be configured from the <a href="https://wiki.mikrotik.com/wiki/OSPF-reference#Area_Rangehttps://help.mikrotik.com/docs/display/ROS/OSPF#OSPF-AreaRange" rel="nofollow">OSPF area range</a> menu.</span></p><p>Let's consider that we have two areas backbone and area1, area1 has several /24 routes from the 10.0.0.0/16 range and there is no need to flood the backbone area with each /24 subnet if it can be summarized. On the router connecting area1 with the backbone we can set up the area range:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf area range
add prefix=10.0.0.0/16 area=area1 advertise=yes cost=10</pre>
</div></div><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>For an active range (i.e. one that has at least one OSPF route from the specified area falling under it), a route with the type 'blackhole' is created and installed in the routing table.</p></div></div><p><br/></p><p>External route summarization can be achieved using routing filters.  Let's consider the same example as above except that area1 has redistributed /24 routes from other protocols. To send a single summarised LSA, a blackhole route must be added and an appropriate routing filter to accept only summarised route:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/ip route add dst-address=10.0.0.0/16 blackhole
/routing ospf instance
set v2inst out-filter-chain=ospf_out
/routing filter rule
add chain=ospf_out rule=&quot;if (dst == 10.0.0.0/16) {accept} else {reject}&quot;</pre>
</div></div><h2 id="OSPF-VirtualLink">Virtual Link</h2><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">As it was mentioned previously all OSPF areas have to be attached to the backbone area, but sometimes the physical connection is not possible. To overcome this, areas can be attached logically by using </span><strong style="text-decoration: none;">virtual links</strong><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">. </span></p><p><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">There are two common scenarios when virtual links can be used:</span></p><ul><li><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">to glue together the fragmented backbone area</span></li><li><span style="text-decoration: none;color:var(--ds-text-accent-lime-bolder,#37471f);">to connect remote are without direct connection to the backbone</span></li></ul><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/125108285.jpg" data-image-src="attachments/9863229/125108285.jpg" data-unresolved-comment-count="0" data-linked-resource-id="125108285" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Vlink-backbone.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><h3 id="OSPF-PartitionedBackbone">Partitioned Backbone</h3><p>OSPF allows to linking of discontinuous parts of the backbone area using virtual links. This might be required when two separate OSPF networks are merged into one large network. Virtual links can be configured between separate ABRs that touch the backbone area from each side and have a common area.</p><p>The additional area could be created to become a transit area when a common area does not exist, it is illustrated in the image above.</p><p>Virtual Links are not required for non-backbone areas when they get partitioned. OSPF does not actively attempt to repair area partitions, each component simply becomes a separate area, when an area becomes partitioned. The backbone performs routing between the new areas. Some destinations are reachable via <strong>intra-area</strong> routing, the area partition requires <strong>inter-area</strong> routing.</p><p>However, to maintain full routing after the partition, an address range has not to be split across multiple components of the area partition.</p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="attachments/9863229/125108287.jpg" data-image-src="attachments/9863229/125108287.jpg" data-unresolved-comment-count="0" data-linked-resource-id="125108287" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="virtual-link2.jpg" data-base-url="https://help.mikrotik.com/docs" data-linked-resource-content-type="image/jpeg" data-linked-resource-container-id="9863229" data-linked-resource-container-version="72" tabindex="0" alt=""></span></p><h3 style="text-decoration: none;" id="OSPF-Nophysicalconnectiontoabackbone"><span class="mw-headline">No physical connection to a backbone</span></h3><p>The area may not have a physical connection to the backbone, a virtual link is used to provide a logical path to the backbone of the disconnected area. A link has to be established between two ABRs that have a common area with one ABR connected to the backbone.</p><p>We can see that both R1 and R2 routers are ABRs and R1 is connected to the backbone area. Area2 will be used as a <strong>transit area </strong>and R1 is the <strong>entry point</strong> into the backbone area. A virtual link has to be configured on both routers.</p><p>Virtual link configuration is added in OSPF interface templates. If we take the example setup from the &quot;no physical connection&quot; illustration, then the virtual link configuration would look like this:</p><p>R1:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf interface-template
add vlink-transit-area=area2 area=backbone_v2 type=virtual-link vlink-neighbor-id=2.2.2.2</pre>
</div></div><p class="auto-cursor-target">R2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: ros; gutter: false">/routing ospf interface-template
add vlink-transit-area=area2 area=backbone_v2 type=virtual-link vlink-neighbor-id=1.1.1.1</pre>
</div></div><h1 id="OSPF-PropertyReference"><span class="mw-headline">Property Reference</span></h1><h2 id="OSPF-Instance"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Instance</span></h2><p><strong style="text-decoration: none;">Sub-menu:<span style="color:var(--ds-text-accent-blue-bolder,#09326c);"><code> </code></span></strong><span style="color:var(--ds-text-accent-blue,#0055cc);"><code>/routing/ospf/instance</code></span></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 98.9583%;"><colgroup><col style="width: 41.7032%;"/><col style="width: 58.2968%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">domain-id</strong><span title=""> </span>(<em title="">Hex | Address</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">MPLS-related parameter. Identifies the OSPF domain of the instance. This value is attached to OSPF routes redistributed in BGP as VPNv4 routes as BGP extended community attribute and used when BGP VPNv4 routes are redistributed back to OSPF to determine whether to generate inter-area or AS-external LSA for that route. By default Null domain-id is used, as described in RFC 4577.</td></tr><tr><td class="confluenceTd"><strong>domain-tag</strong><span> </span>(<em>integer [0..4294967295]</em>)</td><td class="confluenceTd">if set, then used in route redistribution (as route-tag in all external LSAs generated by this router), and in route calculation (all external LSAs having this route tag are ignored). Needed for interoperability with older Cisco systems. By default not set.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">in-filter</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">name of the<span title=""> </span><a href="https://help.mikrotik.com/docs/display/ROS/Routing+Filters" rel="nofollow">routing filter</a><span title=""> </span>chain used for incoming prefixes</td></tr><tr><td colspan="1" class="confluenceTd"><strong>mpls-te-address</strong><span> </span>(<em>string</em>)</td><td colspan="1" class="confluenceTd">the area used for MPLS traffic engineering. TE Opaque LSAs are generated in this area. No more than one OSPF instance can have mpls-te-area configured.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">mpls-te-area</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">the area used for MPLS traffic engineering. TE Opaque LSAs are generated in this area. No more than one OSPF instance can have mpls-te-area configured.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>originate-default</strong><span> </span>(<em style="text-decoration: none;text-align: left;" title="">always | if-installed | never</em><span style="text-decoration: none;color:var(--ds-text,#172b4d);">; </span>)</td><td colspan="1" class="confluenceTd">Specifies default route (0.0.0.0/0) distribution method.</td></tr><tr><td class="confluenceTd"><strong>out-filter-chain</strong><span> </span>(<em>name</em>)</td><td class="confluenceTd">name of the<span> </span><a href="https://help.mikrotik.com/docs/display/ROS/Routing+Filters" rel="nofollow">routing filter</a><span> </span>chain used for outgoing prefixes filtering. Output operates only with &quot;external&quot; routes.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">out-filter-select</strong><span title=""> </span>(<em title="">name</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">name of the routing filter select chain, used for output selection. Output operates only with &quot;external&quot; routes.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>redistribute</strong><span> </span>(<em><span style="text-decoration: none;color:var(--ds-text,#172b4d);">bgp</span></em><em style="text-decoration: none;text-align: left;">,connected,copy,dhcp,fantasy,modem,ospf,rip,static,vpn</em><span style="text-decoration: none;color:var(--ds-text,#172b4d);">; </span>)</td><td colspan="1" class="confluenceTd">Enable redistribution of specific route types.</td></tr><tr><td class="confluenceTd"><strong>router-id</strong><span> </span>(<em>IP | name</em>; Default:<span> </span><strong>main</strong>)</td><td class="confluenceTd">OSPF Router ID. Can be set explicitly as an IP address, or as the name of the router-id instance.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">version </strong>(<em>2 | 3;</em> Default: <strong>2</strong>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">OSPF version this instance will be running (v2 for IPv4, v3 for IPv6).</td></tr><tr><td class="confluenceTd"><strong>vrf </strong>(<em>name of a routing table</em>; Default: <strong>main</strong>)</td><td class="confluenceTd">the VRF table this OSPF instance operates on</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">use-dn</strong><span title=""> </span>(<em title="">yes | no</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">Forces to use or ignore DN bit. Useful in some CE PE scenarios to inject intra-area routes into VRF. If a parameter is unset then the DN bit is used according to RFC. Available since v6rc12.</td></tr></tbody></table></div><p><br/></p><h3 id="OSPF-Notes"><span class="mw-headline">Notes</span></h3><p>OSPF protocol supports two types of metrics:</p><ul class="bullets"><li>type1<span> </span>- OSPF metric is the sum of the internal OSPF cost and the external route cost</li><li>type2<span> </span>- OSPF metric is equal only to the external route cost.</li></ul><div role="region" aria-label="Note" class="confluence-information-macro  confluence-information-macro-note" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p><span style="color:var(--ds-text,#172b4d);">Type 1 external paths are always preferred over type 2 external paths. When all paths are type 2 external paths, the paths with the smallest advertised type 2 metric are always preferred. (RFC2328)</span></p></div></div><p><br/></p><h2 id="OSPF-Area"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Area</span></h2><p style="text-align: left;"><strong style="text-decoration: none;">Sub-menu: </strong><code><span style="color:var(--ds-text-accent-blue,#0055cc);">/routing/ospf/area</span></code></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 98.93211%;"><colgroup><col style="width: 17.961515%;"/><col style="width: 82.03969%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" style="text-align: left;" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td class="confluenceTd"><strong>area-id</strong><span> </span>(<em>IP address</em>; Default:<span> </span><strong>0.0.0.0</strong>)</td><td class="confluenceTd">OSPF area identifier. If the router has networks in more than one area, then an area with area-id=0.0.0.0 (the backbone) must always be present. The backbone always contains all area border routers. The backbone is responsible for distributing routing information between non-backbone areas. The backbone must be contiguous, i.e. there must be no disconnected segments. However, area border routers do not need to be physically connected to the backbone - connection to it may be simulated using a<span> </span>virtual link.</td></tr><tr><td class="confluenceTd"><strong title="">default-cost<span title=""> </span></strong>(<em title="">integer</em>; <span style="color:var(--ds-text-accent-orange-bolder,#702e00);">unset</span>)</td><td class="confluenceTd">Default cost of injected LSAs into the area. If the value is not set, then stub area type-3 default LSA will not be originated.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">instance</strong><span title=""> </span>(<em title="">name</em>; <span style="color:var(--ds-background-accent-orange-subtler-pressed,#fea362);" title="">mandatory</span>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">Name of the OSPF instance this area belongs to.</td></tr><tr><td class="confluenceTd"><strong>no-summaries</strong><span> </span>()</td><td class="confluenceTd">Flag parameter, if set then the area will not flood summary LSAs in the stub area.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">name</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">the name of the area</td></tr><tr><td class="confluenceTd"><strong>nssa-translate</strong><span> </span>(<em>yes | no | candidate</em>)</td><td class="confluenceTd">The parameter indicates which ABR will be used as a translator from type7 to type5 LSA. Applicable only if area type is NSSA<ul class="bullets"><li>yes - the router will be always used as a translator</li><li>no - the router will never be used as a translator</li><li>candidate - OSPF elects one of the candidate routers to be a translator</li></ul></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">type</strong><span title=""> </span>(<em title="">default | nssa | stub</em>; Default:<span title=""> </span><strong title="">default</strong>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">The area type. Read more on the area types in the OSPF case studies.</td></tr></tbody></table></div><p><br/></p><h2 id="OSPF-AreaRange"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Area Range</span></h2><p><strong style="text-decoration: none;">Sub-menu: </strong><code><span style="color:var(--ds-text-accent-blue,#0055cc);">/routing/ospf/area/range</span></code></p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="margin-left: 14.4318px;width: 98.2948%;"><colgroup><col style="width: 17.5216%;"/><col style="width: 82.4784%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td class="confluenceTd"><strong>advertise</strong><span> </span>(<em>yes | no</em>; Default: yes)</td><td class="confluenceTd">Whether to create a summary LSA and advertise it to the adjacent areas.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">area</strong><span title=""> </span>(<em title="">name</em>; <span style="color:var(--ds-background-accent-orange-subtler-pressed,#fea362);" title="">mandatory</span>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">the OSPF area associated with this range</td></tr><tr><td class="confluenceTd"><strong>cost</strong><span> </span>(<em>integer [0..4294967295]</em>)</td><td class="confluenceTd">the cost of the summary LSA this range will create<p>default - use the largest cost of all routes used (i.e. routes that fall within this range)</p></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">prefix</strong><span title=""> </span>(<em title="">IP prefix</em>; <span style="color:var(--ds-background-accent-orange-subtler-pressed,#fea362);" title="">mandatory</span>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">the network prefix of this range</td></tr></tbody></table></div><p><br/></p><h2 id="OSPF-Interface"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Interface</span></h2><p><strong style="text-decoration: none;">Sub-menu: </strong><code><span style="color:var(--ds-text-accent-blue,#0055cc);">/routing/ospf/interface</span></code></p><p>Read-only matched interface menu</p><h2 id="OSPF-InterfaceTemplates"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Interface Templates</span></h2><p><strong style="text-decoration: none;">Sub-menu: </strong><code><span style="color:var(--ds-text-accent-blue,#0055cc);">/routing/ospf/interface-template</span></code></p><p>The interface template defines common network and interface matches and what parameters to assign to a matched interface.</p><h3 id="OSPF-Matchers">Matchers</h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 98.6602%;"><colgroup><col style="width: 17.5795%;"/><col style="width: 82.4205%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td class="confluenceTd"><p title=""><strong>interfaces </strong>(<em>name</em><em>)</em></p></td><td class="confluenceTd"><p title="">Interfaces to match. Accepts specific interface names or the name of the interface list.</p></td></tr><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong title="">network</strong><span title=""> </span>(<em title="">IP prefix</em>)</td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey">the network prefix associated with the area. OSPF will be enabled on all interfaces that have at least one address falling within this range. Note that the network prefix of the address is used for this check (i.e. not the local address). For point-to-point interfaces, this means the address of the remote endpoint.</td></tr></tbody></table></div><h3 style="text-align: left;" id="OSPF-AssignedParameters">Assigned Parameters</h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 98.782%;"><colgroup><col style="width: 17.6398%;"/><col style="width: 82.3602%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td class="confluenceTd"><strong>area</strong><span> </span>(<em>name</em>; <span style="color:var(--ds-background-accent-orange-subtler-pressed,#fea362);">mandatory</span>)</td><td class="confluenceTd">The OSPF area to which the matching interface will be associated.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">auth</strong><span title=""> </span>(<em title="">simple | md5 | sha1 | sha256 | sha384 | sha512</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">Specifies authentication method for OSPF protocol messages.<ul class="bullets" title=""><li>simple<span> </span>- plain text authentication</li><li>md5<span> </span>- keyed Message Digest 5 authentication</li><li>sha - HMAC-SHA authentication RFC5709</li></ul><p title="">If the parameter is unset, then authentication is not used.</p></td></tr><tr><td colspan="1" class="confluenceTd"><strong>auth-id</strong><span> </span>(<em>integer</em>)</td><td colspan="1" class="confluenceTd">The key id is used to calculate message digest (used when MD5 or SHA authentication is enabled). The value should match all OSPF routers from the same region.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">authentication-key</strong><span title=""> </span>(<em title="">string)</em></td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">The authentication key to be used, should match on all the neighbors of the network segment.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>comment</strong>(<em>string)</em></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>cost</strong>(<em>integer [0..65535])</em></td><td colspan="1" class="confluenceTd">Interface cost expressed as link state metric.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">dead-interval</strong><span title=""> </span>(<em title="">time</em>; Default:<span title=""> </span><strong title="">40s</strong>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">Specifies the interval after which a neighbor is declared dead. This interval is advertised in hello packets. This value must be the same for all routers on a specific network, otherwise, adjacency between them will not form</td></tr><tr><td colspan="1" class="confluenceTd"><strong>disabled</strong>(<em>yes | no)</em></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">hello-interval</strong><span title=""> </span>(<em title="">time</em>; Default:<span title=""> </span><strong title="">10s</strong>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">The interval between <strong title="">HELLO</strong> packets that the router sends out this interface. The smaller this interval is, the faster topological changes will be detected, the tradeoff is more OSPF protocol traffic. This value must be the same for all the routers on a specific network, otherwise, adjacency between them will not form.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>instance-id</strong><span> </span>(i<em>nteger [0..255]</em>; Default:<span> </span><strong>0</strong>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">passive</strong><span title=""> </span>()</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">If enabled, then do not send or receive OSPF traffic on the matching interfaces</td></tr><tr><td colspan="1" class="confluenceTd"><strong>prefix-list</strong><span> </span>(name)</td><td colspan="1" class="confluenceTd">Name of the address list containing networks that should be advertised to the v3 interface.</td></tr><tr><td colspan="1" class="confluenceTd"><strong title="">priority</strong><span title=""> </span>(<em title="">integer: 0..255</em>; Default:<span title=""> </span><strong title="">128</strong>)</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><p class="auto-cursor-target">Router's priority. Used to determine the designated router in a broadcast network. The router with the highest priority value takes precedence. Priority value 0 means the router is not eligible to become a designated or backup designated router at all.</p><div role="region" aria-label="Warning" class="confluence-information-macro  confluence-information-macro-warning" ><span role="presentation" class="aui-icon aui-icon-small aui-iconfont-error confluence-information-macro-icon" ></span><div class="confluence-information-macro-body"><p>ROS v7 default value is 128 (defined in RFC), and the default value in ROS v6 was 1, keep this in mind when if you had strict priorities set for DR/BDR election.</p></div></div></div></td></tr><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong title="">retransmit-interval</strong><span title=""> </span>(<em title="">time</em>; Default:<span title=""> </span><strong title="">5s</strong>)</td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey">Time interval the lost link state advertisement will be resent. When a router sends a link state advertisement (LSA) to its neighbor, the LSA is kept until the acknowledgment is received. If the acknowledgment was not received in time (see <span style="color:var(--ds-background-accent-green-bolder,#1f845a);" title="">transmit-delay</span>), the router will try to retransmit the LSA.</td></tr><tr><td colspan="1" class="confluenceTd"><strong title="">transmit-delay</strong><span title=""> </span>(<em title="">time</em>; Default:<span title=""> </span><strong title="">1s</strong>)</td><td colspan="1" class="confluenceTd">Link-state transmit delay is the estimated time it takes to transmit a link-state update packet on the interface.</td></tr><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong title="">type</strong><span title=""> </span>(<em title="">broadcast | nbma | ptp | ptmp | ptp-unnumbered | virtual-link</em>; Default:<span title=""> </span><strong title="">broadcast</strong>)</td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey">the OSPF network type on this interface. Note that if interface configuration does not exist, the default network type is 'point-to-point' on PtP interfaces and 'broadcast' on all other interfaces.<ul class="bullets" title=""><li>broadcast<span> </span>- network type suitable for Ethernet and other multicast capable link layers. Elects designated router</li><li>nbma<span> </span>- Non-Broadcast Multiple Access. Protocol packets are sent to each neighbor's unicast address. Requires manual configuration of neighbors. Elects designated router</li><li>ptp<span> </span>- suitable for networks that consist only of two nodes. Do not elect designated router</li><li>ptmp<span> </span>- Point-to-Multipoint. Easier to configure than NBMA because it requires no manual configuration of a neighbor. Do not elect a designated router. This is the most robust network type and as such suitable for wireless networks, if 'broadcast' mode does not work well enough for them</li><li>ptp-unnumbered - works the same as ptp, except that the remote neighbor does not have an associated IP address to a specific PTP interface. For example, in case an IP unnumbered is used on Cisco devices.</li><li>virtual-link - for virtual link setups.</li></ul></td></tr><tr><td colspan="1" class="confluenceTd"><strong title="">vlink-neighbor-id</strong><span title=""> </span>(<em title="">IP</em>)</td><td colspan="1" class="confluenceTd">Specifies the<span title=""> </span><strong title="">router-id</strong><span title=""> </span>of the neighbor which should be connected over the virtual link.</td></tr><tr><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey"><strong title="">vlink-transit-area</strong><span title=""> </span>(<em title="">name</em>)</td><td class="highlight-grey confluenceTd" colspan="1" data-highlight-colour="grey">A non-backbone area the two routers have in common over which the virtual link will be established. Virtual links can not be established through stub areas.</td></tr></tbody></table></div><h2 id="OSPF-Lsa"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Lsa</span></h2><p><strong style="text-decoration: none;">Sub-menu: </strong><code><span style="color:var(--ds-text-accent-blue,#0055cc);">/routing/ospf/lsa</span></code></p><p>Read-only list of all the LSAs currently in the LSA database.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 98.6602%;"><colgroup><col style="width: 17.9995%;"/><col style="width: 82.0005%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td colspan="1" class="confluenceTd"><strong>age</strong><span> </span>(<em>integer</em>)</td><td colspan="1" class="confluenceTd">How long ago (in seconds) the last update occurred</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">area</strong><span title=""> </span>(<em title="">string</em>)</td><td colspan="1" class="confluenceTd">The area this LSA belongs to.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>body</strong><span> </span>(<em>string</em>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">checksum</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">LSA checksum</td></tr><tr><td colspan="1" class="confluenceTd"><strong>dynamic</strong><span> </span>(<em>yes | no</em>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">flushing</strong><span title=""> </span>(<em title="">yes | no</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>id</strong><span> </span>(<em>IP</em>)</td><td colspan="1" class="confluenceTd">LSA record ID</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">instance</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">The instance name this LSA belongs to.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>link</strong><span> </span>(<em>string</em>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">link-instance-id</strong><span title=""> </span>(<em title="">IP</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>originator</strong><span> </span>(<em>IP</em>)</td><td colspan="1" class="confluenceTd">An originator of the LSA record.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">self-originated</strong><span title=""> </span>(<em title="">yes | no</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">Whether LSA originated from the router itself.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>sequence </strong>(<em>string</em>)</td><td colspan="1" class="confluenceTd">A number of times the LSA for a link has been updated.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">type</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td class="confluenceTd"><strong>wraparound</strong><span> </span>(<em>string</em>)</td><td class="confluenceTd"><br/></td></tr></tbody></table></div><h2 id="OSPF-Neighbors"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Neighbors</span></h2><p><strong style="text-decoration: none;">Sub-menu: </strong><code><span style="color:var(--ds-text-accent-blue,#0055cc);">/routing/ospf/neighbor</span></code></p><p>Read-only list of currently active OSPF neighbors.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 98.7414%;"><colgroup><col style="width: 18.1412%;"/><col style="width: 81.8588%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td colspan="1" class="confluenceTd"><strong>address</strong><span> </span>(<em>IP</em>)</td><td colspan="1" class="confluenceTd">An IP address of the OSPF neighbor router</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">adjacency</strong><span title=""> </span>(<em title="">time</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">Elapsed time since adjacency was formed</td></tr><tr><td colspan="1" class="confluenceTd"><strong>area</strong><span> </span>(<em>string</em>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">bdr</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">An IP address of the Backup Designated Router</td></tr><tr><td colspan="1" class="confluenceTd"><strong>comment</strong><span> </span>(<em>string</em>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">db-summaries</strong><span title=""> </span>(<em title="">integer</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>dr </strong>(<em>IP</em>)</td><td colspan="1" class="confluenceTd">An IP address of the Designated Router</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">dynamic </strong>(<em title="">yes | no</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>inactive </strong>(<em>yes | no</em>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">instance</strong><span title=""> </span>(<em title="">string</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>ls-requests</strong><span> </span>(<em>integer</em>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">ls-retransmits</strong><span title=""> </span>(<em title="">integer</em>)</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>priority</strong><span> </span>(<em>integer</em>)</td><td colspan="1" class="confluenceTd">Priority configured on the neighbor</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">router-id</strong><span title=""> </span>(<em title="">IP</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">neighbor router's<span title=""> </span><strong title="">RouterID</strong></td></tr><tr><td class="confluenceTd"><strong>state</strong><span> </span>(<em>down | attempt | init | 2-way | ExStart | Exchange | Loading | full</em>)</td><td class="confluenceTd"><ul class="bullets"><li><strong>Down</strong><span> </span>- No Hello packets have been received from a neighbor.</li><li><strong>Attempt</strong><span> </span>- Applies only to NBMA clouds. The state indicates that no recent information was received from a neighbor.</li><li><strong>Init</strong><span> </span>- Hello packet received from the neighbor, but bidirectional communication is not established (Its own RouterID is not listed in the Hello packet).</li><li><strong>2-way</strong><span> </span>- This state indicates that bi-directional communication is established. DR and BDR elections occur during this state, routers build adjacencies based on whether the router is DR or BDR, and the link is point-to-point or a virtual link.</li><li><strong>ExStart</strong><span> </span>- Routers try to establish the initial sequence number that is used for the packet information exchange. The router with a higher ID becomes the master and starts the exchange.</li><li><strong>Exchange</strong><span> </span>- Routers exchange database description (DD) packets.</li><li><strong>Loading</strong><span> </span>- In this state actual link state information is exchanged. Link State Request packets are sent to neighbors to request any new LSAs that were found during the Exchange state.</li><li><strong>Full</strong><span> </span>- Adjacency is complete, and neighbor routers are fully adjacent. LSA information is synchronized between adjacent routers. Routers achieve the full state with their DR and BDR only, an exception is P2P links.</li></ul></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">state-changes</strong><span title=""> </span>(<em title="">integer</em>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">Total count of OSPF state changes since neighbor identification</td></tr></tbody></table></div><h2 id="OSPF-StaticNeighbourconfiguration"><span style="color:var(--ds-background-accent-blue-bolder,#0c66e4);">Static Neighbour configuration</span></h2><p><strong style="text-decoration: none;">Sub-menu: </strong><code><span style="color:var(--ds-text-accent-blue,#0055cc);">/routing/ospf/static-neighbor</span></code></p><p>Static configuration of the OSPF neighbors. Required for non-broadcast multi-access networks.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 98.8226%;"><colgroup><col style="width: 18.2514%;"/><col style="width: 81.7486%;"/></colgroup><tbody><tr><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Property</th><th class="highlight-#deebff confluenceTh" data-highlight-colour="#deebff">Description</th></tr><tr><td class="confluenceTd"><strong>address</strong><span> </span>(<em>IP%iface</em>; <span style="color:var(--ds-background-accent-orange-subtler-pressed,#fea362);">mandatory</span> )</td><td class="confluenceTd">The unicast IP address and an interface, that can be used to reach the IP of the neighbor. For example, <code><span style="color:var(--ds-text-accent-green,#216e4e);">address</span>=<span style="color:var(--ds-text-accent-blue,#0055cc);">1.2.3.4%ether1</span></code> indicates that a neighbor with IP <em>1.2.3.4</em> is reachable on the <em>ether1</em> interface.</td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">area</strong><span title=""> </span>(<em title="">name</em>; <span style="color:var(--ds-background-accent-orange-subtler-pressed,#fea362);" title="">mandatory</span> )</td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7">Name of the area the neighbor belongs to.</td></tr><tr><td colspan="1" class="confluenceTd"><strong>comment</strong><span> </span>(<em>string)</em></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><strong title="">disabled</strong><span title=""> </span>(<em title="">yes | no)</em></td><td class="highlight-#f4f5f7 confluenceTd" colspan="1" data-highlight-colour="#f4f5f7"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><strong>instance-id</strong><span> </span>(<em>integer [0..255]</em>; Default:<span> 0</span>)</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7"><strong title="">poll-interval</strong><span title=""> </span>(<em title="">time</em>; Default:<span title=""> </span><strong title="">2m</strong>)</td><td class="highlight-#f4f5f7 confluenceTd" data-highlight-colour="#f4f5f7">How often to send hello messages to the neighbors which are in a &quot;down&quot; state (i.e. there is no traffic from them)</td></tr></tbody></table></div>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/9863239">OSPF_Header</a> (application/vnd.jgraph.mxfile)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/9863240.png">OSPF_Header.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/9863243">Hello_data</a> (application/vnd.jgraph.mxfile)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/9863244.png">Hello_data.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/9863241">Hello_data</a> (application/vnd.jgraph.mxfile)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/9863242.png">Hello_data.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/67272716.png">image2020-2-26_11-9-11.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/67272717.png">image2020-2-26_11-9-32.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/19136839.png">OSPF_AREAS.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/67272719.png">image2020-2-26_11-9-11.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/67272718.png">image2020-2-26_11-9-32.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/67272720.png">image2020-2-26_11-9-32.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/18350151.png">image2020-2-26_11-9-11.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/67272721.png">image2020-2-26_11-9-32.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/18350152.png">image2020-2-26_11-9-32.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/121995320.png">Stub-example.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/121995322.png">Nssa-example.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/122388491.png">Vlink-backbone.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/122388492.png">Vlink-area.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/122388509.png">Basic-multi-area.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/122388515.png">Ospf-adjacency.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/125108281.jpg">Ospf-adjacency.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/125108282.jpg">Basic-multi-area.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/125108283.jpg">Stub-example.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/125108284.jpg">Nssa-example.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/125108285.jpg">Vlink-backbone.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/125108287.jpg">virtual-link2.jpg</a> (image/jpeg)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/161611814.png">Ospf-forwarding.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/9863229/161611815.png">Ospf-forwarding-traffic.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on May 20, 2025 14:53</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
